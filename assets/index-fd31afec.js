import{d as te,r as b,H as v,c as ae,b as t,w as n,f as u,g as P,e as V,B as ne,u as le,C as oe,i as d,t as re,k as ue,y as ie,E as w,_ as de}from"./index-57e0277e.js";const me={class:"inventory-container"},se={class:"card-header"},pe={class:"left"},ge={class:"table-container"},ye={class:"pagination-container"},fe=te({__name:"index",setup(ce){const y=b({page:1,pageSize:10,keyword:""}),C=b([{id:1,code:"RB001",name:"工业机器人本体",category:"机器人",quantity:15,unit:"台",warning:10,remark:"六轴机器人"},{id:2,code:"CT001",name:"机器人控制柜",category:"控制系统",quantity:25,unit:"台",warning:15,remark:"标准控制柜"},{id:3,code:"DR001",name:"伺服驱动器",category:"核心部件",quantity:86,unit:"个",warning:50,remark:"高性能伺服"},{id:4,code:"MT001",name:"伺服电机",category:"核心部件",quantity:120,unit:"个",warning:80,remark:"机器人关节电机"},{id:5,code:"SC001",name:"视觉传感器",category:"传感器",quantity:45,unit:"个",warning:30,remark:"工业相机"},{id:6,code:"SC002",name:"力矩传感器",category:"传感器",quantity:38,unit:"个",warning:25,remark:"六维力传感器"},{id:7,code:"CB001",name:"控制板",category:"电子件",quantity:95,unit:"块",warning:60,remark:"主控板"},{id:8,code:"CB002",name:"接口板",category:"电子件",quantity:150,unit:"块",warning:100,remark:"IO扩展板"},{id:9,code:"SW001",name:"控制软件",category:"软件",quantity:30,unit:"套",warning:20,remark:"机器人控制系统"},{id:10,code:"SP001",name:"备品备件包",category:"配件",quantity:50,unit:"套",warning:30,remark:"标准配件包"},{id:11,code:"RB002",name:"四轴机器人",category:"机器人",quantity:12,unit:"台",warning:8,remark:"SCARA机器人"},{id:12,code:"RB003",name:"协作机器人",category:"机器人",quantity:8,unit:"台",warning:5,remark:"轻型协作机器人"},{id:13,code:"CT002",name:"示教器",category:"控制系统",quantity:35,unit:"台",warning:20,remark:"便携式示教器"},{id:14,code:"DR002",name:"通讯模块",category:"控制系统",quantity:65,unit:"个",warning:40,remark:"工业以太网模块"},{id:15,code:"MT002",name:"减速机",category:"核心部件",quantity:95,unit:"个",warning:60,remark:"谐波减速机"},{id:16,code:"SC003",name:"距离传感器",category:"传感器",quantity:128,unit:"个",warning:80,remark:"激光测距传感器"},{id:17,code:"SC004",name:"压力传感器",category:"传感器",quantity:76,unit:"个",warning:50,remark:"高精度压力传感器"},{id:18,code:"CB003",name:"安全控制板",category:"电子件",quantity:42,unit:"块",warning:30,remark:"安全防护控制板"},{id:19,code:"SW002",name:"离线编程软件",category:"软件",quantity:15,unit:"套",warning:10,remark:"机器人编程环境"},{id:20,code:"SW003",name:"视觉软件包",category:"软件",quantity:20,unit:"套",warning:15,remark:"机器视觉算法包"},{id:21,code:"SP002",name:"工具套件",category:"配件",quantity:68,unit:"套",warning:40,remark:"维护工具包"},{id:22,code:"SP003",name:"电缆组件",category:"配件",quantity:156,unit:"套",warning:100,remark:"标准电缆包"},{id:23,code:"SP004",name:"末端工具",category:"配件",quantity:45,unit:"个",warning:30,remark:"机器人夹具"},{id:24,code:"SP005",name:"安装底座",category:"配件",quantity:25,unit:"套",warning:15,remark:"机器人固定底座"}]),$=b(100),r=v({form:!1,inbound:!1,outbound:!1}),q=b("add"),i=b(null),l=v({code:"",name:"",category:"",quantity:0,unit:"",warning:0,remark:""}),f=v({quantity:1,remark:""}),g=v({quantity:1,remark:""}),I=v({code:[{required:!0,message:"请输入商品编号",trigger:"blur"}],name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],category:[{required:!0,message:"请选择商品类别",trigger:"change"}],quantity:[{required:!0,message:"请输入库存数量",trigger:"blur"}],unit:[{required:!0,message:"请选择单位",trigger:"change"}],warning:[{required:!0,message:"请输入预警值",trigger:"blur"}]}),E=v({quantity:[{required:!0,message:"请输入入库数量",trigger:"blur"}]}),N=v({quantity:[{required:!0,message:"请输入出库数量",trigger:"blur"}]}),S=b(),x=b(),U=b(),j=(o,e)=>o<=0?"danger":o<=e?"warning":"success",A=(o,e)=>o<=0?"无库存":o<=e?"预警":"正常",T=()=>{y.value.page=1,R()},R=()=>{console.log("加载库存列表:",y.value)},D=()=>{q.value="add",Object.assign(l,{code:"",name:"",category:"",quantity:0,unit:"",warning:0,remark:""}),r.form=!0},M=o=>{q.value="edit",Object.assign(l,o),i.value=o,r.form=!0},W=o=>{i.value=o,f.quantity=1,f.remark="",r.inbound=!0},K=o=>{i.value=o,g.quantity=1,g.remark="",r.outbound=!0},L=async()=>{S.value&&await S.value.validate(o=>{o&&(q.value==="add"?(C.value.unshift({id:C.value.length+1,...l}),w.success("添加成功")):i.value&&(Object.assign(i.value,l),w.success("修改成功")),r.form=!1)})},H=async()=>{x.value&&await x.value.validate(o=>{o&&i.value&&(i.value.quantity+=f.quantity,w.success("入库成功"),r.inbound=!1)})},h=async()=>{U.value&&await U.value.validate(o=>{if(o&&i.value){if(g.quantity>i.value.quantity){w.error("出库数量不能大于库存数量");return}i.value.quantity-=g.quantity,w.success("出库成功"),r.outbound=!1}})},G=()=>{R()},J=()=>{R()};return(o,e)=>{const Q=u("el-icon"),k=u("el-input"),m=u("el-button"),c=u("el-table-column"),X=u("el-tag"),Y=u("el-table"),Z=u("el-pagination"),ee=u("el-card"),s=u("el-form-item"),p=u("el-option"),F=u("el-select"),_=u("el-input-number"),B=u("el-form"),z=u("el-dialog");return P(),ae("div",me,[t(ee,null,{header:n(()=>[V("div",se,[V("div",pe,[t(k,{modelValue:y.value.keyword,"onUpdate:modelValue":e[0]||(e[0]=a=>y.value.keyword=a),placeholder:"请输入商品名称/编号",style:{width:"300px"},clearable:"",onKeyup:ne(T,["enter"])},{prefix:n(()=>[t(Q,null,{default:n(()=>[t(le(oe))]),_:1})]),_:1},8,["modelValue"]),t(m,{type:"primary",onClick:T},{default:n(()=>e[20]||(e[20]=[d("搜索")])),_:1})]),t(m,{type:"primary",onClick:D},{default:n(()=>e[21]||(e[21]=[d("入库")])),_:1})])]),default:n(()=>[V("div",ge,[t(Y,{data:C.value,border:"",style:{width:"100%"},height:"100%"},{default:n(()=>[t(c,{prop:"code",label:"商品编号",width:"120"}),t(c,{prop:"name",label:"商品名称"}),t(c,{prop:"category",label:"类别",width:"120"}),t(c,{prop:"quantity",label:"库存数量",width:"120"}),t(c,{prop:"unit",label:"单位",width:"80"}),t(c,{prop:"warning",label:"预警值",width:"100"}),t(c,{prop:"status",label:"状态",width:"100"},{default:n(({row:a})=>[t(X,{type:j(a.quantity,a.warning)},{default:n(()=>[d(re(A(a.quantity,a.warning)),1)]),_:2},1032,["type"])]),_:1}),t(c,{label:"操作",width:"200",fixed:"right"},{default:n(({row:a})=>[t(m,{link:"",type:"primary",onClick:O=>W(a)},{default:n(()=>e[22]||(e[22]=[d("入库")])),_:2},1032,["onClick"]),t(m,{link:"",type:"warning",onClick:O=>K(a)},{default:n(()=>e[23]||(e[23]=[d("出库")])),_:2},1032,["onClick"]),t(m,{link:"",type:"primary",onClick:O=>M(a)},{default:n(()=>e[24]||(e[24]=[d("编辑")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),V("div",ye,[t(Z,{"current-page":y.value.page,"onUpdate:currentPage":e[1]||(e[1]=a=>y.value.page=a),"page-size":y.value.pageSize,"onUpdate:pageSize":e[2]||(e[2]=a=>y.value.pageSize=a),total:$.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:G,onCurrentChange:J},null,8,["current-page","page-size","total"])])]),_:1}),t(z,{modelValue:r.form,"onUpdate:modelValue":e[11]||(e[11]=a=>r.form=a),title:q.value==="add"?"新增商品":"编辑商品",width:"600px"},{footer:n(()=>[t(m,{onClick:e[10]||(e[10]=a=>r.form=!1)},{default:n(()=>e[25]||(e[25]=[d("取消")])),_:1}),t(m,{type:"primary",onClick:L},{default:n(()=>e[26]||(e[26]=[d("确定")])),_:1})]),default:n(()=>[t(B,{ref_key:"formRef",ref:S,model:l,rules:I,"label-width":"100px"},{default:n(()=>[t(s,{label:"商品编号",prop:"code"},{default:n(()=>[t(k,{modelValue:l.code,"onUpdate:modelValue":e[3]||(e[3]=a=>l.code=a),placeholder:"请输入商品编号"},null,8,["modelValue"])]),_:1}),t(s,{label:"商品名称",prop:"name"},{default:n(()=>[t(k,{modelValue:l.name,"onUpdate:modelValue":e[4]||(e[4]=a=>l.name=a),placeholder:"请输入商品名称"},null,8,["modelValue"])]),_:1}),t(s,{label:"商品类别",prop:"category"},{default:n(()=>[t(F,{modelValue:l.category,"onUpdate:modelValue":e[5]||(e[5]=a=>l.category=a),placeholder:"请选择商品类别",style:{width:"100%"}},{default:n(()=>[t(p,{label:"机器人",value:"机器人"}),t(p,{label:"控制系统",value:"控制系统"}),t(p,{label:"核心部件",value:"核心部件"}),t(p,{label:"传感器",value:"传感器"}),t(p,{label:"电子件",value:"电子件"}),t(p,{label:"软件",value:"软件"}),t(p,{label:"配件",value:"配件"})]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"库存数量",prop:"quantity"},{default:n(()=>[t(_,{modelValue:l.quantity,"onUpdate:modelValue":e[6]||(e[6]=a=>l.quantity=a),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(s,{label:"单位",prop:"unit"},{default:n(()=>[t(F,{modelValue:l.unit,"onUpdate:modelValue":e[7]||(e[7]=a=>l.unit=a),placeholder:"请选择单位",style:{width:"100%"}},{default:n(()=>[t(p,{label:"台",value:"台"}),t(p,{label:"个",value:"个"}),t(p,{label:"块",value:"块"}),t(p,{label:"套",value:"套"})]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"预警值",prop:"warning"},{default:n(()=>[t(_,{modelValue:l.warning,"onUpdate:modelValue":e[8]||(e[8]=a=>l.warning=a),min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(s,{label:"备注",prop:"remark"},{default:n(()=>[t(k,{modelValue:l.remark,"onUpdate:modelValue":e[9]||(e[9]=a=>l.remark=a),type:"textarea",rows:3,placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),t(z,{modelValue:r.inbound,"onUpdate:modelValue":e[15]||(e[15]=a=>r.inbound=a),title:"入库",width:"400px"},{footer:n(()=>[t(m,{onClick:e[14]||(e[14]=a=>r.inbound=!1)},{default:n(()=>e[27]||(e[27]=[d("取消")])),_:1}),t(m,{type:"primary",onClick:H},{default:n(()=>e[28]||(e[28]=[d("确定")])),_:1})]),default:n(()=>[t(B,{ref_key:"inboundFormRef",ref:x,model:f,rules:E,"label-width":"100px"},{default:n(()=>[t(s,{label:"入库数量",prop:"quantity"},{default:n(()=>[t(_,{modelValue:f.quantity,"onUpdate:modelValue":e[12]||(e[12]=a=>f.quantity=a),min:1,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(s,{label:"备注",prop:"remark"},{default:n(()=>[t(k,{modelValue:f.remark,"onUpdate:modelValue":e[13]||(e[13]=a=>f.remark=a),type:"textarea",rows:3,placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),t(z,{modelValue:r.outbound,"onUpdate:modelValue":e[19]||(e[19]=a=>r.outbound=a),title:"出库",width:"400px"},{footer:n(()=>[t(m,{onClick:e[18]||(e[18]=a=>r.outbound=!1)},{default:n(()=>e[29]||(e[29]=[d("取消")])),_:1}),t(m,{type:"primary",onClick:h},{default:n(()=>e[30]||(e[30]=[d("确定")])),_:1})]),default:n(()=>[t(B,{ref_key:"outboundFormRef",ref:U,model:g,rules:N,"label-width":"100px"},{default:n(()=>[t(s,{label:"出库数量",prop:"quantity"},{default:n(()=>[i.value?(P(),ue(_,{key:0,modelValue:g.quantity,"onUpdate:modelValue":e[16]||(e[16]=a=>g.quantity=a),min:1,max:i.value.quantity,style:{width:"100%"}},null,8,["modelValue","max"])):ie("",!0)]),_:1}),t(s,{label:"备注",prop:"remark"},{default:n(()=>[t(k,{modelValue:g.remark,"onUpdate:modelValue":e[17]||(e[17]=a=>g.remark=a),type:"textarea",rows:3,placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}});const ve=de(fe,[["__scopeId","data-v-59b75b4c"]]);export{ve as default};
