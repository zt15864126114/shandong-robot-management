import{d as de,q as y,M as j,D as pe,c as F,b as e,w as l,r as o,N as ce,o as z,a as p,J as me,y as I,K as A,h as r,Q as ge,t as u,O as _e,f as H,F as ve,e as be,H as fe,E,_ as ye}from"./index-7231d2c2.js";const he={class:"promotion-container"},Ve={class:"card-header"},we={class:"left"},Te={class:"summary-cards"},xe={class:"number primary"},ke={class:"number warning"},qe={class:"number info"},Ce={class:"number success"},Ue={class:"table-container"},Se={class:"operation-buttons"},ze=["onClick"],De=["onClick"],Pe=["onClick"],Be={class:"pagination-container"},Oe=de({__name:"index",setup(je){const c=y({page:1,pageSize:10,keyword:"",type:"",status:""}),D=y([{id:1,name:"新客户专享优惠券",type:"coupon",status:"active",startTime:"2025-03-01 00:00:00",endTime:"2025-03-31 23:59:59",participants:856,conversion:35,rules:"新客户注册即可领取100元优惠券",budget:1e4,target:["new"],description:"针对新注册客户推出的专属优惠活动"},{id:2,name:"春季满减特惠",type:"discount",status:"active",startTime:"2025-03-15 00:00:00",endTime:"2025-04-15 23:59:59",participants:1250,conversion:42,rules:"满1000减100，满2000减300",budget:5e4,target:["all"],description:"春季促销活动，多买多优惠"},{id:3,name:"限时秒杀活动",type:"flash_sale",status:"pending",startTime:"2025-04-01 10:00:00",endTime:"2025-04-01 22:00:00",participants:0,conversion:0,rules:"指定商品限时5折起",budget:3e4,target:["all"],description:"限时特价活动，先到先得"},{id:4,name:"VIP会员专享礼包",type:"combo",status:"active",startTime:"2025-03-10 00:00:00",endTime:"2025-04-10 23:59:59",participants:328,conversion:58,rules:"VIP会员购买指定商品享受8折优惠，并赠送精美礼品",budget:25e3,target:["vip"],description:"回馈VIP会员的专属优惠活动"},{id:5,name:"老客户感恩回馈",type:"coupon",status:"active",startTime:"2025-03-20 00:00:00",endTime:"2025-04-20 23:59:59",participants:642,conversion:45,rules:"老客户可领取200元无门槛优惠券",budget:4e4,target:["regular"],description:"感谢老客户长期支持的回馈活动"},{id:6,name:"机器人新品首发",type:"flash_sale",status:"pending",startTime:"2025-04-15 09:00:00",endTime:"2025-04-15 21:00:00",participants:0,conversion:0,rules:"新品首发限时8折，前100名购买送配件",budget:45e3,target:["all"],description:"新品首发特惠活动"},{id:7,name:"企业采购特惠",type:"discount",status:"active",startTime:"2025-03-05 00:00:00",endTime:"2025-04-05 23:59:59",participants:156,conversion:65,rules:"企业采购满50000减5000，满100000减12000",budget:8e4,target:["all"],description:"针对企业客户的批量采购优惠"},{id:8,name:"春季新品组合优惠",type:"combo",status:"active",startTime:"2025-03-25 00:00:00",endTime:"2025-04-25 23:59:59",participants:428,conversion:48,rules:"购买指定机器人+配件组合享受7折优惠",budget:35e3,target:["all"],description:"新品组合促销活动"},{id:9,name:"新客户首单特惠",type:"coupon",status:"ended",startTime:"2025-02-01 00:00:00",endTime:"2025-02-28 23:59:59",participants:1250,conversion:38,rules:"新客户首单享受9折优惠，并赠送100元优惠券",budget:28e3,target:["new"],description:"新客户首单优惠活动"},{id:10,name:"机器人升级服务",type:"discount",status:"active",startTime:"2025-03-30 00:00:00",endTime:"2025-04-30 23:59:59",participants:286,conversion:52,rules:"老款机器人升级服务享受8折优惠",budget:22e3,target:["regular"],description:"机器人升级服务优惠活动"}]),k={active:7,pending:2,ended:1,totalParticipants:4210},J=y(10),P=y(!1),_=j({form:!1,view:!1}),q=y("add"),d=y(null),s=j({name:"",type:"",time:[],rules:"",budget:0,target:[],description:""}),C=j({name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],type:[{required:!0,message:"请选择活动类型",trigger:"change"}],time:[{required:!0,message:"请选择活动时间",trigger:"change"}],rules:[{required:!0,message:"请输入活动规则",trigger:"blur"}],budget:[{required:!0,message:"请输入活动预算",trigger:"blur"}],target:[{required:!0,message:"请选择目标人群",trigger:"change"}]}),B=()=>{const n={name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],type:[{required:!0,message:"请选择活动类型",trigger:"change"}],time:[{required:!0,message:"请选择活动时间",trigger:"change"}],target:[{required:!0,message:"请选择目标人群",trigger:"change"}]};switch(s.type){case"coupon":return{...n,rules:[{required:!0,message:"请输入优惠券规则",trigger:"blur"}],budget:[{required:!0,message:"请输入优惠券预算",trigger:"blur"}]};case"discount":return{...n,rules:[{required:!0,message:"请输入满减规则",trigger:"blur"}],budget:[{required:!0,message:"请输入满减预算",trigger:"blur"}]};case"flash_sale":return{...n,rules:[{required:!0,message:"请输入特价规则",trigger:"blur"}],budget:[{required:!0,message:"请输入特价预算",trigger:"blur"}]};case"combo":return{...n,rules:[{required:!0,message:"请输入组合优惠规则",trigger:"blur"}],budget:[{required:!0,message:"请输入组合优惠预算",trigger:"blur"}]};default:return n}};pe(()=>s.type,()=>{h.value&&h.value.clearValidate(),Object.assign(C,B())});const h=y(),R=n=>({coupon:"success",discount:"warning",flash_sale:"danger",combo:"primary"})[n]||"info",$=n=>({coupon:"优惠券",discount:"满减活动",flash_sale:"限时特价",combo:"组合优惠"})[n]||"未知",N=n=>({pending:"info",active:"success",ended:""})[n]||"",K=n=>({pending:"未开始",active:"进行中",ended:"已结束"})[n]||"未知",Q=n=>({new:"新客户",regular:"老客户",vip:"VIP客户",all:"所有客户"})[n]||"未知",L=()=>{c.value.page=1,O()},O=()=>{P.value=!0,setTimeout(()=>{P.value=!1},500)},G=()=>{q.value="add",Object.assign(s,{name:"",type:"",time:[],rules:"",budget:0,target:[],description:""}),Object.assign(C,B()),_.form=!0},W=n=>{q.value="edit",Object.assign(s,{name:n.name,type:n.type,time:[n.startTime,n.endTime],rules:n.rules,budget:n.budget,target:n.target,description:n.description}),Object.assign(C,B()),d.value=n,_.form=!0},X=n=>{d.value=n,_.view=!0},Y=n=>{fe.confirm("确定要删除该活动吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("删除活动:",n),E.success("删除成功")}).catch(()=>{})},Z=()=>{O()},ee=()=>{O()},te=async()=>{h.value&&await h.value.validate(n=>{if(n){const[a,V]=s.time,b=new Date,i=b<new Date(a)?"pending":b>new Date(V)?"ended":"active";q.value==="add"?(D.value.unshift({id:D.value.length+1,name:s.name,type:s.type,status:i,startTime:a,endTime:V,participants:0,conversion:0,rules:s.rules,budget:s.budget,target:s.target,description:s.description}),E.success("添加成功")):d.value&&(Object.assign(d.value,{name:s.name,type:s.type,status:i,startTime:a,endTime:V,rules:s.rules,budget:s.budget,target:s.target,description:s.description}),E.success("修改成功")),_.form=!1}})};return(n,a)=>{const V=o("el-icon"),b=o("el-input"),i=o("el-option"),U=o("el-select"),w=o("el-button"),T=o("el-card"),S=o("el-col"),ae=o("el-row"),v=o("el-table-column"),x=o("el-tag"),le=o("el-table"),se=o("el-pagination"),f=o("el-form-item"),ne=o("el-date-picker"),oe=o("el-input-number"),re=o("el-form"),M=o("el-dialog"),m=o("el-descriptions-item"),ie=o("el-descriptions"),ue=ce("loading");return z(),F("div",he,[e(T,null,{header:l(()=>[p("div",Ve,[p("div",we,[e(b,{modelValue:c.value.keyword,"onUpdate:modelValue":a[0]||(a[0]=t=>c.value.keyword=t),placeholder:"请输入活动名称/优惠券名称",style:{width:"300px"},clearable:"",onKeyup:me(L,["enter"])},{prefix:l(()=>[e(V,null,{default:l(()=>[e(I(A))]),_:1})]),_:1},8,["modelValue"]),e(U,{modelValue:c.value.type,"onUpdate:modelValue":a[1]||(a[1]=t=>c.value.type=t),placeholder:"活动类型",clearable:"",style:{width:"120px"}},{default:l(()=>[e(i,{label:"优惠券",value:"coupon"}),e(i,{label:"满减活动",value:"discount"}),e(i,{label:"限时特价",value:"flash_sale"}),e(i,{label:"组合优惠",value:"combo"})]),_:1},8,["modelValue"]),e(U,{modelValue:c.value.status,"onUpdate:modelValue":a[2]||(a[2]=t=>c.value.status=t),placeholder:"活动状态",clearable:"",style:{width:"120px"}},{default:l(()=>[e(i,{label:"未开始",value:"pending"}),e(i,{label:"进行中",value:"active"}),e(i,{label:"已结束",value:"ended"})]),_:1},8,["modelValue"]),e(w,{type:"primary",icon:I(A),onClick:L},{default:l(()=>a[16]||(a[16]=[r("搜索")])),_:1},8,["icon"])]),e(w,{type:"primary",icon:I(ge),onClick:G},{default:l(()=>a[17]||(a[17]=[r("新增活动")])),_:1},8,["icon"])])]),default:l(()=>[p("div",Te,[e(ae,{gutter:20},{default:l(()=>[e(S,{span:6},{default:l(()=>[e(T,{shadow:"hover",class:"data-card"},{default:l(()=>[a[18]||(a[18]=p("h3",null,"进行中活动",-1)),p("div",xe,u(k.active),1)]),_:1})]),_:1}),e(S,{span:6},{default:l(()=>[e(T,{shadow:"hover",class:"data-card"},{default:l(()=>[a[19]||(a[19]=p("h3",null,"未开始活动",-1)),p("div",ke,u(k.pending),1)]),_:1})]),_:1}),e(S,{span:6},{default:l(()=>[e(T,{shadow:"hover",class:"data-card"},{default:l(()=>[a[20]||(a[20]=p("h3",null,"已结束活动",-1)),p("div",qe,u(k.ended),1)]),_:1})]),_:1}),e(S,{span:6},{default:l(()=>[e(T,{shadow:"hover",class:"data-card"},{default:l(()=>[a[21]||(a[21]=p("h3",null,"总参与人数",-1)),p("div",Ce,u(k.totalParticipants),1)]),_:1})]),_:1})]),_:1})]),p("div",Ue,[_e((z(),H(le,{data:D.value,border:"",style:{width:"100%"},height:"100%"},{default:l(()=>[e(v,{prop:"name",label:"活动名称","min-width":"150"}),e(v,{prop:"type",label:"活动类型",width:"120"},{default:l(({row:t})=>[e(x,{type:R(t.type)},{default:l(()=>[r(u($(t.type)),1)]),_:2},1032,["type"])]),_:1}),e(v,{prop:"status",label:"状态",width:"100"},{default:l(({row:t})=>[e(x,{type:N(t.status)},{default:l(()=>[r(u(K(t.status)),1)]),_:2},1032,["type"])]),_:1}),e(v,{prop:"startTime",label:"开始时间",width:"180"}),e(v,{prop:"endTime",label:"结束时间",width:"180"}),e(v,{prop:"participants",label:"参与人数",width:"100"}),e(v,{prop:"conversion",label:"转化率",width:"100"},{default:l(({row:t})=>[r(u(t.conversion)+"% ",1)]),_:1}),e(v,{label:"操作",width:"180",fixed:"right"},{default:l(({row:t})=>[p("div",Se,[p("a",{onClick:g=>W(t)},"编辑",8,ze),p("a",{onClick:g=>X(t)},"查看",8,De),p("a",{class:"danger",onClick:g=>Y(t)},"删除",8,Pe)])]),_:1})]),_:1},8,["data"])),[[ue,P.value]])]),p("div",Be,[e(se,{"current-page":c.value.page,"onUpdate:currentPage":a[3]||(a[3]=t=>c.value.page=t),"page-size":c.value.pageSize,"onUpdate:pageSize":a[4]||(a[4]=t=>c.value.pageSize=t),total:J.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:Z,onCurrentChange:ee},null,8,["current-page","page-size","total"])])]),_:1}),e(M,{modelValue:_.form,"onUpdate:modelValue":a[13]||(a[13]=t=>_.form=t),title:q.value==="add"?"新增活动":"编辑活动",width:"600px"},{footer:l(()=>[e(w,{onClick:a[12]||(a[12]=t=>_.form=!1)},{default:l(()=>a[22]||(a[22]=[r("取消")])),_:1}),e(w,{type:"primary",onClick:te},{default:l(()=>a[23]||(a[23]=[r("确定")])),_:1})]),default:l(()=>[e(re,{ref_key:"formRef",ref:h,model:s,rules:C,"label-width":"100px"},{default:l(()=>[e(f,{label:"活动名称",prop:"name"},{default:l(()=>[e(b,{modelValue:s.name,"onUpdate:modelValue":a[5]||(a[5]=t=>s.name=t),placeholder:"请输入活动名称"},null,8,["modelValue"])]),_:1}),e(f,{label:"活动类型",prop:"type"},{default:l(()=>[e(U,{modelValue:s.type,"onUpdate:modelValue":a[6]||(a[6]=t=>s.type=t),placeholder:"请选择活动类型",style:{width:"100%"}},{default:l(()=>[e(i,{label:"优惠券",value:"coupon"}),e(i,{label:"满减活动",value:"discount"}),e(i,{label:"限时特价",value:"flash_sale"}),e(i,{label:"组合优惠",value:"combo"})]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"活动时间",prop:"time"},{default:l(()=>[e(ne,{modelValue:s.time,"onUpdate:modelValue":a[7]||(a[7]=t=>s.time=t),type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(f,{label:"活动规则",prop:"rules"},{default:l(()=>[e(b,{modelValue:s.rules,"onUpdate:modelValue":a[8]||(a[8]=t=>s.rules=t),type:"textarea",rows:4,placeholder:"请输入活动规则"},null,8,["modelValue"])]),_:1}),e(f,{label:"活动预算",prop:"budget"},{default:l(()=>[e(oe,{modelValue:s.budget,"onUpdate:modelValue":a[9]||(a[9]=t=>s.budget=t),min:0,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(f,{label:"目标人群",prop:"target"},{default:l(()=>[e(U,{modelValue:s.target,"onUpdate:modelValue":a[10]||(a[10]=t=>s.target=t),placeholder:"请选择目标人群",style:{width:"100%"},multiple:""},{default:l(()=>[e(i,{label:"新客户",value:"new"}),e(i,{label:"老客户",value:"regular"}),e(i,{label:"VIP客户",value:"vip"}),e(i,{label:"所有客户",value:"all"})]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"活动说明",prop:"description"},{default:l(()=>[e(b,{modelValue:s.description,"onUpdate:modelValue":a[11]||(a[11]=t=>s.description=t),type:"textarea",rows:4,placeholder:"请输入活动说明"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),e(M,{modelValue:_.view,"onUpdate:modelValue":a[15]||(a[15]=t=>_.view=t),title:"活动详情",width:"600px","close-on-click-modal":!1},{footer:l(()=>[e(w,{onClick:a[14]||(a[14]=t=>_.view=!1)},{default:l(()=>a[24]||(a[24]=[r("关闭")])),_:1})]),default:l(()=>[e(ie,{column:1,border:""},{default:l(()=>[e(m,{label:"活动名称"},{default:l(()=>{var t;return[r(u((t=d.value)==null?void 0:t.name),1)]}),_:1}),e(m,{label:"活动类型"},{default:l(()=>{var t;return[e(x,{type:R((t=d.value)==null?void 0:t.type)},{default:l(()=>{var g;return[r(u($((g=d.value)==null?void 0:g.type)),1)]}),_:1},8,["type"])]}),_:1}),e(m,{label:"活动状态"},{default:l(()=>{var t;return[e(x,{type:N((t=d.value)==null?void 0:t.status)},{default:l(()=>{var g;return[r(u(K((g=d.value)==null?void 0:g.status)),1)]}),_:1},8,["type"])]}),_:1}),e(m,{label:"开始时间"},{default:l(()=>{var t;return[r(u((t=d.value)==null?void 0:t.startTime),1)]}),_:1}),e(m,{label:"结束时间"},{default:l(()=>{var t;return[r(u((t=d.value)==null?void 0:t.endTime),1)]}),_:1}),e(m,{label:"参与人数"},{default:l(()=>{var t;return[r(u((t=d.value)==null?void 0:t.participants),1)]}),_:1}),e(m,{label:"转化率"},{default:l(()=>{var t;return[r(u((t=d.value)==null?void 0:t.conversion)+"%",1)]}),_:1}),e(m,{label:"活动规则"},{default:l(()=>{var t;return[r(u((t=d.value)==null?void 0:t.rules),1)]}),_:1}),e(m,{label:"活动预算"},{default:l(()=>{var t;return[r(u((t=d.value)==null?void 0:t.budget),1)]}),_:1}),e(m,{label:"目标人群"},{default:l(()=>{var t;return[(z(!0),F(ve,null,be((t=d.value)==null?void 0:t.target,g=>(z(),H(x,{key:g,class:"mx-1",style:{"margin-right":"4px"}},{default:l(()=>[r(u(Q(g)),1)]),_:2},1024))),128))]}),_:1}),e(m,{label:"活动说明"},{default:l(()=>{var t;return[r(u((t=d.value)==null?void 0:t.description),1)]}),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});const Ee=ye(Oe,[["__scopeId","data-v-b170ea08"]]);export{Ee as default};
