import{d as Z,C as Y,q as N,D as oe,f as $,w as t,r as s,o as V,a as c,b as e,h as r,c as j,e as H,F as J,E as G,_ as ee,G as K,t as R,H as Q,y as E,I as X,z as ne,J as se,K as de}from"./index-5f9ceb05.js";const re={class:"dialog-footer"},ue=Z({__name:"order-dialog",props:{modelValue:Boolean,order:{type:Object,default:void 0}},emits:["update:modelValue","success"],setup(q,{emit:p}){const _=q,U=p,g=["山东重工","青岛港","济南医院","潍柴动力","浪潮集团","海尔集团","中国重汽","山东钢铁","齐鲁制药","东营石化"],z=[{type:"工业机器人",models:["AR-150","AR-200","AR-300","AR-500"]},{type:"服务机器人",models:["SR-100","SR-200","SR-300"]},{type:"特种机器人",models:["SP-150","SP-200","SP-300"]},{type:"协作机器人",models:["CR-50","CR-100","CR-150"]}],O=Y({get:()=>_.modelValue,set:v=>U("update:modelValue",v)}),P=N(),S=N(!1),u=N({customer:"",productType:"",productModel:"",amount:0,status:"pending",deliveryTime:"",remark:""}),F=Y(()=>{const v=z.find(d=>d.type===u.value.productType);return v?v.models:[]}),L={customer:[{required:!0,message:"请选择客户",trigger:"change"}],productType:[{required:!0,message:"请选择产品类型",trigger:"change"}],productModel:[{required:!0,message:"请选择产品型号",trigger:"change"}],amount:[{required:!0,message:"请输入订单金额",trigger:"blur"}],status:[{required:!0,message:"请选择订单状态",trigger:"change"}],deliveryTime:[{required:!0,message:"请选择交付日期",trigger:"change"}]};oe(()=>_.order,v=>{v&&(u.value={...u.value,...v})},{immediate:!0});const n=()=>{u.value.productModel="",u.value.amount=0},f=()=>{if(u.value.productModel){const v=parseInt(u.value.productModel.split("-")[1])*1e4;u.value.amount=v}},k=async()=>{P.value&&await P.value.validate(v=>{v&&(S.value=!0,setTimeout(()=>{S.value=!1,G.success("保存成功"),O.value=!1,U("success")},1e3))})};return(v,d)=>{const C=s("el-option"),I=s("el-select"),w=s("el-form-item"),M=s("el-col"),a=s("el-input-number"),l=s("el-date-picker"),y=s("el-row"),h=s("el-input"),D=s("el-form"),b=s("el-button"),T=s("el-dialog");return V(),$(T,{title:q.order?"编辑订单":"新增订单",modelValue:O.value,"onUpdate:modelValue":d[8]||(d[8]=o=>O.value=o),width:"700px","close-on-click-modal":!1},{footer:t(()=>[c("span",re,[e(b,{onClick:d[7]||(d[7]=o=>O.value=!1)},{default:t(()=>d[9]||(d[9]=[r("取 消")])),_:1}),e(b,{type:"primary",onClick:k,loading:S.value},{default:t(()=>d[10]||(d[10]=[r(" 确 定 ")])),_:1},8,["loading"])])]),default:t(()=>[e(D,{ref_key:"formRef",ref:P,model:u.value,rules:L,"label-width":"100px",class:"order-form"},{default:t(()=>[e(y,{gutter:20},{default:t(()=>[e(M,{span:12},{default:t(()=>[e(w,{label:"客户名称",prop:"customer"},{default:t(()=>[e(I,{modelValue:u.value.customer,"onUpdate:modelValue":d[0]||(d[0]=o=>u.value.customer=o),placeholder:"请选择客户",style:{width:"100%"}},{default:t(()=>[(V(),j(J,null,H(g,o=>e(C,{key:o,label:o,value:o},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(M,{span:12},{default:t(()=>[e(w,{label:"产品类型",prop:"productType"},{default:t(()=>[e(I,{modelValue:u.value.productType,"onUpdate:modelValue":d[1]||(d[1]=o=>u.value.productType=o),placeholder:"请选择产品类型",style:{width:"100%"},onChange:n},{default:t(()=>[(V(),j(J,null,H(z,o=>e(C,{key:o.type,label:o.type,value:o.type},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(M,{span:12},{default:t(()=>[e(w,{label:"产品型号",prop:"productModel"},{default:t(()=>[e(I,{modelValue:u.value.productModel,"onUpdate:modelValue":d[2]||(d[2]=o=>u.value.productModel=o),placeholder:"请选择产品型号",style:{width:"100%"},onChange:f},{default:t(()=>[(V(!0),j(J,null,H(F.value,o=>(V(),$(C,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(M,{span:12},{default:t(()=>[e(w,{label:"订单金额",prop:"amount"},{default:t(()=>[e(a,{modelValue:u.value.amount,"onUpdate:modelValue":d[3]||(d[3]=o=>u.value.amount=o),min:0,precision:2,step:1e4,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(M,{span:12},{default:t(()=>[e(w,{label:"订单状态",prop:"status"},{default:t(()=>[e(I,{modelValue:u.value.status,"onUpdate:modelValue":d[4]||(d[4]=o=>u.value.status=o),placeholder:"请选择状态",style:{width:"100%"}},{default:t(()=>[e(C,{label:"待付款",value:"unpaid"}),e(C,{label:"待发货",value:"unshipped"}),e(C,{label:"已发货",value:"shipped"}),e(C,{label:"已完成",value:"completed"}),e(C,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(M,{span:12},{default:t(()=>[e(w,{label:"交付日期",prop:"deliveryTime"},{default:t(()=>[e(l,{modelValue:u.value.deliveryTime,"onUpdate:modelValue":d[5]||(d[5]=o=>u.value.deliveryTime=o),type:"date",placeholder:"选择交付日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(w,{label:"备注",prop:"remark"},{default:t(()=>[e(h,{modelValue:u.value.remark,"onUpdate:modelValue":d[6]||(d[6]=o=>u.value.remark=o),type:"textarea",rows:3,placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}});const ie=ee(ue,[["__scopeId","data-v-8f7473c6"]]),pe={class:"timeline-section"},me={class:"dialog-footer"},ce=Z({__name:"order-detail",props:{modelValue:{type:Boolean},order:{}},emits:["update:modelValue","success"],setup(q,{emit:p}){const _=q,U=p,g=Y({get:()=>_.modelValue,set:n=>U("update:modelValue",n)}),z=n=>n?{unpaid:"warning",unshipped:"primary",shipped:"success",completed:"success",cancelled:"info"}[n]:"",O=n=>n?{unpaid:"待付款",unshipped:"待发货",shipped:"已发货",completed:"已完成",cancelled:"已取消"}[n]:"",P=n=>n?n.toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00",S=Y(()=>{if(!_.order)return[];const n=[{content:"订单创建",timestamp:_.order.createTime,type:"primary"}];return _.order.status==="cancelled"?n.push({content:"订单取消",timestamp:_.order.updateTime,type:"danger"}):(_.order.status!=="unpaid"&&n.push({content:"付款完成",timestamp:_.order.payTime||"-",type:"success"}),["shipped","completed"].includes(_.order.status)&&n.push({content:"商品发货",timestamp:_.order.shipTime||"-",type:"success"}),_.order.status==="completed"&&n.push({content:"订单完成",timestamp:_.order.completeTime||"-",type:"success"})),n}),u=()=>{Q.confirm("确认该订单已完成付款？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{G.success("确认付款成功"),U("success"),g.value=!1})},F=()=>{Q.confirm("确认发货该订单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{G.success("确认发货成功"),U("success"),g.value=!1})},L=()=>{Q.confirm("确认完成该订单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{G.success("订单已完成"),U("success"),g.value=!1})};return(n,f)=>{const k=s("el-descriptions-item"),v=s("el-tag"),d=s("el-descriptions"),C=s("el-timeline-item"),I=s("el-timeline"),w=s("el-button"),M=s("el-dialog");return V(),$(M,{title:"订单详情",modelValue:g.value,"onUpdate:modelValue":f[1]||(f[1]=a=>g.value=a),width:"800px"},{footer:t(()=>{var a,l,y;return[c("span",me,[e(w,{onClick:f[0]||(f[0]=h=>g.value=!1)},{default:t(()=>f[3]||(f[3]=[r("关 闭")])),_:1}),((a=n.order)==null?void 0:a.status)==="unpaid"?(V(),$(w,{key:0,type:"primary",onClick:u},{default:t(()=>f[4]||(f[4]=[r(" 确认付款 ")])),_:1})):K("",!0),((l=n.order)==null?void 0:l.status)==="unshipped"?(V(),$(w,{key:1,type:"success",onClick:F},{default:t(()=>f[5]||(f[5]=[r(" 确认发货 ")])),_:1})):K("",!0),((y=n.order)==null?void 0:y.status)==="shipped"?(V(),$(w,{key:2,type:"success",onClick:L},{default:t(()=>f[6]||(f[6]=[r(" 确认完成 ")])),_:1})):K("",!0)])]}),default:t(()=>[n.order?(V(),$(d,{key:0,column:2,border:""},{default:t(()=>[e(k,{label:"订单编号"},{default:t(()=>{var a;return[r(R((a=n.order)==null?void 0:a.orderNo),1)]}),_:1}),e(k,{label:"订单状态"},{default:t(()=>{var a;return[e(v,{type:z((a=n.order)==null?void 0:a.status)},{default:t(()=>{var l;return[r(R(O((l=n.order)==null?void 0:l.status)),1)]}),_:1},8,["type"])]}),_:1}),e(k,{label:"客户名称"},{default:t(()=>{var a;return[r(R((a=n.order)==null?void 0:a.customer),1)]}),_:1}),e(k,{label:"订单金额"},{default:t(()=>{var a;return[r("¥"+R(P((a=n.order)==null?void 0:a.amount)),1)]}),_:1}),e(k,{label:"产品类型"},{default:t(()=>{var a;return[r(R((a=n.order)==null?void 0:a.productType),1)]}),_:1}),e(k,{label:"产品型号"},{default:t(()=>{var a;return[r(R((a=n.order)==null?void 0:a.productModel),1)]}),_:1}),e(k,{label:"创建时间"},{default:t(()=>{var a;return[r(R((a=n.order)==null?void 0:a.createTime),1)]}),_:1}),e(k,{label:"交付时间"},{default:t(()=>{var a;return[r(R((a=n.order)==null?void 0:a.deliveryTime),1)]}),_:1}),e(k,{label:"备注",span:2},{default:t(()=>{var a;return[r(R(((a=n.order)==null?void 0:a.remark)||"暂无备注"),1)]}),_:1})]),_:1})):K("",!0),c("div",pe,[f[2]||(f[2]=c("h3",null,"订单进度",-1)),e(I,null,{default:t(()=>[(V(!0),j(J,null,H(S.value,(a,l)=>(V(),$(C,{key:l,type:a.type,timestamp:a.timestamp},{default:t(()=>[r(R(a.content),1)]),_:2},1032,["type","timestamp"]))),128))]),_:1})])]),_:1},8,["modelValue"])}}});const fe=ee(ce,[["__scopeId","data-v-78555c8f"]]),_e={class:"order-container"},ge={class:"summary-cards"},ve={class:"trend up"},ye={class:"trend up"},be={class:"trend down"},Te={class:"trend up"},he={class:"card-header"},we={class:"left"},Ve={class:"table-container"},Se={class:"pagination-container"},ke=Z({__name:"index",setup(q){const p=N({page:1,pageSize:10,keyword:"",type:"",status:void 0,dateRange:void 0}),_=N([]),U=N(0),g=N({order:!1,detail:!1}),z=N(),P=(()=>{const a=[],l=["unpaid","unshipped","shipped","completed","cancelled"],y=(T,o)=>new Date(T.getTime()+Math.random()*(o.getTime()-T.getTime())),h=new Date;h.setDate(h.getDate()-90);const D=["山东重工","青岛港","济南医院","潍柴动力","浪潮集团","海尔集团","中国重汽","山东钢铁","齐鲁制药","东营石化"],b=[{type:"工业机器人",models:["AR-150","AR-200","AR-300","AR-500"]},{type:"服务机器人",models:["SR-100","SR-200","SR-300"]},{type:"特种机器人",models:["SP-150","SP-200","SP-300"]},{type:"协作机器人",models:["CR-50","CR-100","CR-150"]}];for(let T=1;T<=100;T++){const o=b[Math.floor(Math.random()*b.length)],x=o.models[Math.floor(Math.random()*o.models.length)],B=parseInt(x.split("-")[1])*1e4+Math.floor(Math.random()*5e4),m=y(h,new Date),W=`ORD${m.getFullYear()}${String(m.getMonth()+1).padStart(2,"0")}${String(m.getDate()).padStart(2,"0")}${String(T).padStart(4,"0")}`;a.push({id:T,orderNo:W,customer:D[Math.floor(Math.random()*D.length)],productType:o.type,productModel:x,amount:B,status:l[Math.floor(Math.random()*l.length)],createTime:m.toISOString().replace("T"," ").substring(0,19),updateTime:m.toISOString().replace("T"," ").substring(0,19),payTime:status!=="unpaid"?new Date(m.getTime()+24*60*60*1e3).toISOString().replace("T"," ").substring(0,19):null,shipTime:["shipped","completed"].includes(status)?new Date(m.getTime()+3*24*60*60*1e3).toISOString().replace("T"," ").substring(0,19):null,completeTime:status==="completed"?new Date(m.getTime()+7*24*60*60*1e3).toISOString().replace("T"," ").substring(0,19):null,deliveryTime:new Date(m.getTime()+30*24*60*60*1e3).toISOString().split("T")[0]})}return a.sort((T,o)=>new Date(o.createTime).getTime()-new Date(T.createTime).getTime())})(),S=()=>{const{page:a,pageSize:l,keyword:y,dateRange:h,status:D}=p.value;let b=P;if(y){const x=y.toLowerCase();b=b.filter(A=>A.orderNo.toLowerCase().includes(x)||A.customer.includes(y))}if(h){const[x,A]=h;b=b.filter(B=>{const m=new Date(B.createTime);return m>=x&&m<=A})}D&&(b=b.filter(x=>x.status===D)),U.value=b.length;const T=(a-1)*l,o=T+l;_.value=b.slice(T,o)},u=a=>({unpaid:"warning",unshipped:"primary",shipped:"success",completed:"success",cancelled:"info"})[a],F=a=>({unpaid:"待付款",unshipped:"待发货",shipped:"已发货",completed:"已完成",cancelled:"已取消"})[a],L=a=>a.toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2}),n=()=>{p.value.page=1,S()},f=()=>{p.value={page:1,pageSize:10,keyword:"",type:"",status:void 0,dateRange:void 0},S()},k=a=>{z.value=a,g.value.detail=!0},v=a=>{z.value=a,g.value.order=!0},d=a=>{Q.confirm("确定要取消该订单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("取消订单:",a),G.success("订单已取消"),S()}).catch(()=>{})},C=()=>{z.value=void 0,g.value.order=!0},I=a=>{p.value.pageSize=a,p.value.page=1,S()},w=a=>{p.value.page=a,S()},M=()=>{S()};return S(),(a,l)=>{const y=s("el-icon"),h=s("el-card"),D=s("el-col"),b=s("el-row"),T=s("el-input"),o=s("el-option"),x=s("el-select"),A=s("el-date-picker"),B=s("el-button"),m=s("el-table-column"),W=s("el-tag"),le=s("el-table"),ae=s("el-pagination");return V(),j("div",_e,[c("div",ge,[e(b,{gutter:20},{default:t(()=>[e(D,{span:6},{default:t(()=>[e(h,{shadow:"hover",class:"data-card"},{default:t(()=>[l[9]||(l[9]=c("h3",null,"订单总数",-1)),l[10]||(l[10]=c("div",{class:"number"},"1,286",-1)),c("div",ve,[e(y,null,{default:t(()=>[e(E(X))]),_:1}),l[8]||(l[8]=r(" 8.5% "))])]),_:1})]),_:1}),e(D,{span:6},{default:t(()=>[e(h,{shadow:"hover",class:"data-card"},{default:t(()=>[l[12]||(l[12]=c("h3",null,"订单金额",-1)),l[13]||(l[13]=c("div",{class:"number"},"¥15,862,500",-1)),c("div",ye,[e(y,null,{default:t(()=>[e(E(X))]),_:1}),l[11]||(l[11]=r(" 12.3% "))])]),_:1})]),_:1}),e(D,{span:6},{default:t(()=>[e(h,{shadow:"hover",class:"data-card"},{default:t(()=>[l[15]||(l[15]=c("h3",null,"待处理订单",-1)),l[16]||(l[16]=c("div",{class:"number warning"},"86",-1)),c("div",be,[e(y,null,{default:t(()=>[e(E(ne))]),_:1}),l[14]||(l[14]=r(" 5.2% "))])]),_:1})]),_:1}),e(D,{span:6},{default:t(()=>[e(h,{shadow:"hover",class:"data-card"},{default:t(()=>[l[18]||(l[18]=c("h3",null,"完成率",-1)),l[19]||(l[19]=c("div",{class:"number"},"96.8%",-1)),c("div",Te,[e(y,null,{default:t(()=>[e(E(X))]),_:1}),l[17]||(l[17]=r(" 2.1% "))])]),_:1})]),_:1})]),_:1})]),e(h,null,{header:t(()=>[c("div",he,[c("div",we,[e(T,{modelValue:p.value.keyword,"onUpdate:modelValue":l[0]||(l[0]=i=>p.value.keyword=i),placeholder:"请输入订单号/客户名称",style:{width:"300px"},clearable:"",onKeyup:se(n,["enter"])},{prefix:t(()=>[e(y,null,{default:t(()=>[e(E(de))]),_:1})]),_:1},8,["modelValue"]),e(x,{modelValue:p.value.type,"onUpdate:modelValue":l[1]||(l[1]=i=>p.value.type=i),placeholder:"产品类型",clearable:"",style:{width:"180px"}},{default:t(()=>[e(o,{label:"工业机器人",value:"industrial"}),e(o,{label:"服务机器人",value:"service"}),e(o,{label:"特种机器人",value:"special"}),e(o,{label:"协作机器人",value:"cooperative"})]),_:1},8,["modelValue"]),e(x,{modelValue:p.value.status,"onUpdate:modelValue":l[2]||(l[2]=i=>p.value.status=i),placeholder:"订单状态",clearable:"",style:{width:"120px"}},{default:t(()=>[e(o,{label:"待付款",value:"unpaid"}),e(o,{label:"待发货",value:"unshipped"}),e(o,{label:"已发货",value:"shipped"}),e(o,{label:"已完成",value:"completed"}),e(o,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"]),e(A,{modelValue:p.value.dateRange,"onUpdate:modelValue":l[3]||(l[3]=i=>p.value.dateRange=i),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"240px"}},null,8,["modelValue"]),e(B,{type:"primary",onClick:n},{default:t(()=>l[20]||(l[20]=[r("搜索")])),_:1}),e(B,{onClick:f},{default:t(()=>l[21]||(l[21]=[r("重置")])),_:1})]),e(B,{type:"primary",onClick:C},{default:t(()=>l[22]||(l[22]=[r("新增订单")])),_:1})])]),default:t(()=>[c("div",Ve,[e(le,{data:_.value,border:"",style:{width:"100%"},height:"100%"},{default:t(()=>[e(m,{prop:"orderNo",label:"订单编号",width:"180"}),e(m,{prop:"customer",label:"客户名称",width:"180"}),e(m,{prop:"productType",label:"产品类型",width:"120"}),e(m,{prop:"productModel",label:"产品型号",width:"120"}),e(m,{prop:"amount",label:"订单金额",width:"150"},{default:t(({row:i})=>[r(" ¥"+R(L(i.amount)),1)]),_:1}),e(m,{prop:"status",label:"订单状态",width:"100"},{default:t(({row:i})=>[e(W,{type:u(i.status)},{default:t(()=>[r(R(F(i.status)),1)]),_:2},1032,["type"])]),_:1}),e(m,{prop:"createTime",label:"创建时间",width:"180"}),e(m,{prop:"deliveryTime",label:"交付时间",width:"180"}),e(m,{label:"操作",width:"200",fixed:"right"},{default:t(({row:i})=>[e(B,{link:"",type:"primary",onClick:te=>k(i)},{default:t(()=>l[23]||(l[23]=[r("查看")])),_:2},1032,["onClick"]),e(B,{link:"",type:"primary",onClick:te=>v(i)},{default:t(()=>l[24]||(l[24]=[r("编辑")])),_:2},1032,["onClick"]),i.status==="unpaid"?(V(),$(B,{key:0,link:"",type:"danger",onClick:te=>d(i)},{default:t(()=>l[25]||(l[25]=[r("取消")])),_:2},1032,["onClick"])):K("",!0)]),_:1})]),_:1},8,["data"])]),c("div",Se,[e(ae,{"current-page":p.value.page,"onUpdate:currentPage":l[4]||(l[4]=i=>p.value.page=i),"page-size":p.value.pageSize,"onUpdate:pageSize":l[5]||(l[5]=i=>p.value.pageSize=i),total:U.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:I,onCurrentChange:w},null,8,["current-page","page-size","total"])])]),_:1}),e(ie,{modelValue:g.value.order,"onUpdate:modelValue":l[6]||(l[6]=i=>g.value.order=i),order:z.value,onSuccess:M},null,8,["modelValue","order"]),e(fe,{modelValue:g.value.detail,"onUpdate:modelValue":l[7]||(l[7]=i=>g.value.detail=i),order:z.value,onSuccess:M},null,8,["modelValue","order"])])}}});const De=ee(ke,[["__scopeId","data-v-1e286c62"]]);export{De as default};
