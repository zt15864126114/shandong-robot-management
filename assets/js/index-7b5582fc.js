import{d as ae,q as f,M as F,c as Z,b as e,w as a,r as n,o as S,a as l,J as oe,y as le,K as ne,h as p,t as d,F as N,H as se,E as M,_ as re}from"./index-09569aab.js";const de={class:"expense-container"},ue={class:"card-header"},pe={class:"left"},ie={class:"summary-cards"},ce={class:"number down"},me={class:"number down"},_e={class:"number down"},fe={class:"number down"},ve={class:"table-container"},ge={class:"amount-down"},ye={class:"operation-buttons"},he=["onClick"],ke=["onClick"],be=["onClick"],Ce=["onClick"],we=["onClick"],Ve=["onClick"],xe=["onClick"],Te={class:"pagination-container"},Ze={class:"amount-down"},Se={class:"dialog-footer"},ze=ae({__name:"index",setup(Ue){const u=f({page:1,pageSize:10,keyword:"",type:"",dateRange:[]}),b=f([{id:1,code:"ZC202503200001",type:"purchase",purpose:"采购工业机器人核心部件",amount:285600,createTime:"2025-02-20 09:30:00",remark:"用于新产品研发",status:"pending"},{id:2,code:"ZC202503200002",type:"salary",purpose:"研发部门工资",amount:458900,createTime:"2025-02-20 10:15:00",remark:"3月份工资",status:"approved"},{id:3,code:"ZC202503200003",type:"purchase",purpose:"采购传感器模块",amount:156800,createTime:"2025-02-20 11:20:00",remark:"智能控制系统升级",status:"pending"},{id:4,code:"ZC202503200004",type:"other",purpose:"办公设备更新",amount:89500,createTime:"2025-02-20 13:45:00",remark:"更新研发部门设备",status:"completed"},{id:5,code:"ZC202503200005",type:"purchase",purpose:"原材料采购",amount:235600,createTime:"2025-02-20 14:30:00",remark:"生产线原材料补充",status:"pending"},{id:6,code:"ZC202503200006",type:"other",purpose:"研发实验室装修",amount:168e3,createTime:"2025-02-20 15:10:00",remark:"新建机器人测试实验室"},{id:7,code:"ZC202503200007",type:"purchase",purpose:"采购测试设备",amount:198500,createTime:"2025-02-20 15:45:00",remark:"质量检测设备更新"},{id:8,code:"ZC202503200008",type:"salary",purpose:"生产部门工资",amount:386500,createTime:"2025-02-20 16:00:00",remark:"3月份工资"},{id:9,code:"ZC202503200009",type:"purchase",purpose:"采购机器人控制系统",amount:326800,createTime:"2025-02-20 16:15:00",remark:"新一代控制系统升级"},{id:10,code:"ZC202503200010",type:"other",purpose:"员工培训费用",amount:85600,createTime:"2025-02-20 16:30:00",remark:"技术人员专业培训"},{id:11,code:"ZC202503200011",type:"purchase",purpose:"采购伺服电机",amount:178500,createTime:"2025-02-20 16:45:00",remark:"机器人关节驱动系统"},{id:12,code:"ZC202503200012",type:"salary",purpose:"管理部门工资",amount:265e3,createTime:"2025-02-20 17:00:00",remark:"3月份工资"},{id:13,code:"ZC202503200013",type:"other",purpose:"软件系统授权",amount:156e3,createTime:"2025-02-20 17:15:00",remark:"工业软件年度授权"},{id:14,code:"ZC202503200014",type:"purchase",purpose:"采购工业相机",amount:145800,createTime:"2025-02-20 17:30:00",remark:"机器视觉系统升级"}]),j=f(100),C={currentMonth:3137500,lastMonth:2235600,currentYear:8956e3,yearGrowth:15.8},B=s=>({purchase:"采购支出",salary:"工资支出",other:"其他支出"})[s]||"未知",E=()=>{u.value.page=1,z()},z=()=>{console.log("加载支出列表:",u.value)},c=F({form:!1,view:!1}),w=f("add"),R=f({}),r=F({type:"",purpose:"",amount:0,remark:""}),K=F({type:[{required:!0,message:"请选择支出类型",trigger:"change"}],purpose:[{required:!0,message:"请输入支出用途",trigger:"blur"}],amount:[{required:!0,message:"请输入支出金额",trigger:"blur"}]}),U=f(),L=()=>{w.value="add",Object.assign(r,{type:"",purpose:"",amount:0,remark:""}),c.form=!0},O=s=>{w.value="edit",Object.assign(r,{type:s.type,purpose:s.purpose,amount:s.amount,remark:s.remark}),R.value=s,c.form=!0},A=s=>{se.confirm("确定要删除该支出记录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("删除支出:",s),M.success("删除成功")}).catch(()=>{})},G=()=>{z()},Y=()=>{z()},H=async()=>{U.value&&await U.value.validate(s=>{if(s){const V=new Date().toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/\//g,"-");if(w.value==="add"){const y=`ZC${V.replace(/[-: ]/g,"").slice(0,12)}${String(b.value.length+1).padStart(4,"0")}`;b.value.unshift({id:b.value.length+1,code:y,...r,createTime:V,status:"pending"}),M.success("添加成功")}else Object.assign(R.value,r),M.success("修改成功");c.form=!1}})},i=f({}),$=s=>{i.value=s,c.view=!0};return(s,t)=>{const V=n("el-icon"),y=n("el-input"),v=n("el-option"),q=n("el-select"),I=n("el-date-picker"),h=n("el-button"),k=n("el-card"),x=n("el-col"),J=n("el-row"),m=n("el-table-column"),P=n("el-table"),Q=n("el-pagination"),T=n("el-form-item"),W=n("el-input-number"),X=n("el-form"),D=n("el-dialog"),_=n("el-descriptions-item"),ee=n("el-tag"),te=n("el-descriptions");return S(),Z("div",de,[e(k,null,{header:a(()=>[l("div",ue,[l("div",pe,[e(y,{modelValue:u.value.keyword,"onUpdate:modelValue":t[0]||(t[0]=o=>u.value.keyword=o),placeholder:"请输入支出单号/用途",style:{width:"300px"},clearable:"",onKeyup:oe(E,["enter"])},{prefix:a(()=>[e(V,null,{default:a(()=>[e(le(ne))]),_:1})]),_:1},8,["modelValue"]),e(q,{modelValue:u.value.type,"onUpdate:modelValue":t[1]||(t[1]=o=>u.value.type=o),placeholder:"支出类型",clearable:"",style:{width:"120px"}},{default:a(()=>[e(v,{label:"采购支出",value:"purchase"}),e(v,{label:"工资支出",value:"salary"}),e(v,{label:"其他支出",value:"other"})]),_:1},8,["modelValue"]),e(I,{modelValue:u.value.dateRange,"onUpdate:modelValue":t[2]||(t[2]=o=>u.value.dateRange=o),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"240px"}},null,8,["modelValue"]),e(h,{type:"primary",onClick:E},{default:a(()=>t[13]||(t[13]=[p("搜索")])),_:1})]),e(h,{type:"primary",onClick:L},{default:a(()=>t[14]||(t[14]=[p("新增支出")])),_:1})])]),default:a(()=>[l("div",ie,[e(J,{gutter:20},{default:a(()=>[e(x,{span:6},{default:a(()=>[e(k,{shadow:"hover",class:"data-card"},{default:a(()=>[t[15]||(t[15]=l("h3",null,"本月支出",-1)),l("div",ce,"¥"+d(C.currentMonth.toFixed(2)),1)]),_:1})]),_:1}),e(x,{span:6},{default:a(()=>[e(k,{shadow:"hover",class:"data-card"},{default:a(()=>[t[16]||(t[16]=l("h3",null,"上月支出",-1)),l("div",me,"¥"+d(C.lastMonth.toFixed(2)),1)]),_:1})]),_:1}),e(x,{span:6},{default:a(()=>[e(k,{shadow:"hover",class:"data-card"},{default:a(()=>[t[17]||(t[17]=l("h3",null,"本年支出",-1)),l("div",_e,"¥"+d(C.currentYear.toFixed(2)),1)]),_:1})]),_:1}),e(x,{span:6},{default:a(()=>[e(k,{shadow:"hover",class:"data-card"},{default:a(()=>[t[18]||(t[18]=l("h3",null,"同比增长",-1)),l("div",fe,"+"+d(C.yearGrowth.toFixed(1))+"%",1)]),_:1})]),_:1})]),_:1})]),l("div",ve,[e(P,{data:b.value,border:"",style:{width:"100%"},height:"100%"},{default:a(()=>[e(m,{prop:"code",label:"支出单号",width:"180"}),e(m,{prop:"type",label:"支出类型",width:"120"},{default:a(({row:o})=>[p(d(B(o.type)),1)]),_:1}),e(m,{prop:"purpose",label:"支出用途"}),e(m,{prop:"amount",label:"支出金额",width:"120"},{default:a(({row:o})=>[l("span",ge,"¥"+d(o.amount.toFixed(2)),1)]),_:1}),e(m,{prop:"createTime",label:"创建时间",width:"180"}),e(m,{prop:"remark",label:"备注","show-overflow-tooltip":""}),e(m,{label:"操作",width:"180",fixed:"right"},{default:a(({row:o})=>[l("div",ye,[o.status==="pending"?(S(),Z(N,{key:0},[l("a",{onClick:g=>O(o)},"编辑",8,he),l("a",{onClick:g=>s.handleApprove(o)},"审核",8,ke),l("a",{class:"danger",onClick:g=>A(o)},"删除",8,be),l("a",{onClick:g=>$(o)},"查看",8,Ce)],64)):o.status==="approved"?(S(),Z(N,{key:1},[l("a",{class:"success",onClick:g=>s.handleComplete(o)},"确认付款",8,we),l("a",{onClick:g=>$(o)},"查看",8,Ve)],64)):(S(),Z("a",{key:2,onClick:g=>$(o)},"查看",8,xe))])]),_:1})]),_:1},8,["data"])]),l("div",Te,[e(Q,{"current-page":u.value.page,"onUpdate:currentPage":t[3]||(t[3]=o=>u.value.page=o),"page-size":u.value.pageSize,"onUpdate:pageSize":t[4]||(t[4]=o=>u.value.pageSize=o),total:j.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:G,onCurrentChange:Y},null,8,["current-page","page-size","total"])])]),_:1}),e(D,{modelValue:c.form,"onUpdate:modelValue":t[10]||(t[10]=o=>c.form=o),title:w.value==="add"?"新增支出":"编辑支出",width:"600px"},{footer:a(()=>[e(h,{onClick:t[9]||(t[9]=o=>c.form=!1)},{default:a(()=>t[19]||(t[19]=[p("取消")])),_:1}),e(h,{type:"primary",onClick:H},{default:a(()=>t[20]||(t[20]=[p("确定")])),_:1})]),default:a(()=>[e(X,{ref_key:"formRef",ref:U,model:r,rules:K,"label-width":"100px"},{default:a(()=>[e(T,{label:"支出类型",prop:"type"},{default:a(()=>[e(q,{modelValue:r.type,"onUpdate:modelValue":t[5]||(t[5]=o=>r.type=o),placeholder:"请选择支出类型",style:{width:"100%"}},{default:a(()=>[e(v,{label:"采购支出",value:"purchase"}),e(v,{label:"工资支出",value:"salary"}),e(v,{label:"其他支出",value:"other"})]),_:1},8,["modelValue"])]),_:1}),e(T,{label:"支出用途",prop:"purpose"},{default:a(()=>[e(y,{modelValue:r.purpose,"onUpdate:modelValue":t[6]||(t[6]=o=>r.purpose=o),placeholder:"请输入支出用途"},null,8,["modelValue"])]),_:1}),e(T,{label:"支出金额",prop:"amount"},{default:a(()=>[e(W,{modelValue:r.amount,"onUpdate:modelValue":t[7]||(t[7]=o=>r.amount=o),precision:2,step:100,min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(T,{label:"备注",prop:"remark"},{default:a(()=>[e(y,{modelValue:r.remark,"onUpdate:modelValue":t[8]||(t[8]=o=>r.remark=o),type:"textarea",rows:3,placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),e(D,{modelValue:c.view,"onUpdate:modelValue":t[12]||(t[12]=o=>c.view=o),title:"支出详情",width:"600px"},{footer:a(()=>[l("span",Se,[e(h,{onClick:t[11]||(t[11]=o=>c.view=!1)},{default:a(()=>t[21]||(t[21]=[p("关闭")])),_:1})])]),default:a(()=>[e(te,{column:2,border:""},{default:a(()=>[e(_,{label:"支出单号"},{default:a(()=>[p(d(i.value.code),1)]),_:1}),e(_,{label:"支出类型"},{default:a(()=>[p(d(B(i.value.type)),1)]),_:1}),e(_,{label:"支出用途"},{default:a(()=>[p(d(i.value.purpose),1)]),_:1}),e(_,{label:"支出金额"},{default:a(()=>{var o;return[l("span",Ze,"¥"+d((o=i.value.amount)==null?void 0:o.toFixed(2)),1)]}),_:1}),e(_,{label:"创建时间"},{default:a(()=>[p(d(i.value.createTime),1)]),_:1}),e(_,{label:"状态"},{default:a(()=>[e(ee,{type:i.value.status==="pending"?"warning":i.value.status==="approved"?"primary":"success"},{default:a(()=>[p(d(i.value.status==="pending"?"待处理":i.value.status==="approved"?"已审核":"已完成"),1)]),_:1},8,["type"])]),_:1}),e(_,{label:"备注",span:2},{default:a(()=>[p(d(i.value.remark),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});const Fe=re(ze,[["__scopeId","data-v-4757fd3e"]]);export{Fe as default};
