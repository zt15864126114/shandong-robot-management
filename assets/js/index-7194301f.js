import{d as se,q as h,M as U,c as g,b as e,w as l,r as a,o as _,a as n,J as ae,y as ne,K as ie,h as c,t as u,G as B,F as M,e as O,f as de,H as ue,E as $,_ as re}from"./index-10dc1f41.js";const ce={class:"service-container"},pe={class:"card-header"},me={class:"left"},_e={class:"summary-cards"},ge={class:"number warning"},ve={class:"number primary"},fe={class:"number success"},ye={class:"number info"},be={class:"table-container"},he={class:"operation-buttons"},we=["onClick"],Ve=["onClick"],xe=["onClick"],ke={class:"pagination-container"},Ne={key:0},Ce={class:"time"},Te={class:"content"},De={key:1},Se=se({__name:"index",setup(Ge){const p=h({page:1,pageSize:10,keyword:"",status:"",type:""}),k=h([{id:1,code:"GD202503200001",customer:"山东临工工程机械有限公司",type:"complaint",status:"pending",title:"机械臂响应延迟问题",createTime:"2025-02-20 09:30:00"},{id:2,code:"GD202503200002",customer:"青岛海尔生物医疗股份有限公司",type:"consult",status:"processing",title:"新产品技术咨询",createTime:"2025-02-20 10:15:00"},{id:3,code:"GD202503200003",customer:"山东新华医疗器械股份有限公司",type:"suggestion",status:"completed",title:"产品功能优化建议",createTime:"2025-02-20 11:20:00"},{id:4,code:"GD202503200004",customer:"浪潮电子信息产业股份有限公司",type:"complaint",status:"processing",title:"系统稳定性问题",createTime:"2025-02-20 13:45:00"},{id:5,code:"GD202503200005",customer:"中通客车控股股份有限公司",type:"consult",status:"pending",title:"产品升级咨询",createTime:"2025-02-20 14:30:00"},{id:6,code:"GD202503200006",customer:"山东魏桥创业集团有限公司",type:"complaint",status:"completed",title:"设备运行噪音问题",createTime:"2025-02-20 15:10:00",processNotes:[{time:"2025-02-20 15:10:00",content:"客户反馈设备运行时噪音较大"},{time:"2025-02-20 16:20:00",content:"技术人员现场检查，更换了减震部件"},{time:"2025-02-20 17:30:00",content:"问题已解决，客户确认验收"}]},{id:7,code:"GD202503200007",customer:"山东晨鸣纸业集团股份有限公司",type:"suggestion",status:"processing",title:"自动化流程优化建议",createTime:"2025-02-20 15:45:00",processNotes:[{time:"2025-02-20 15:45:00",content:"客户建议优化生产线自动化流程"},{time:"2025-02-20 16:30:00",content:"技术团队评估可行性，制定优化方案"}]},{id:8,code:"GD202503200008",customer:"山东东宏管业股份有限公司",type:"consult",status:"closed",title:"产品升级方案咨询",createTime:"2025-02-20 16:00:00",processNotes:[{time:"2025-02-20 16:00:00",content:"客户咨询现有设备升级方案"},{time:"2025-02-20 16:45:00",content:"因客户预算调整，暂时关闭工单"}]},{id:9,code:"GD202503200009",customer:"山东临工工程机械有限公司",type:"complaint",status:"processing",title:"控制系统偶发性故障",createTime:"2025-02-20 16:15:00",processNotes:[{time:"2025-02-20 16:15:00",content:"客户反馈控制系统偶发性无响应"},{time:"2025-02-20 17:00:00",content:"远程诊断中，疑似软件版本问题"}]},{id:10,code:"GD202503200010",customer:"青岛海尔生物医疗股份有限公司",type:"suggestion",status:"pending",title:"人机交互界面优化建议",createTime:"2025-02-20 16:30:00"},{id:11,code:"GD202503200011",customer:"浪潮电子信息产业股份有限公司",type:"consult",status:"completed",title:"系统集成方案咨询",createTime:"2025-02-20 16:45:00",processNotes:[{time:"2025-02-20 16:45:00",content:"客户咨询系统集成解决方案"},{time:"2025-02-20 17:15:00",content:"提供详细的技术方案和报价"},{time:"2025-02-20 17:45:00",content:"客户确认方案可行，工单结束"}]},{id:12,code:"GD202503200012",customer:"中通客车控股股份有限公司",type:"complaint",status:"pending",title:"设备通信异常报警",createTime:"2025-02-20 17:00:00"}]),R=h(100),N={pending:18,processing:32,completed:168,closed:45},j=[{name:"山东临工工程机械有限公司"},{name:"青岛海尔生物医疗股份有限公司"},{name:"山东新华医疗器械股份有限公司"},{name:"浪潮电子信息产业股份有限公司"},{name:"中通客车控股股份有限公司"}],m=U({form:!1,view:!1}),v=h("add"),i=h(null),d=U({customer:"",type:"",title:"",processNote:""}),F=U({customer:[{required:!0,message:"请选择客户",trigger:"change"}],type:[{required:!0,message:"请选择服务类型",trigger:"change"}],title:[{required:!0,message:"请输入工单标题",trigger:"blur"}],processNote:[{required:!0,message:"请输入处理记录",trigger:"blur"}]}),G=h(),q=s=>({consult:"咨询",complaint:"投诉",suggestion:"建议",other:"其他"})[s]||"未知",P=s=>({pending:"warning",processing:"primary",completed:"success",closed:"info"})[s]||"info",E=s=>({pending:"待处理",processing:"处理中",completed:"已完成",closed:"已关闭"})[s]||"未知",L=()=>{p.value.page=1,z()},z=()=>{console.log("加载服务列表:",p.value)},A=()=>{v.value="add",Object.assign(d,{customer:"",type:"",title:"",processNote:""}),m.form=!0},H=s=>{v.value="process",Object.assign(d,{customer:s.customer,type:s.type,title:s.title,processNote:""}),i.value=s,m.form=!0},I=s=>{i.value=s,m.view=!0},J=s=>{ue.confirm("确定要关闭该工单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("关闭工单:",s),$.success("关闭成功")}).catch(()=>{})},Q=()=>{z()},W=()=>{z()},X=async()=>{G.value&&await G.value.validate(s=>{if(s){const b=new Date().toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/\//g,"-");if(v.value==="add"){const w=`GD${b.replace(/[-: ]/g,"").slice(0,12)}${String(k.value.length+1).padStart(4,"0")}`;k.value.unshift({id:k.value.length+1,code:w,customer:d.customer,type:d.type,status:"pending",title:d.title,createTime:b,processNotes:[{time:b,content:d.processNote}]}),$.success("工单创建成功")}else i.value&&(i.value.status="processing",i.value.processNotes||(i.value.processNotes=[]),i.value.processNotes.push({time:b,content:d.processNote})),$.success("处理成功");m.form=!1}})};return(s,t)=>{const b=a("el-icon"),w=a("el-input"),r=a("el-option"),C=a("el-select"),V=a("el-button"),x=a("el-card"),T=a("el-col"),Y=a("el-row"),f=a("el-table-column"),Z=a("el-tag"),ee=a("el-table"),te=a("el-pagination"),D=a("el-form-item"),le=a("el-form"),K=a("el-dialog"),y=a("el-descriptions-item"),oe=a("el-descriptions");return _(),g("div",ce,[e(x,null,{header:l(()=>[n("div",pe,[n("div",me,[e(w,{modelValue:p.value.keyword,"onUpdate:modelValue":t[0]||(t[0]=o=>p.value.keyword=o),placeholder:"请输入工单号/客户名称",style:{width:"300px"},clearable:"",onKeyup:ae(L,["enter"])},{prefix:l(()=>[e(b,null,{default:l(()=>[e(ne(ie))]),_:1})]),_:1},8,["modelValue"]),e(C,{modelValue:p.value.status,"onUpdate:modelValue":t[1]||(t[1]=o=>p.value.status=o),placeholder:"工单状态",clearable:"",style:{width:"120px"}},{default:l(()=>[e(r,{label:"待处理",value:"pending"}),e(r,{label:"处理中",value:"processing"}),e(r,{label:"已完成",value:"completed"}),e(r,{label:"已关闭",value:"closed"})]),_:1},8,["modelValue"]),e(C,{modelValue:p.value.type,"onUpdate:modelValue":t[2]||(t[2]=o=>p.value.type=o),placeholder:"服务类型",clearable:"",style:{width:"120px"}},{default:l(()=>[e(r,{label:"咨询",value:"consult"}),e(r,{label:"投诉",value:"complaint"}),e(r,{label:"建议",value:"suggestion"}),e(r,{label:"其他",value:"other"})]),_:1},8,["modelValue"]),e(V,{type:"primary",onClick:L},{default:l(()=>t[13]||(t[13]=[c("搜索")])),_:1})]),e(V,{type:"primary",onClick:A},{default:l(()=>t[14]||(t[14]=[c("新增工单")])),_:1})])]),default:l(()=>[n("div",_e,[e(Y,{gutter:20},{default:l(()=>[e(T,{span:6},{default:l(()=>[e(x,{shadow:"hover",class:"data-card"},{default:l(()=>[t[15]||(t[15]=n("h3",null,"待处理",-1)),n("div",ge,u(N.pending),1)]),_:1})]),_:1}),e(T,{span:6},{default:l(()=>[e(x,{shadow:"hover",class:"data-card"},{default:l(()=>[t[16]||(t[16]=n("h3",null,"处理中",-1)),n("div",ve,u(N.processing),1)]),_:1})]),_:1}),e(T,{span:6},{default:l(()=>[e(x,{shadow:"hover",class:"data-card"},{default:l(()=>[t[17]||(t[17]=n("h3",null,"已完成",-1)),n("div",fe,u(N.completed),1)]),_:1})]),_:1}),e(T,{span:6},{default:l(()=>[e(x,{shadow:"hover",class:"data-card"},{default:l(()=>[t[18]||(t[18]=n("h3",null,"已关闭",-1)),n("div",ye,u(N.closed),1)]),_:1})]),_:1})]),_:1})]),n("div",be,[e(ee,{data:k.value,border:"",style:{width:"100%"},height:"100%"},{default:l(()=>[e(f,{prop:"code",label:"工单号",width:"180"}),e(f,{prop:"customer",label:"客户名称"}),e(f,{prop:"type",label:"服务类型",width:"100"},{default:l(({row:o})=>[c(u(q(o.type)),1)]),_:1}),e(f,{prop:"status",label:"状态",width:"100"},{default:l(({row:o})=>[e(Z,{type:P(o.status)},{default:l(()=>[c(u(E(o.status)),1)]),_:2},1032,["type"])]),_:1}),e(f,{prop:"title",label:"标题","show-overflow-tooltip":""}),e(f,{prop:"createTime",label:"创建时间",width:"180"}),e(f,{label:"操作",width:"180",fixed:"right"},{default:l(({row:o})=>[n("div",he,[o.status!=="completed"&&o.status!=="closed"?(_(),g("a",{key:0,onClick:S=>H(o)}," 处理 ",8,we)):B("",!0),n("a",{onClick:S=>I(o)},"查看",8,Ve),o.status==="pending"?(_(),g("a",{key:1,class:"danger",onClick:S=>J(o)}," 关闭 ",8,xe)):B("",!0)])]),_:1})]),_:1},8,["data"])]),n("div",ke,[e(te,{"current-page":p.value.page,"onUpdate:currentPage":t[3]||(t[3]=o=>p.value.page=o),"page-size":p.value.pageSize,"onUpdate:pageSize":t[4]||(t[4]=o=>p.value.pageSize=o),total:R.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:Q,onCurrentChange:W},null,8,["current-page","page-size","total"])])]),_:1}),e(K,{modelValue:m.form,"onUpdate:modelValue":t[10]||(t[10]=o=>m.form=o),title:v.value==="add"?"新增工单":"处理工单",width:"600px"},{footer:l(()=>[e(V,{text:"",onClick:t[9]||(t[9]=o=>m.form=!1)},{default:l(()=>t[19]||(t[19]=[c("取消")])),_:1}),e(V,{text:"",type:"primary",onClick:X},{default:l(()=>t[20]||(t[20]=[c("确定")])),_:1})]),default:l(()=>[e(le,{ref_key:"formRef",ref:G,model:d,rules:F,"label-width":"100px"},{default:l(()=>[e(D,{label:"客户名称",prop:"customer"},{default:l(()=>[e(C,{modelValue:d.customer,"onUpdate:modelValue":t[5]||(t[5]=o=>d.customer=o),placeholder:"请选择客户",style:{width:"100%"},disabled:v.value==="process"},{default:l(()=>[(_(),g(M,null,O(j,o=>e(r,{key:o.name,label:o.name,value:o.name},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled"])]),_:1}),e(D,{label:"服务类型",prop:"type"},{default:l(()=>[e(C,{modelValue:d.type,"onUpdate:modelValue":t[6]||(t[6]=o=>d.type=o),placeholder:"请选择服务类型",style:{width:"100%"},disabled:v.value==="process"},{default:l(()=>[e(r,{label:"咨询",value:"consult"}),e(r,{label:"投诉",value:"complaint"}),e(r,{label:"建议",value:"suggestion"}),e(r,{label:"其他",value:"other"})]),_:1},8,["modelValue","disabled"])]),_:1}),e(D,{label:"工单标题",prop:"title"},{default:l(()=>[e(w,{modelValue:d.title,"onUpdate:modelValue":t[7]||(t[7]=o=>d.title=o),placeholder:"请输入工单标题",disabled:v.value==="process"},null,8,["modelValue","disabled"])]),_:1}),e(D,{label:"处理记录",prop:"processNote"},{default:l(()=>[e(w,{modelValue:d.processNote,"onUpdate:modelValue":t[8]||(t[8]=o=>d.processNote=o),type:"textarea",rows:4,placeholder:"请输入处理记录"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),e(K,{modelValue:m.view,"onUpdate:modelValue":t[12]||(t[12]=o=>m.view=o),title:"工单详情",width:"600px"},{footer:l(()=>[e(V,{text:"",onClick:t[11]||(t[11]=o=>m.view=!1)},{default:l(()=>t[21]||(t[21]=[c("关闭")])),_:1})]),default:l(()=>[i.value?(_(),de(oe,{key:0,column:2,border:""},{default:l(()=>[e(y,{label:"工单号"},{default:l(()=>[c(u(i.value.code),1)]),_:1}),e(y,{label:"客户名称"},{default:l(()=>[c(u(i.value.customer),1)]),_:1}),e(y,{label:"服务类型"},{default:l(()=>[c(u(q(i.value.type)),1)]),_:1}),e(y,{label:"状态"},{default:l(()=>[c(u(E(i.value.status)),1)]),_:1}),e(y,{label:"工单标题",span:2},{default:l(()=>[c(u(i.value.title),1)]),_:1}),e(y,{label:"创建时间",span:2},{default:l(()=>[c(u(i.value.createTime),1)]),_:1}),e(y,{label:"处理记录",span:2},{default:l(()=>[i.value.processNotes?(_(),g("div",Ne,[(_(!0),g(M,null,O(i.value.processNotes,(o,S)=>(_(),g("div",{key:S,class:"process-note"},[n("div",Ce,u(o.time),1),n("div",Te,u(o.content),1)]))),128))])):(_(),g("div",De,"暂无处理记录"))]),_:1})]),_:1})):B("",!0)]),_:1},8,["modelValue"])])}}});const Ue=re(Se,[["__scopeId","data-v-f7b4a77f"]]);export{Ue as default};
