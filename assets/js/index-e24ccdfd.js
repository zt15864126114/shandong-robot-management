import{d as de,q as v,M as V,c as C,b as t,w as a,u as ue,r as n,N as re,o as k,a as u,J as ie,y as A,K as F,h as l,t as d,O as me,f as pe,G as $,H as ce,E as q,_ as fe}from"./index-7231d2c2.js";const _e={class:"payment-container"},ye={class:"card-header"},ve={class:"left"},ge={class:"right"},be={class:"summary-cards"},he={class:"number primary"},Te={class:"number warning"},we={class:"number success"},ke={class:"number info"},Re={class:"table-container"},Ne={class:"operation-buttons"},xe=["onClick"],Ve=["onClick"],Ce=["onClick"],Ie={class:"pagination-container"},Me=de({__name:"index",setup(Xe){const i=v({page:1,pageSize:10,keyword:"",paymentMethod:"",status:""}),h=v({todayAmount:28650,pendingCount:15,monthAmount:856420,refundAmount:12580}),E=v([{id:1,orderNo:"ORD202503010001",transactionNo:"TRX202503010001",amount:12800,paymentMethod:"alipay",status:"success",createTime:"2025-03-01 10:30:00",payTime:"2025-03-01 10:31:00",goodsInfo:"工业机器人 XR-2000",buyerInfo:"山东科技职业学院",remark:"正常支付"},{id:2,orderNo:"ORD202503010002",transactionNo:"TRX202503010002",amount:25600,paymentMethod:"wechat",status:"pending",createTime:"2025-03-01 14:20:00",payTime:"",goodsInfo:"智能生产线设备",buyerInfo:"济南智能制造有限公司",remark:"等待支付"},{id:3,orderNo:"ORD202503010003",transactionNo:"TRX202503010003",amount:15800,paymentMethod:"bank",status:"success",createTime:"2025-03-01 16:45:00",payTime:"2025-03-01 16:46:00",goodsInfo:"机器人配件套装",buyerInfo:"青岛医疗设备有限公司",remark:"正常支付"},{id:4,orderNo:"ORD202503010004",transactionNo:"TRX202503010004",amount:9800,paymentMethod:"alipay",status:"refunded",createTime:"2025-02-28 09:15:00",payTime:"2025-02-28 09:16:00",goodsInfo:"工业机器人 XR-1000",buyerInfo:"烟台自动化科技有限公司",remark:"客户要求退款"},{id:5,orderNo:"ORD202503010005",transactionNo:"TRX202503010005",amount:35600,paymentMethod:"wechat",status:"success",createTime:"2025-03-01 09:30:00",payTime:"2025-03-01 09:31:00",goodsInfo:"智能仓储系统",buyerInfo:"潍坊机器人研究院",remark:"正常支付"},{id:6,orderNo:"ORD202503010006",transactionNo:"TRX202503010006",amount:12800,paymentMethod:"bank",status:"failed",createTime:"2025-03-01 11:20:00",payTime:"",goodsInfo:"工业机器人 XR-3000",buyerInfo:"淄博智能装备有限公司",remark:"支付超时"},{id:7,orderNo:"ORD202503010007",transactionNo:"TRX202503010007",amount:8900,paymentMethod:"alipay",status:"success",createTime:"2025-03-01 15:40:00",payTime:"2025-03-01 15:41:00",goodsInfo:"机器人控制系统",buyerInfo:"临沂工业自动化有限公司",remark:"正常支付"},{id:8,orderNo:"ORD202503010008",transactionNo:"TRX202503010008",amount:15600,paymentMethod:"wechat",status:"pending",createTime:"2025-03-01 17:30:00",payTime:"",goodsInfo:"智能检测设备",buyerInfo:"济宁智能制造产业园",remark:"等待支付"},{id:9,orderNo:"ORD202503010009",transactionNo:"TRX202503010009",amount:23800,paymentMethod:"bank",status:"success",createTime:"2025-03-01 13:15:00",payTime:"2025-03-01 13:16:00",goodsInfo:"工业机器人 XR-4000",buyerInfo:"泰安自动化科技有限公司",remark:"正常支付"},{id:10,orderNo:"ORD202503010010",transactionNo:"TRX202503010010",amount:16800,paymentMethod:"alipay",status:"refunded",createTime:"2025-02-28 16:20:00",payTime:"2025-02-28 16:21:00",goodsInfo:"机器人维护服务",buyerInfo:"威海智能装备有限公司",remark:"服务未完成退款"}]),P=v(100),R=v(!1),c=V({view:!1,refund:!1}),r=v(null),f=V({amount:0,reason:""}),K=V({amount:[{required:!0,message:"请输入退款金额",trigger:"blur"}],reason:[{required:!0,message:"请输入退款原因",trigger:"blur"}]}),N=v(),L=ue(),I=s=>({alipay:"success",wechat:"primary",bank:"warning"})[s]||"info",M=s=>({alipay:"支付宝",wechat:"微信支付",bank:"银行卡"})[s]||"未知",X=s=>({pending:"warning",success:"success",failed:"danger",refunded:"info"})[s]||"",D=s=>({pending:"待支付",success:"支付成功",failed:"支付失败",refunded:"已退款"})[s]||"未知",O=()=>{i.value.page=1,x()},x=()=>{R.value=!0,setTimeout(()=>{R.value=!1},500)},G=s=>{r.value=s,c.view=!0},H=s=>{ce.confirm("确定要取消该支付订单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("取消支付:",s),q.success("取消成功")}).catch(()=>{})},J=s=>{r.value=s,f.amount=s.amount,f.reason="",c.refund=!0},j=async()=>{N.value&&await N.value.validate(s=>{s&&(console.log("退款信息:",f),q.success("退款申请已提交"),c.refund=!1)})},Q=()=>{x()},W=()=>{x()},Y=()=>{L.push("/finance/payment/config")};return(s,o)=>{const Z=n("el-icon"),S=n("el-input"),y=n("el-option"),z=n("el-select"),g=n("el-button"),b=n("el-card"),T=n("el-col"),ee=n("el-row"),_=n("el-table-column"),w=n("el-tag"),te=n("el-table"),ae=n("el-pagination"),m=n("el-descriptions-item"),oe=n("el-descriptions"),U=n("el-dialog"),ne=n("el-input-number"),B=n("el-form-item"),le=n("el-form"),se=re("loading");return k(),C("div",_e,[t(b,null,{header:a(()=>[u("div",ye,[u("div",ve,[t(S,{modelValue:i.value.keyword,"onUpdate:modelValue":o[0]||(o[0]=e=>i.value.keyword=e),placeholder:"请输入订单号/交易号",style:{width:"300px"},clearable:"",onKeyup:ie(O,["enter"])},{prefix:a(()=>[t(Z,null,{default:a(()=>[t(A(F))]),_:1})]),_:1},8,["modelValue"]),t(z,{modelValue:i.value.paymentMethod,"onUpdate:modelValue":o[1]||(o[1]=e=>i.value.paymentMethod=e),placeholder:"支付方式",clearable:"",style:{width:"120px"}},{default:a(()=>[t(y,{label:"支付宝",value:"alipay"}),t(y,{label:"微信支付",value:"wechat"}),t(y,{label:"银行卡",value:"bank"})]),_:1},8,["modelValue"]),t(z,{modelValue:i.value.status,"onUpdate:modelValue":o[2]||(o[2]=e=>i.value.status=e),placeholder:"支付状态",clearable:"",style:{width:"120px"}},{default:a(()=>[t(y,{label:"待支付",value:"pending"}),t(y,{label:"支付成功",value:"success"}),t(y,{label:"支付失败",value:"failed"}),t(y,{label:"已退款",value:"refunded"})]),_:1},8,["modelValue"]),t(g,{type:"primary",icon:A(F),onClick:O},{default:a(()=>o[11]||(o[11]=[l("搜索")])),_:1},8,["icon"])]),u("div",ge,[t(g,{type:"primary",onClick:Y},{default:a(()=>o[12]||(o[12]=[l("支付配置")])),_:1})])])]),default:a(()=>[u("div",be,[t(ee,{gutter:20},{default:a(()=>[t(T,{span:6},{default:a(()=>[t(b,{shadow:"hover",class:"data-card"},{default:a(()=>[o[13]||(o[13]=u("h3",null,"今日支付金额",-1)),u("div",he,"¥"+d(h.value.todayAmount),1)]),_:1})]),_:1}),t(T,{span:6},{default:a(()=>[t(b,{shadow:"hover",class:"data-card"},{default:a(()=>[o[14]||(o[14]=u("h3",null,"待支付订单",-1)),u("div",Te,d(h.value.pendingCount),1)]),_:1})]),_:1}),t(T,{span:6},{default:a(()=>[t(b,{shadow:"hover",class:"data-card"},{default:a(()=>[o[15]||(o[15]=u("h3",null,"本月支付金额",-1)),u("div",we,"¥"+d(h.value.monthAmount),1)]),_:1})]),_:1}),t(T,{span:6},{default:a(()=>[t(b,{shadow:"hover",class:"data-card"},{default:a(()=>[o[16]||(o[16]=u("h3",null,"退款金额",-1)),u("div",ke,"¥"+d(h.value.refundAmount),1)]),_:1})]),_:1})]),_:1})]),u("div",Re,[me((k(),pe(te,{data:E.value,border:"",style:{width:"100%"},height:"100%"},{default:a(()=>[t(_,{prop:"orderNo",label:"订单号","min-width":"180"}),t(_,{prop:"transactionNo",label:"交易号","min-width":"180"}),t(_,{prop:"amount",label:"支付金额",width:"120"},{default:a(({row:e})=>[l(" ¥"+d(e.amount.toFixed(2)),1)]),_:1}),t(_,{prop:"paymentMethod",label:"支付方式",width:"120"},{default:a(({row:e})=>[t(w,{type:I(e.paymentMethod)},{default:a(()=>[l(d(M(e.paymentMethod)),1)]),_:2},1032,["type"])]),_:1}),t(_,{prop:"status",label:"支付状态",width:"100"},{default:a(({row:e})=>[t(w,{type:X(e.status)},{default:a(()=>[l(d(D(e.status)),1)]),_:2},1032,["type"])]),_:1}),t(_,{prop:"createTime",label:"创建时间",width:"180"}),t(_,{prop:"payTime",label:"支付时间",width:"180"}),t(_,{label:"操作",width:"180",fixed:"right"},{default:a(({row:e})=>[u("div",Ne,[u("a",{onClick:p=>G(e)},"查看",8,xe),e.status==="pending"?(k(),C("a",{key:0,onClick:p=>H(e)},"取消",8,Ve)):$("",!0),e.status==="success"?(k(),C("a",{key:1,onClick:p=>J(e)},"退款",8,Ce)):$("",!0)])]),_:1})]),_:1},8,["data"])),[[se,R.value]])]),u("div",Ie,[t(ae,{"current-page":i.value.page,"onUpdate:currentPage":o[3]||(o[3]=e=>i.value.page=e),"page-size":i.value.pageSize,"onUpdate:pageSize":o[4]||(o[4]=e=>i.value.pageSize=e),total:P.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:Q,onCurrentChange:W},null,8,["current-page","page-size","total"])])]),_:1}),t(U,{modelValue:c.view,"onUpdate:modelValue":o[6]||(o[6]=e=>c.view=e),title:"支付详情",width:"600px","close-on-click-modal":!1},{footer:a(()=>[t(g,{onClick:o[5]||(o[5]=e=>c.view=!1)},{default:a(()=>o[17]||(o[17]=[l("关闭")])),_:1})]),default:a(()=>[t(oe,{column:1,border:""},{default:a(()=>[t(m,{label:"订单号"},{default:a(()=>{var e;return[l(d((e=r.value)==null?void 0:e.orderNo),1)]}),_:1}),t(m,{label:"交易号"},{default:a(()=>{var e;return[l(d((e=r.value)==null?void 0:e.transactionNo),1)]}),_:1}),t(m,{label:"支付金额"},{default:a(()=>{var e;return[l("¥"+d((e=r.value)==null?void 0:e.amount.toFixed(2)),1)]}),_:1}),t(m,{label:"支付方式"},{default:a(()=>{var e;return[t(w,{type:I((e=r.value)==null?void 0:e.paymentMethod)},{default:a(()=>{var p;return[l(d(M((p=r.value)==null?void 0:p.paymentMethod)),1)]}),_:1},8,["type"])]}),_:1}),t(m,{label:"支付状态"},{default:a(()=>{var e;return[t(w,{type:X((e=r.value)==null?void 0:e.status)},{default:a(()=>{var p;return[l(d(D((p=r.value)==null?void 0:p.status)),1)]}),_:1},8,["type"])]}),_:1}),t(m,{label:"创建时间"},{default:a(()=>{var e;return[l(d((e=r.value)==null?void 0:e.createTime),1)]}),_:1}),t(m,{label:"支付时间"},{default:a(()=>{var e;return[l(d((e=r.value)==null?void 0:e.payTime),1)]}),_:1}),t(m,{label:"商品信息"},{default:a(()=>{var e;return[l(d((e=r.value)==null?void 0:e.goodsInfo),1)]}),_:1}),t(m,{label:"买家信息"},{default:a(()=>{var e;return[l(d((e=r.value)==null?void 0:e.buyerInfo),1)]}),_:1}),t(m,{label:"备注"},{default:a(()=>{var e;return[l(d((e=r.value)==null?void 0:e.remark),1)]}),_:1})]),_:1})]),_:1},8,["modelValue"]),t(U,{modelValue:c.refund,"onUpdate:modelValue":o[10]||(o[10]=e=>c.refund=e),title:"退款确认",width:"500px"},{footer:a(()=>[t(g,{onClick:o[9]||(o[9]=e=>c.refund=!1)},{default:a(()=>o[18]||(o[18]=[l("取消")])),_:1}),t(g,{type:"primary",onClick:j},{default:a(()=>o[19]||(o[19]=[l("确定")])),_:1})]),default:a(()=>[t(le,{ref_key:"refundFormRef",ref:N,model:f,rules:K,"label-width":"100px"},{default:a(()=>[t(B,{label:"退款金额",prop:"amount"},{default:a(()=>{var e;return[t(ne,{modelValue:f.amount,"onUpdate:modelValue":o[7]||(o[7]=p=>f.amount=p),min:0,max:(e=r.value)==null?void 0:e.amount,precision:2,style:{width:"100%"}},null,8,["modelValue","max"])]}),_:1}),t(B,{label:"退款原因",prop:"reason"},{default:a(()=>[t(S,{modelValue:f.reason,"onUpdate:modelValue":o[8]||(o[8]=e=>f.reason=e),type:"textarea",rows:3,placeholder:"请输入退款原因"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}});const Oe=fe(Me,[["__scopeId","data-v-1ad2d601"]]);export{Oe as default};
