import{d as P,r as c,H as C,c as J,b as t,w as o,f as l,g as Q,e as r,B as W,u as X,C as Z,i,t as _,n as ee,z as te,E as T,_ as oe}from"./index-e75d186a.js";const ae={class:"income-container"},le={class:"card-header"},re={class:"left"},ne={class:"summary-cards"},de={class:"number"},se={class:"number"},ue={class:"number"},ie={class:"number up"},pe={class:"table-container"},me={class:ee({"amount-up":!0})},ce={class:"pagination-container"},_e=P({__name:"index",setup(fe){const d=c({page:1,pageSize:10,keyword:"",type:"",dateRange:[]}),y=c([{id:1,code:"SR202403200001",type:"order",source:"山东临工工程机械有限公司",amount:586e3,createTime:"2025-02-20 09:30:00",remark:"工业机器人系统采购"},{id:2,code:"SR202403200002",type:"order",source:"青岛海尔生物医疗股份有限公司",amount:468e3,createTime:"2025-02-20 10:15:00",remark:"医疗机器人定制开发"},{id:3,code:"SR202403200003",type:"order",source:"山东新华医疗器械股份有限公司",amount:385e3,createTime:"2025-02-20 11:20:00",remark:"手术辅助机器人系统"},{id:4,code:"SR202403200004",type:"other",source:"技术服务收入",amount:156e3,createTime:"2025-02-20 13:45:00",remark:"系统维护服务费"},{id:5,code:"SR202403200005",type:"order",source:"浪潮电子信息产业股份有限公司",amount:658e3,createTime:"2025-02-20 14:30:00",remark:"智能制造系统集成"},{id:6,code:"SR202403200006",type:"order",source:"中通客车控股股份有限公司",amount:528e3,createTime:"2025-02-20 15:10:00",remark:"自动化生产线升级"},{id:7,code:"SR202403200007",type:"other",source:"配件销售收入",amount:168e3,createTime:"2025-02-20 15:45:00",remark:"机器人核心部件销售"},{id:8,code:"SR202403200008",type:"order",source:"山东魏桥创业集团有限公司",amount:785e3,createTime:"2025-02-20 16:00:00",remark:"智能仓储系统项目"},{id:9,code:"SR202403200009",type:"order",source:"山东晨鸣纸业集团股份有限公司",amount:496e3,createTime:"2025-02-20 16:30:00",remark:"自动化包装系统"},{id:10,code:"SR202403200010",type:"other",source:"培训服务收入",amount:128e3,createTime:"2025-02-20 17:00:00",remark:"操作技术培训服务"}]),B=c(100),v={currentMonth:4358e3,lastMonth:3685e3,currentYear:12568e3,yearGrowth:18.6},M=s=>({order:"订单收入",other:"其他收入"})[s]||"未知",R=()=>{d.value.page=1,V()},V=()=>{console.log("加载收入列表:",d.value)},p=C({form:!1}),h=c("add"),z=c({}),n=C({type:"",source:"",amount:0,remark:""}),E=C({type:[{required:!0,message:"请选择收入类型",trigger:"change"}],source:[{required:!0,message:"请输入收入来源",trigger:"blur"}],amount:[{required:!0,message:"请输入收入金额",trigger:"blur"}]}),S=c(),F=()=>{h.value="add",Object.assign(n,{type:"",source:"",amount:0,remark:""}),p.form=!0},$=s=>{h.value="edit",Object.assign(n,{type:s.type,source:s.source,amount:s.amount,remark:s.remark}),z.value=s,p.form=!0},q=s=>{te.confirm("确定要删除该收入记录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("删除收入:",s),T.success("删除成功")}).catch(()=>{})},N=()=>{V()},j=()=>{V()},D=async()=>{S.value&&await S.value.validate(s=>{if(s){const b=new Date().toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/\//g,"-");if(h.value==="add"){const f=`SR${b.replace(/[-: ]/g,"").slice(0,12)}${String(y.value.length+1).padStart(4,"0")}`;y.value.unshift({id:y.value.length+1,code:f,...n,createTime:b}),T.success("添加成功")}else Object.assign(z.value,n),T.success("修改成功");p.form=!1}})};return(s,e)=>{const b=l("el-icon"),f=l("el-input"),k=l("el-option"),U=l("el-select"),L=l("el-date-picker"),m=l("el-button"),g=l("el-card"),w=l("el-col"),O=l("el-row"),u=l("el-table-column"),G=l("el-table"),I=l("el-pagination"),x=l("el-form-item"),K=l("el-input-number"),Y=l("el-form"),A=l("el-dialog");return Q(),J("div",ae,[t(g,null,{header:o(()=>[r("div",le,[r("div",re,[t(f,{modelValue:d.value.keyword,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value.keyword=a),placeholder:"请输入收入单号/来源",style:{width:"300px"},clearable:"",onKeyup:W(R,["enter"])},{prefix:o(()=>[t(b,null,{default:o(()=>[t(X(Z))]),_:1})]),_:1},8,["modelValue"]),t(U,{modelValue:d.value.type,"onUpdate:modelValue":e[1]||(e[1]=a=>d.value.type=a),placeholder:"收入类型",clearable:"",style:{width:"120px"}},{default:o(()=>[t(k,{label:"订单收入",value:"order"}),t(k,{label:"其他收入",value:"other"})]),_:1},8,["modelValue"]),t(L,{modelValue:d.value.dateRange,"onUpdate:modelValue":e[2]||(e[2]=a=>d.value.dateRange=a),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"240px"}},null,8,["modelValue"]),t(m,{type:"primary",onClick:R},{default:o(()=>e[11]||(e[11]=[i("搜索")])),_:1})]),t(m,{type:"primary",onClick:F},{default:o(()=>e[12]||(e[12]=[i("新增收入")])),_:1})])]),default:o(()=>[r("div",ne,[t(O,{gutter:20},{default:o(()=>[t(w,{span:6},{default:o(()=>[t(g,{shadow:"hover",class:"data-card"},{default:o(()=>[e[13]||(e[13]=r("h3",null,"本月收入",-1)),r("div",de,"¥"+_(v.currentMonth.toFixed(2)),1)]),_:1})]),_:1}),t(w,{span:6},{default:o(()=>[t(g,{shadow:"hover",class:"data-card"},{default:o(()=>[e[14]||(e[14]=r("h3",null,"上月收入",-1)),r("div",se,"¥"+_(v.lastMonth.toFixed(2)),1)]),_:1})]),_:1}),t(w,{span:6},{default:o(()=>[t(g,{shadow:"hover",class:"data-card"},{default:o(()=>[e[15]||(e[15]=r("h3",null,"本年收入",-1)),r("div",ue,"¥"+_(v.currentYear.toFixed(2)),1)]),_:1})]),_:1}),t(w,{span:6},{default:o(()=>[t(g,{shadow:"hover",class:"data-card"},{default:o(()=>[e[16]||(e[16]=r("h3",null,"同比增长",-1)),r("div",ie,_(v.yearGrowth.toFixed(1))+"%",1)]),_:1})]),_:1})]),_:1})]),r("div",pe,[t(G,{data:y.value,border:"",style:{width:"100%"},height:"100%"},{default:o(()=>[t(u,{prop:"code",label:"收入单号",width:"180"}),t(u,{prop:"type",label:"收入类型",width:"120"},{default:o(({row:a})=>[i(_(M(a.type)),1)]),_:1}),t(u,{prop:"source",label:"收入来源"}),t(u,{prop:"amount",label:"收入金额",width:"120"},{default:o(({row:a})=>[r("span",me,"¥"+_(a.amount.toFixed(2)),1)]),_:1}),t(u,{prop:"createTime",label:"创建时间",width:"180"}),t(u,{prop:"remark",label:"备注","show-overflow-tooltip":""}),t(u,{label:"操作",width:"120",fixed:"right"},{default:o(({row:a})=>[t(m,{link:"",type:"primary",onClick:H=>$(a)},{default:o(()=>e[17]||(e[17]=[i("编辑")])),_:2},1032,["onClick"]),t(m,{link:"",type:"danger",onClick:H=>q(a)},{default:o(()=>e[18]||(e[18]=[i("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),r("div",ce,[t(I,{"current-page":d.value.page,"onUpdate:currentPage":e[3]||(e[3]=a=>d.value.page=a),"page-size":d.value.pageSize,"onUpdate:pageSize":e[4]||(e[4]=a=>d.value.pageSize=a),total:B.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:N,onCurrentChange:j},null,8,["current-page","page-size","total"])])]),_:1}),t(A,{modelValue:p.form,"onUpdate:modelValue":e[10]||(e[10]=a=>p.form=a),title:h.value==="add"?"新增收入":"编辑收入",width:"600px"},{footer:o(()=>[t(m,{onClick:e[9]||(e[9]=a=>p.form=!1)},{default:o(()=>e[19]||(e[19]=[i("取消")])),_:1}),t(m,{type:"primary",onClick:D},{default:o(()=>e[20]||(e[20]=[i("确定")])),_:1})]),default:o(()=>[t(Y,{ref_key:"formRef",ref:S,model:n,rules:E,"label-width":"100px"},{default:o(()=>[t(x,{label:"收入类型",prop:"type"},{default:o(()=>[t(U,{modelValue:n.type,"onUpdate:modelValue":e[5]||(e[5]=a=>n.type=a),placeholder:"请选择收入类型",style:{width:"100%"}},{default:o(()=>[t(k,{label:"订单收入",value:"order"}),t(k,{label:"其他收入",value:"other"})]),_:1},8,["modelValue"])]),_:1}),t(x,{label:"收入来源",prop:"source"},{default:o(()=>[t(f,{modelValue:n.source,"onUpdate:modelValue":e[6]||(e[6]=a=>n.source=a),placeholder:"请输入收入来源"},null,8,["modelValue"])]),_:1}),t(x,{label:"收入金额",prop:"amount"},{default:o(()=>[t(K,{modelValue:n.amount,"onUpdate:modelValue":e[7]||(e[7]=a=>n.amount=a),precision:2,step:1e3,min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(x,{label:"备注",prop:"remark"},{default:o(()=>[t(f,{modelValue:n.remark,"onUpdate:modelValue":e[8]||(e[8]=a=>n.remark=a),type:"textarea",rows:3,placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});const ye=oe(_e,[["__scopeId","data-v-eb5a1040"]]);export{ye as default};
