import{d as ae,C as le,q as N,D as re,f as P,w as t,r as o,o as y,a,b as e,h as _,c as U,e as Z,F as K,E as ee,_ as oe,t as b,G as F,H as ne,y as te,I as se,z as ie,J as ue,K as de}from"./index-10dc1f41.js";const pe={class:"dialog-footer"},me=ae({__name:"order-dialog",props:{modelValue:Boolean,order:{type:Object,default:void 0}},emits:["update:modelValue","success"],setup(j,{emit:V}){const R=j,x=V,k=["山东重工","青岛港","济南医院","潍柴动力","浪潮集团","海尔集团","中国重汽","山东钢铁","齐鲁制药","东营石化"],O=[{type:"工业机器人",models:["AR-150","AR-200","AR-300","AR-500"]},{type:"服务机器人",models:["SR-100","SR-200","SR-300"]},{type:"特种机器人",models:["SP-150","SP-200","SP-300"]},{type:"协作机器人",models:["CR-50","CR-100","CR-150"]}],q=le({get:()=>R.modelValue,set:v=>x("update:modelValue",v)}),M=N(),w=N(!1),f=N({customer:"",productType:"",productModel:"",amount:0,status:"pending",deliveryTime:"",remark:""}),G=le(()=>{const v=O.find(s=>s.type===f.value.productType);return v?v.models:[]}),J={customer:[{required:!0,message:"请选择客户",trigger:"change"}],productType:[{required:!0,message:"请选择产品类型",trigger:"change"}],productModel:[{required:!0,message:"请选择产品型号",trigger:"change"}],amount:[{required:!0,message:"请输入订单金额",trigger:"blur"}],status:[{required:!0,message:"请选择订单状态",trigger:"change"}],deliveryTime:[{required:!0,message:"请选择交付日期",trigger:"change"}]};re(()=>R.order,v=>{v&&(f.value={...f.value,...v})},{immediate:!0});const E=()=>{f.value.productModel="",f.value.amount=0},H=()=>{if(f.value.productModel){const v=parseInt(f.value.productModel.split("-")[1])*1e4;f.value.amount=v}},p=async()=>{M.value&&await M.value.validate(v=>{v&&(w.value=!0,setTimeout(()=>{w.value=!1,ee.success("保存成功"),q.value=!1,x("success")},1e3))})};return(v,s)=>{const r=o("el-option"),A=o("el-select"),d=o("el-form-item"),i=o("el-col"),m=o("el-input-number"),l=o("el-date-picker"),T=o("el-row"),C=o("el-input"),n=o("el-form"),S=o("el-button"),z=o("el-dialog");return y(),P(z,{title:j.order?"编辑订单":"新增订单",modelValue:q.value,"onUpdate:modelValue":s[8]||(s[8]=u=>q.value=u),width:"700px","close-on-click-modal":!1},{footer:t(()=>[a("span",pe,[e(S,{onClick:s[7]||(s[7]=u=>q.value=!1)},{default:t(()=>s[9]||(s[9]=[_("取 消")])),_:1}),e(S,{type:"primary",onClick:p,loading:w.value},{default:t(()=>s[10]||(s[10]=[_(" 确 定 ")])),_:1},8,["loading"])])]),default:t(()=>[e(n,{ref_key:"formRef",ref:M,model:f.value,rules:J,"label-width":"100px",class:"order-form"},{default:t(()=>[e(T,{gutter:20},{default:t(()=>[e(i,{span:12},{default:t(()=>[e(d,{label:"客户名称",prop:"customer"},{default:t(()=>[e(A,{modelValue:f.value.customer,"onUpdate:modelValue":s[0]||(s[0]=u=>f.value.customer=u),placeholder:"请选择客户",style:{width:"100%"}},{default:t(()=>[(y(),U(K,null,Z(k,u=>e(r,{key:u,label:u,value:u},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:t(()=>[e(d,{label:"产品类型",prop:"productType"},{default:t(()=>[e(A,{modelValue:f.value.productType,"onUpdate:modelValue":s[1]||(s[1]=u=>f.value.productType=u),placeholder:"请选择产品类型",style:{width:"100%"},onChange:E},{default:t(()=>[(y(),U(K,null,Z(O,u=>e(r,{key:u.type,label:u.type,value:u.type},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:t(()=>[e(d,{label:"产品型号",prop:"productModel"},{default:t(()=>[e(A,{modelValue:f.value.productModel,"onUpdate:modelValue":s[2]||(s[2]=u=>f.value.productModel=u),placeholder:"请选择产品型号",style:{width:"100%"},onChange:H},{default:t(()=>[(y(!0),U(K,null,Z(G.value,u=>(y(),P(r,{key:u,label:u,value:u},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:t(()=>[e(d,{label:"订单金额",prop:"amount"},{default:t(()=>[e(m,{modelValue:f.value.amount,"onUpdate:modelValue":s[3]||(s[3]=u=>f.value.amount=u),min:0,precision:2,step:1e4,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:t(()=>[e(d,{label:"订单状态",prop:"status"},{default:t(()=>[e(A,{modelValue:f.value.status,"onUpdate:modelValue":s[4]||(s[4]=u=>f.value.status=u),placeholder:"请选择状态",style:{width:"100%"}},{default:t(()=>[e(r,{label:"待付款",value:"unpaid"}),e(r,{label:"待发货",value:"unshipped"}),e(r,{label:"已发货",value:"shipped"}),e(r,{label:"已完成",value:"completed"}),e(r,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(i,{span:12},{default:t(()=>[e(d,{label:"交付日期",prop:"deliveryTime"},{default:t(()=>[e(l,{modelValue:f.value.deliveryTime,"onUpdate:modelValue":s[5]||(s[5]=u=>f.value.deliveryTime=u),type:"date",placeholder:"选择交付日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(d,{label:"备注",prop:"remark"},{default:t(()=>[e(C,{modelValue:f.value.remark,"onUpdate:modelValue":s[6]||(s[6]=u=>f.value.remark=u),type:"textarea",rows:3,placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}});const ce=oe(me,[["__scopeId","data-v-8f7473c6"]]),_e={class:"logistics-tracking"},fe={class:"tracking-header"},ge={key:0,class:"tracking-info"},ve={class:"info-item"},ye={class:"value"},be={class:"info-item"},he={class:"value"},Te={class:"info-item"},ke={class:"value"},Se={class:"info-item"},Ve={class:"value"},we={class:"info-item"},Ce={class:"value"},$e={class:"tracking-timeline"},Re={class:"timeline-content"},Ie={class:"location"},Me={class:"status"},De={key:1,class:"tracking-actions"},Ue={class:"dialog-footer"},Oe=ae({__name:"logistics-tracking",props:{order:{}},emits:["success"],setup(j,{emit:V}){var v;const R=j,x=V,k=N(!1),O=N(),q=N(!1),M=N({orderId:((v=R.order)==null?void 0:v.id)||0,status:"pending",trackingNumber:"",carrier:"",currentLocation:"",remark:""}),w={status:[{required:!0,message:"请选择物流状态",trigger:"change"}],trackingNumber:[{required:!0,message:"请输入运单号",trigger:"blur"}],carrier:[{required:!0,message:"请选择承运商",trigger:"change"}],currentLocation:[{required:!0,message:"请输入当前位置",trigger:"blur"}]},f=le(()=>{var s;return(s=R.order)==null?void 0:s.logistics}),G=s=>s?{pending:"info",picked_up:"primary",in_transit:"warning",delivered:"success"}[s]:"",J=s=>s?{pending:"待取件",picked_up:"已取件",in_transit:"运输中",delivered:"已送达"}[s]:"",E=s=>{var r;return s===0?"primary":s===((r=f.value)==null?void 0:r.trackingHistory.length)-1?"success":"info"},H=()=>{k.value=!0},p=async()=>{O.value&&await O.value.validate(s=>{s&&(q.value=!0,setTimeout(()=>{q.value=!1,ee.success("物流信息更新成功"),k.value=!1,x("success")},1e3))})};return(s,r)=>{var u,B;const A=o("el-tag"),d=o("el-timeline-item"),i=o("el-timeline"),m=o("el-button"),l=o("el-option"),T=o("el-select"),C=o("el-form-item"),n=o("el-input"),S=o("el-form"),z=o("el-dialog");return y(),U("div",_e,[a("div",fe,[r[7]||(r[7]=a("h3",null,"物流跟踪",-1)),e(A,{type:G((u=f.value)==null?void 0:u.status)},{default:t(()=>{var c;return[_(b(J((c=f.value)==null?void 0:c.status)),1)]}),_:1},8,["type"])]),f.value?(y(),U("div",ge,[a("div",ve,[r[8]||(r[8]=a("span",{class:"label"},"运单号：",-1)),a("span",ye,b(f.value.trackingNumber||"-"),1)]),a("div",be,[r[9]||(r[9]=a("span",{class:"label"},"承运商：",-1)),a("span",he,b(f.value.carrier||"-"),1)]),a("div",Te,[r[10]||(r[10]=a("span",{class:"label"},"当前位置：",-1)),a("span",ke,b(f.value.currentLocation||"-"),1)]),a("div",Se,[r[11]||(r[11]=a("span",{class:"label"},"取件时间：",-1)),a("span",Ve,b(f.value.pickupTime||"-"),1)]),a("div",we,[r[12]||(r[12]=a("span",{class:"label"},"预计送达：",-1)),a("span",Ce,b(f.value.deliveryTime||"-"),1)])])):F("",!0),a("div",$e,[e(i,null,{default:t(()=>{var c;return[(y(!0),U(K,null,Z((c=f.value)==null?void 0:c.trackingHistory,(h,$)=>(y(),P(d,{key:$,type:E($),timestamp:h.time},{default:t(()=>[a("div",Re,[a("div",Ie,b(h.location),1),a("div",Me,b(h.status),1)])]),_:2},1032,["type","timestamp"]))),128))]}),_:1})]),((B=s.order)==null?void 0:B.status)==="unshipped"?(y(),U("div",De,[e(m,{type:"primary",onClick:H},{default:t(()=>r[13]||(r[13]=[_(" 更新物流信息 ")])),_:1})])):F("",!0),e(z,{modelValue:k.value,"onUpdate:modelValue":r[6]||(r[6]=c=>k.value=c),title:"更新物流信息",width:"600px"},{footer:t(()=>[a("span",Ue,[e(m,{onClick:r[5]||(r[5]=c=>k.value=!1)},{default:t(()=>r[14]||(r[14]=[_("取 消")])),_:1}),e(m,{type:"primary",onClick:p,loading:q.value},{default:t(()=>r[15]||(r[15]=[_(" 确 定 ")])),_:1},8,["loading"])])]),default:t(()=>[e(S,{ref_key:"formRef",ref:O,model:M.value,rules:w,"label-width":"100px"},{default:t(()=>[e(C,{label:"物流状态",prop:"status"},{default:t(()=>[e(T,{modelValue:M.value.status,"onUpdate:modelValue":r[0]||(r[0]=c=>M.value.status=c),placeholder:"请选择物流状态"},{default:t(()=>[e(l,{label:"待取件",value:"pending"}),e(l,{label:"已取件",value:"picked_up"}),e(l,{label:"运输中",value:"in_transit"}),e(l,{label:"已送达",value:"delivered"})]),_:1},8,["modelValue"])]),_:1}),e(C,{label:"运单号",prop:"trackingNumber"},{default:t(()=>[e(n,{modelValue:M.value.trackingNumber,"onUpdate:modelValue":r[1]||(r[1]=c=>M.value.trackingNumber=c),placeholder:"请输入运单号"},null,8,["modelValue"])]),_:1}),e(C,{label:"承运商",prop:"carrier"},{default:t(()=>[e(T,{modelValue:M.value.carrier,"onUpdate:modelValue":r[2]||(r[2]=c=>M.value.carrier=c),placeholder:"请选择承运商"},{default:t(()=>[e(l,{label:"顺丰速运",value:"顺丰速运"}),e(l,{label:"德邦物流",value:"德邦物流"}),e(l,{label:"中通快递",value:"中通快递"}),e(l,{label:"圆通速递",value:"圆通速递"}),e(l,{label:"韵达快递",value:"韵达快递"})]),_:1},8,["modelValue"])]),_:1}),e(C,{label:"当前位置",prop:"currentLocation"},{default:t(()=>[e(n,{modelValue:M.value.currentLocation,"onUpdate:modelValue":r[3]||(r[3]=c=>M.value.currentLocation=c),placeholder:"请输入当前位置"},null,8,["modelValue"])]),_:1}),e(C,{label:"备注",prop:"remark"},{default:t(()=>[e(n,{modelValue:M.value.remark,"onUpdate:modelValue":r[4]||(r[4]=c=>M.value.remark=c),type:"textarea",rows:3,placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});const Ne=oe(Oe,[["__scopeId","data-v-7c6d847b"]]),Le={class:"after-sale"},ze={class:"after-sale-header"},xe={key:0,class:"after-sale-info"},qe={key:0,class:"process-records"},Be={class:"timeline-content"},Ae={class:"operator"},Pe={class:"action"},Fe={key:0,class:"remark"},Ee={key:1,class:"attachments"},He={class:"attachment-list"},Ke={class:"dialog-footer"},je=ae({__name:"after-sale",props:{order:{}},emits:["success"],setup(j,{emit:V}){var A;const R=j,x=V,k=N(!1),O=N(),q=N(!1),M=N([]),w=N({orderId:((A=R.order)==null?void 0:A.id)||0,type:"repair",reason:"",description:"",attachments:[]}),f={type:[{required:!0,message:"请选择售后类型",trigger:"change"}],reason:[{required:!0,message:"请输入申请原因",trigger:"blur"}],description:[{required:!0,message:"请输入问题描述",trigger:"blur"}]},G=d=>d?{none:"info",applying:"warning",processing:"primary",completed:"success",rejected:"danger"}[d]:"",J=d=>d?{none:"无售后",applying:"申请中",processing:"处理中",completed:"已完成",rejected:"已拒绝"}[d]:"",E=d=>({repair:"维修",return:"退货",refund:"退款"})[d]||d,H=d=>{var i,m,l;return d===0?"primary":d===((l=(m=(i=R.order)==null?void 0:i.afterSale)==null?void 0:m.processRecords)==null?void 0:l.length)-1?"success":"info"},p=()=>{k.value=!0},v=d=>{var i;(i=w.value.attachments)==null||i.push(d.url)},s=d=>{var m,l;const i=(m=w.value.attachments)==null?void 0:m.indexOf(d.url);i!==-1&&((l=w.value.attachments)==null||l.splice(i,1))},r=async()=>{O.value&&await O.value.validate(d=>{d&&(q.value=!0,setTimeout(()=>{q.value=!1,ee.success("申请提交成功"),k.value=!1,x("success")},1e3))})};return N([{time:"2024-02-20 14:30",location:"济宁市汶上县中都街道中都广场",status:"已签收",operator:"张师傅",phone:"13953712345",remark:"客户本人签收"},{time:"2024-02-20 09:15",location:"济宁市汶上县中都街道中都广场",status:"派送中",operator:"张师傅",phone:"13953712345",remark:"正在派送，预计10:30送达"},{time:"2024-02-20 08:30",location:"济宁市汶上县中都街道中都广场",status:"已到达",operator:"张师傅",phone:"13953712345",remark:"已到达中都广场配送点"},{time:"2024-02-19 16:45",location:"济宁市汶上县中都街道中都广场",status:"运输中",operator:"李师傅",phone:"13953767890",remark:"从汶上县中都街道中都广场发出"},{time:"2024-02-19 14:20",location:"济宁市汶上县中都街道中都广场",status:"已发货",operator:"王师傅",phone:"13953723456",remark:"已打包完成，准备发货"}]),(d,i)=>{var L,g,D,Y;const m=o("el-button"),l=o("el-tag"),T=o("el-descriptions-item"),C=o("el-descriptions"),n=o("el-timeline-item"),S=o("el-timeline"),z=o("el-link"),u=o("el-option"),B=o("el-select"),c=o("el-form-item"),h=o("el-input"),$=o("el-upload"),Q=o("el-form"),W=o("el-dialog");return y(),U("div",Le,[a("div",ze,[i[6]||(i[6]=a("h3",null,"售后服务",-1)),(L=d.order)!=null&&L.afterSale?F("",!0):(y(),P(m,{key:0,type:"primary",onClick:p},{default:t(()=>i[5]||(i[5]=[_(" 申请售后 ")])),_:1}))]),(g=d.order)!=null&&g.afterSale?(y(),U("div",xe,[e(C,{column:2,border:""},{default:t(()=>[e(T,{label:"售后状态"},{default:t(()=>[e(l,{type:G(d.order.afterSale.status)},{default:t(()=>[_(b(J(d.order.afterSale.status)),1)]),_:1},8,["type"])]),_:1}),e(T,{label:"售后类型"},{default:t(()=>[_(b(E(d.order.afterSale.type)),1)]),_:1}),e(T,{label:"申请原因",span:2},{default:t(()=>[_(b(d.order.afterSale.reason),1)]),_:1}),e(T,{label:"问题描述",span:2},{default:t(()=>[_(b(d.order.afterSale.description),1)]),_:1}),e(T,{label:"申请时间"},{default:t(()=>[_(b(d.order.afterSale.applyTime),1)]),_:1}),e(T,{label:"处理时间"},{default:t(()=>[_(b(d.order.afterSale.processTime||"-"),1)]),_:1}),e(T,{label:"完成时间"},{default:t(()=>[_(b(d.order.afterSale.completeTime||"-"),1)]),_:1})]),_:1}),(D=d.order.afterSale.processRecords)!=null&&D.length?(y(),U("div",qe,[i[7]||(i[7]=a("h4",null,"处理记录",-1)),e(S,null,{default:t(()=>[(y(!0),U(K,null,Z(d.order.afterSale.processRecords,(I,X)=>(y(),P(n,{key:X,type:H(X),timestamp:I.time},{default:t(()=>[a("div",Be,[a("div",Ae,b(I.operator),1),a("div",Pe,b(I.action),1),I.remark?(y(),U("div",Fe,b(I.remark),1)):F("",!0)])]),_:2},1032,["type","timestamp"]))),128))]),_:1})])):F("",!0),(Y=d.order.afterSale.attachments)!=null&&Y.length?(y(),U("div",Ee,[i[8]||(i[8]=a("h4",null,"附件",-1)),a("div",He,[(y(!0),U(K,null,Z(d.order.afterSale.attachments,(I,X)=>(y(),P(z,{key:X,type:"primary",href:I,target:"_blank"},{default:t(()=>[_(" 附件 "+b(X+1),1)]),_:2},1032,["href"]))),128))])])):F("",!0)])):F("",!0),e(W,{modelValue:k.value,"onUpdate:modelValue":i[4]||(i[4]=I=>k.value=I),title:"申请售后",width:"600px"},{footer:t(()=>[a("span",Ke,[e(m,{onClick:i[3]||(i[3]=I=>k.value=!1)},{default:t(()=>i[10]||(i[10]=[_("取 消")])),_:1}),e(m,{type:"primary",onClick:r,loading:q.value},{default:t(()=>i[11]||(i[11]=[_(" 提 交 ")])),_:1},8,["loading"])])]),default:t(()=>[e(Q,{ref_key:"formRef",ref:O,model:w.value,rules:f,"label-width":"100px"},{default:t(()=>[e(c,{label:"售后类型",prop:"type"},{default:t(()=>[e(B,{modelValue:w.value.type,"onUpdate:modelValue":i[0]||(i[0]=I=>w.value.type=I),placeholder:"请选择售后类型"},{default:t(()=>[e(u,{label:"维修",value:"repair"}),e(u,{label:"退货",value:"return"}),e(u,{label:"退款",value:"refund"})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"申请原因",prop:"reason"},{default:t(()=>[e(h,{modelValue:w.value.reason,"onUpdate:modelValue":i[1]||(i[1]=I=>w.value.reason=I),type:"textarea",rows:3,placeholder:"请描述申请原因"},null,8,["modelValue"])]),_:1}),e(c,{label:"问题描述",prop:"description"},{default:t(()=>[e(h,{modelValue:w.value.description,"onUpdate:modelValue":i[2]||(i[2]=I=>w.value.description=I),type:"textarea",rows:4,placeholder:"请详细描述问题"},null,8,["modelValue"])]),_:1}),e(c,{label:"附件"},{default:t(()=>[e($,{action:"/api/upload","on-success":v,"on-remove":s,"file-list":M.value,multiple:""},{default:t(()=>[e(m,{type:"primary"},{default:t(()=>i[9]||(i[9]=[_("点击上传")])),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});const Ge=oe(je,[["__scopeId","data-v-48c123e9"]]),Je={class:"timeline-section"},Qe={class:"dialog-footer"},We=ae({__name:"order-detail",props:{modelValue:{type:Boolean},order:{}},emits:["update:modelValue","success"],setup(j,{emit:V}){const R=j,x=V,k=le({get:()=>R.modelValue,set:p=>x("update:modelValue",p)}),O=N("basic"),q=p=>p?{unpaid:"warning",unshipped:"primary",shipped:"success",completed:"success",cancelled:"info"}[p]:"",M=p=>p?{unpaid:"待付款",unshipped:"待发货",shipped:"已发货",completed:"已完成",cancelled:"已取消"}[p]:"",w=p=>p?p.toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00",f=le(()=>{if(!R.order)return[];const p=[{content:"订单创建",timestamp:R.order.createTime,type:"primary"}];return R.order.status==="cancelled"?p.push({content:"订单取消",timestamp:R.order.updateTime,type:"danger"}):(R.order.status!=="unpaid"&&p.push({content:"付款完成",timestamp:R.order.payTime||"-",type:"success"}),["shipped","completed"].includes(R.order.status)&&p.push({content:"商品发货",timestamp:R.order.shipTime||"-",type:"success"}),R.order.status==="completed"&&p.push({content:"订单完成",timestamp:R.order.completeTime||"-",type:"success"})),p}),G=()=>{ne.confirm("确认该订单已完成付款？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{ee.success("确认付款成功"),x("success"),k.value=!1})},J=()=>{ne.confirm("确认发货该订单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{ee.success("确认发货成功"),x("success"),k.value=!1})},E=()=>{ne.confirm("确认完成该订单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{ee.success("订单已完成"),x("success"),k.value=!1})},H=()=>{x("success")};return(p,v)=>{const s=o("el-descriptions-item"),r=o("el-tag"),A=o("el-descriptions"),d=o("el-timeline-item"),i=o("el-timeline"),m=o("el-tab-pane"),l=o("el-tabs"),T=o("el-button"),C=o("el-dialog");return y(),P(C,{title:"订单详情",modelValue:k.value,"onUpdate:modelValue":v[2]||(v[2]=n=>k.value=n),width:"900px"},{footer:t(()=>{var n,S,z;return[a("span",Qe,[e(T,{onClick:v[1]||(v[1]=u=>k.value=!1)},{default:t(()=>v[4]||(v[4]=[_("关 闭")])),_:1}),((n=p.order)==null?void 0:n.status)==="unpaid"?(y(),P(T,{key:0,type:"primary",onClick:G},{default:t(()=>v[5]||(v[5]=[_(" 确认付款 ")])),_:1})):F("",!0),((S=p.order)==null?void 0:S.status)==="unshipped"?(y(),P(T,{key:1,type:"success",onClick:J},{default:t(()=>v[6]||(v[6]=[_(" 确认发货 ")])),_:1})):F("",!0),((z=p.order)==null?void 0:z.status)==="shipped"?(y(),P(T,{key:2,type:"success",onClick:E},{default:t(()=>v[7]||(v[7]=[_(" 确认完成 ")])),_:1})):F("",!0)])]}),default:t(()=>[e(l,{modelValue:O.value,"onUpdate:modelValue":v[0]||(v[0]=n=>O.value=n)},{default:t(()=>[e(m,{label:"基本信息",name:"basic"},{default:t(()=>[p.order?(y(),P(A,{key:0,column:2,border:""},{default:t(()=>[e(s,{label:"订单编号"},{default:t(()=>{var n;return[_(b((n=p.order)==null?void 0:n.orderNo),1)]}),_:1}),e(s,{label:"订单状态"},{default:t(()=>{var n;return[e(r,{type:q((n=p.order)==null?void 0:n.status)},{default:t(()=>{var S;return[_(b(M((S=p.order)==null?void 0:S.status)),1)]}),_:1},8,["type"])]}),_:1}),e(s,{label:"客户名称"},{default:t(()=>{var n;return[_(b((n=p.order)==null?void 0:n.customer),1)]}),_:1}),e(s,{label:"订单金额"},{default:t(()=>{var n;return[_("¥"+b(w((n=p.order)==null?void 0:n.amount)),1)]}),_:1}),e(s,{label:"产品类型"},{default:t(()=>{var n;return[_(b((n=p.order)==null?void 0:n.productType),1)]}),_:1}),e(s,{label:"产品型号"},{default:t(()=>{var n;return[_(b((n=p.order)==null?void 0:n.productModel),1)]}),_:1}),e(s,{label:"创建时间"},{default:t(()=>{var n;return[_(b((n=p.order)==null?void 0:n.createTime),1)]}),_:1}),e(s,{label:"交付时间"},{default:t(()=>{var n;return[_(b((n=p.order)==null?void 0:n.deliveryTime),1)]}),_:1}),e(s,{label:"备注",span:2},{default:t(()=>{var n;return[_(b(((n=p.order)==null?void 0:n.remark)||"暂无备注"),1)]}),_:1})]),_:1})):F("",!0),a("div",Je,[v[3]||(v[3]=a("h3",null,"订单进度",-1)),e(i,null,{default:t(()=>[(y(!0),U(K,null,Z(f.value,(n,S)=>(y(),P(d,{key:S,type:n.type,timestamp:n.timestamp},{default:t(()=>[_(b(n.content),1)]),_:2},1032,["type","timestamp"]))),128))]),_:1})])]),_:1}),e(m,{label:"物流跟踪",name:"logistics"},{default:t(()=>[e(Ne,{order:p.order,onSuccess:H},null,8,["order"])]),_:1}),e(m,{label:"售后服务",name:"afterSale"},{default:t(()=>[e(Ge,{order:p.order,onSuccess:H},null,8,["order"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])}}});const Ye=oe(We,[["__scopeId","data-v-1e109046"]]),Xe={class:"order-container"},Ze={class:"summary-cards"},et={class:"trend up"},tt={class:"trend up"},lt={class:"trend down"},at={class:"trend up"},ot={class:"card-header"},nt={class:"left"},st={class:"table-container"},rt={class:"operation-buttons"},it=["onClick"],ut=["onClick"],dt=["onClick"],pt=["onClick"],mt=["onClick"],ct=["onClick"],_t=["onClick"],ft=["onClick"],gt={class:"pagination-container"},vt=ae({__name:"index",setup(j){const V=N({page:1,pageSize:10,keyword:"",type:"",status:void 0,dateRange:void 0}),R=N([]),x=N(0),k=N({order:!1,detail:!1}),O=N(),M=(()=>{const m=[],l=["unpaid","unshipped","shipped","completed","cancelled"],T=(c,h)=>new Date(c.getTime()+Math.random()*(h.getTime()-c.getTime())),C=new Date;C.setDate(C.getDate()-90);const n=["山东重工","青岛港","济南医院","潍柴动力","浪潮集团","海尔集团","中国重汽","山东钢铁","齐鲁制药","东营石化"],S=[{type:"工业机器人",models:["AR-150","AR-200","AR-300","AR-500"]},{type:"服务机器人",models:["SR-100","SR-200","SR-300"]},{type:"特种机器人",models:["SP-150","SP-200","SP-300"]},{type:"协作机器人",models:["CR-50","CR-100","CR-150"]}],z=["汶上县中都物流","汶上县中都快递","汶上县中都速运"],u={山东重工:"济南市历城区工业北路",青岛港:"青岛市黄岛区港润路",济南医院:"济南市槐荫区经十路",潍柴动力:"潍坊市奎文区民生东街",浪潮集团:"济南市高新区浪潮路",海尔集团:"青岛市崂山区海尔路",中国重汽:"济南市历城区黄河路",山东钢铁:"济南市历下区工业南路",齐鲁制药:"济南市高新区新泺大街",东营石化:"东营市东营区济南路"},B=(c,h,$)=>{if(c==="unpaid"||c==="unshipped")return;const Q=c==="shipped"?"in_transit":"delivered",W=`WS${String(Math.floor(Math.random()*1e9)).padStart(9,"0")}`,L=z[Math.floor(Math.random()*z.length)],g=new Date(h.getTime()+24*60*60*1e3),D=new Date(h.getTime()+3*24*60*60*1e3),Y=Q==="delivered"?$:"济宁市汶上县中都街道",I=[{time:h.toISOString().replace("T"," ").substring(0,19),location:"济宁市汶上县中都街道中都广场",status:"订单已创建"},{time:g.toISOString().replace("T"," ").substring(0,19),location:"济宁市汶上县中都街道中都广场",status:"已取件"},{time:new Date(h.getTime()+1.5*24*60*60*1e3).toISOString().replace("T"," ").substring(0,19),location:"济宁市汶上县经济开发区",status:"已到达汶上县经济开发区分拣中心"},{time:new Date(h.getTime()+1.8*24*60*60*1e3).toISOString().replace("T"," ").substring(0,19),location:"济宁市汶上县苏海路",status:"运输中"},{time:new Date(h.getTime()+2*24*60*60*1e3).toISOString().replace("T"," ").substring(0,19),location:"济宁市汶上县广场东街",status:"已到达汶上县城区配送站"},{time:new Date(h.getTime()+2.2*24*60*60*1e3).toISOString().replace("T"," ").substring(0,19),location:"济宁市汶上县康驿路",status:"运输中"},{time:new Date(h.getTime()+2.5*24*60*60*1e3).toISOString().replace("T"," ").substring(0,19),location:"济宁市汶上县圣泽大街",status:"运输中"},{time:new Date(h.getTime()+2.8*24*60*60*1e3).toISOString().replace("T"," ").substring(0,19),location:$,status:"即将送达"}];return Q==="delivered"&&I.push({time:D.toISOString().replace("T"," ").substring(0,19),location:$,status:"已送达"}),{status:Q,trackingNumber:W,carrier:L,pickupTime:g.toISOString().replace("T"," ").substring(0,19),deliveryTime:D.toISOString().replace("T"," ").substring(0,19),currentLocation:Y,trackingHistory:I}};for(let c=1;c<=100;c++){const h=S[Math.floor(Math.random()*S.length)],$=h.models[Math.floor(Math.random()*h.models.length)],W=parseInt($.split("-")[1])*1e4+Math.floor(Math.random()*5e4),L=T(C,new Date),g=`ORD${L.getFullYear()}${String(L.getMonth()+1).padStart(2,"0")}${String(L.getDate()).padStart(2,"0")}${String(c).padStart(4,"0")}`,D=l[Math.floor(Math.random()*l.length)],Y=n[Math.floor(Math.random()*n.length)],I=u[Y],X=B(D,L,I);m.push({id:c,orderNo:g,customer:Y,productType:h.type,productModel:$,amount:W,status:D,createTime:L.toISOString().replace("T"," ").substring(0,19),updateTime:L.toISOString().replace("T"," ").substring(0,19),payTime:D!=="unpaid"?new Date(L.getTime()+24*60*60*1e3).toISOString().replace("T"," ").substring(0,19):null,shipTime:["shipped","completed"].includes(D)?new Date(L.getTime()+3*24*60*60*1e3).toISOString().replace("T"," ").substring(0,19):null,completeTime:D==="completed"?new Date(L.getTime()+7*24*60*60*1e3).toISOString().replace("T"," ").substring(0,19):null,deliveryTime:new Date(L.getTime()+30*24*60*60*1e3).toISOString().split("T")[0],logistics:X,customerContact:{name:"张三",phone:"13800138000",email:"zhangsan@example.com",address:I},paymentInfo:{method:"银行转账",transactionId:`TR${String(Math.floor(Math.random()*1e9)).padStart(9,"0")}`,paidAmount:W,paidTime:D!=="unpaid"?new Date(L.getTime()+24*60*60*1e3).toISOString().replace("T"," ").substring(0,19):void 0}})}return m.sort((c,h)=>new Date(h.createTime).getTime()-new Date(c.createTime).getTime())})(),w=()=>{const{page:m,pageSize:l,keyword:T,dateRange:C,status:n}=V.value;let S=M;if(T){const B=T.toLowerCase();S=S.filter(c=>c.orderNo.toLowerCase().includes(B)||c.customer.includes(T))}if(C){const[B,c]=C;S=S.filter(h=>{const $=new Date(h.createTime);return $>=B&&$<=c})}n&&(S=S.filter(B=>B.status===n)),x.value=S.length;const z=(m-1)*l,u=z+l;R.value=S.slice(z,u)},f=m=>({unpaid:"warning",unshipped:"primary",shipped:"success",completed:"success",cancelled:"info"})[m],G=m=>({unpaid:"待付款",unshipped:"待发货",shipped:"已发货",completed:"已完成",cancelled:"已取消"})[m],J=m=>m.toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2}),E=()=>{V.value.page=1,w()},H=()=>{V.value={page:1,pageSize:10,keyword:"",type:"",status:void 0,dateRange:void 0},w()},p=m=>{O.value=m,k.value.detail=!0},v=m=>{O.value=m,k.value.order=!0},s=m=>{ne.confirm("确定要取消该订单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("取消订单:",m),ee.success("订单已取消"),w()}).catch(()=>{})},r=()=>{O.value=void 0,k.value.order=!0},A=m=>{V.value.pageSize=m,V.value.page=1,w()},d=m=>{V.value.page=m,w()},i=()=>{w()};return w(),(m,l)=>{const T=o("el-icon"),C=o("el-card"),n=o("el-col"),S=o("el-row"),z=o("el-input"),u=o("el-option"),B=o("el-select"),c=o("el-date-picker"),h=o("el-button"),$=o("el-table-column"),Q=o("el-tag"),W=o("el-table"),L=o("el-pagination");return y(),U("div",Xe,[a("div",Ze,[e(S,{gutter:20},{default:t(()=>[e(n,{span:6},{default:t(()=>[e(C,{shadow:"hover",class:"data-card"},{default:t(()=>[l[9]||(l[9]=a("h3",null,"订单总数",-1)),l[10]||(l[10]=a("div",{class:"number"},"1,286",-1)),a("div",et,[e(T,null,{default:t(()=>[e(te(se))]),_:1}),l[8]||(l[8]=_(" 8.5% "))])]),_:1})]),_:1}),e(n,{span:6},{default:t(()=>[e(C,{shadow:"hover",class:"data-card"},{default:t(()=>[l[12]||(l[12]=a("h3",null,"订单金额",-1)),l[13]||(l[13]=a("div",{class:"number"},"¥15,862,500",-1)),a("div",tt,[e(T,null,{default:t(()=>[e(te(se))]),_:1}),l[11]||(l[11]=_(" 12.3% "))])]),_:1})]),_:1}),e(n,{span:6},{default:t(()=>[e(C,{shadow:"hover",class:"data-card"},{default:t(()=>[l[15]||(l[15]=a("h3",null,"待处理订单",-1)),l[16]||(l[16]=a("div",{class:"number warning"},"86",-1)),a("div",lt,[e(T,null,{default:t(()=>[e(te(ie))]),_:1}),l[14]||(l[14]=_(" 5.2% "))])]),_:1})]),_:1}),e(n,{span:6},{default:t(()=>[e(C,{shadow:"hover",class:"data-card"},{default:t(()=>[l[18]||(l[18]=a("h3",null,"完成率",-1)),l[19]||(l[19]=a("div",{class:"number"},"96.8%",-1)),a("div",at,[e(T,null,{default:t(()=>[e(te(se))]),_:1}),l[17]||(l[17]=_(" 2.1% "))])]),_:1})]),_:1})]),_:1})]),e(C,null,{header:t(()=>[a("div",ot,[a("div",nt,[e(z,{modelValue:V.value.keyword,"onUpdate:modelValue":l[0]||(l[0]=g=>V.value.keyword=g),placeholder:"请输入订单号/客户名称",style:{width:"300px"},clearable:"",onKeyup:ue(E,["enter"])},{prefix:t(()=>[e(T,null,{default:t(()=>[e(te(de))]),_:1})]),_:1},8,["modelValue"]),e(B,{modelValue:V.value.type,"onUpdate:modelValue":l[1]||(l[1]=g=>V.value.type=g),placeholder:"产品类型",clearable:"",style:{width:"180px"}},{default:t(()=>[e(u,{label:"工业机器人",value:"industrial"}),e(u,{label:"服务机器人",value:"service"}),e(u,{label:"特种机器人",value:"special"}),e(u,{label:"协作机器人",value:"cooperative"})]),_:1},8,["modelValue"]),e(B,{modelValue:V.value.status,"onUpdate:modelValue":l[2]||(l[2]=g=>V.value.status=g),placeholder:"订单状态",clearable:"",style:{width:"120px"}},{default:t(()=>[e(u,{label:"待付款",value:"unpaid"}),e(u,{label:"待发货",value:"unshipped"}),e(u,{label:"已发货",value:"shipped"}),e(u,{label:"已完成",value:"completed"}),e(u,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"]),e(c,{modelValue:V.value.dateRange,"onUpdate:modelValue":l[3]||(l[3]=g=>V.value.dateRange=g),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"240px"}},null,8,["modelValue"]),e(h,{type:"primary",onClick:E},{default:t(()=>l[20]||(l[20]=[_("搜索")])),_:1}),e(h,{onClick:H},{default:t(()=>l[21]||(l[21]=[_("重置")])),_:1})]),e(h,{type:"primary",onClick:r},{default:t(()=>l[22]||(l[22]=[_("新增订单")])),_:1})])]),default:t(()=>[a("div",st,[e(W,{data:R.value,border:"",style:{width:"100%"},height:"100%"},{default:t(()=>[e($,{prop:"orderNo",label:"订单编号",width:"180"}),e($,{prop:"customer",label:"客户名称",width:"180"}),e($,{prop:"productType",label:"产品类型",width:"120"}),e($,{prop:"productModel",label:"产品型号",width:"120"}),e($,{prop:"amount",label:"订单金额",width:"150"},{default:t(({row:g})=>[_(" ¥"+b(J(g.amount)),1)]),_:1}),e($,{prop:"status",label:"订单状态",width:"100"},{default:t(({row:g})=>[e(Q,{type:f(g.status)},{default:t(()=>[_(b(G(g.status)),1)]),_:2},1032,["type"])]),_:1}),e($,{prop:"createTime",label:"创建时间",width:"180"}),e($,{prop:"deliveryTime",label:"交付时间",width:"180"}),e($,{label:"操作",width:"180",fixed:"right"},{default:t(({row:g})=>[a("div",rt,[g.status==="unpaid"?(y(),U(K,{key:0},[a("a",{onClick:D=>v(g)},"编辑",8,it),a("a",{class:"danger",onClick:D=>s(g)},"删除",8,ut),a("a",{onClick:D=>p(g)},"查看",8,dt)],64)):g.status==="unshipped"?(y(),U(K,{key:1},[a("a",{onClick:D=>m.handleShip(g)},"发货",8,pt),a("a",{onClick:D=>p(g)},"查看",8,mt)],64)):g.status==="shipped"?(y(),U(K,{key:2},[a("a",{class:"success",onClick:D=>m.handleComplete(g)},"完成",8,ct),a("a",{onClick:D=>p(g)},"查看",8,_t)],64)):(y(),U("a",{key:3,onClick:D=>p(g)},"查看",8,ft))])]),_:1})]),_:1},8,["data"])]),a("div",gt,[e(L,{"current-page":V.value.page,"onUpdate:currentPage":l[4]||(l[4]=g=>V.value.page=g),"page-size":V.value.pageSize,"onUpdate:pageSize":l[5]||(l[5]=g=>V.value.pageSize=g),total:x.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:A,onCurrentChange:d},null,8,["current-page","page-size","total"])])]),_:1}),e(ce,{modelValue:k.value.order,"onUpdate:modelValue":l[6]||(l[6]=g=>k.value.order=g),order:O.value,onSuccess:i},null,8,["modelValue","order"]),e(Ye,{modelValue:k.value.detail,"onUpdate:modelValue":l[7]||(l[7]=g=>k.value.detail=g),order:O.value,onSuccess:i},null,8,["modelValue","order"])])}}});const bt=oe(vt,[["__scopeId","data-v-59a28746"]]);export{bt as default};
