import{d as G,q as b,c as T,b as l,w as t,r as a,o as C,a as s,J as z,y as H,K as J,h as d,t as m,N as I,f as Q,G as E,E as V,H as W,_ as L}from"./index-a2ecb734.js";const X={class:"department-container"},Y={class:"card-header"},Z={class:"left"},ee={class:"content"},le={class:"tree-container"},te={class:"custom-tree-node"},ne={class:"actions"},oe={key:0,class:"detail-container"},ae={class:"dialog-footer"},de=G({__name:"index",setup(re){const k=b([{id:1,name:"总经理办公室",code:"GM-OFFICE",parentId:null,manager:"王志远",description:"负责公司整体战略规划和运营管理",createTime:"2023-01-01",memberCount:5,members:[{id:1,name:"王志远",position:"总经理",phone:"13800138001",email:"wangzy@shandong-robot.com",joinTime:"2023-01-01"}]},{id:2,name:"研发中心",code:"RD-CENTER",parentId:null,manager:"李明",description:"负责公司产品研发和技术创新",createTime:"2023-01-01",memberCount:45,children:[{id:21,name:"机器人研发部",code:"RD-ROBOT",parentId:2,manager:"张工",description:"负责工业机器人、服务机器人等产品研发",createTime:"2023-01-01",memberCount:25},{id:22,name:"软件开发部",code:"RD-SOFTWARE",parentId:2,manager:"刘工",description:"负责机器人控制系统、应用软件开发",createTime:"2023-01-01",memberCount:20}]},{id:3,name:"生产制造中心",code:"PM-CENTER",parentId:null,manager:"赵强",description:"负责产品生产制造和质量管理",createTime:"2023-01-01",memberCount:120,children:[{id:31,name:"生产部",code:"PM-PROD",parentId:3,manager:"周工",description:"负责产品生产和装配",createTime:"2023-01-01",memberCount:80},{id:32,name:"质量部",code:"PM-QC",parentId:3,manager:"吴工",description:"负责产品质量检验和控制",createTime:"2023-01-01",memberCount:40}]}]),h={children:"children",label:"name"},g=b(""),r=b(),p=b(!1),o=b({parentId:null,name:"",code:"",manager:"",description:""}),R={name:[{required:!0,message:"请输入部门名称",trigger:"blur"}],code:[{required:!0,message:"请输入部门编码",trigger:"blur"}],manager:[{required:!0,message:"请输入负责人",trigger:"blur"}]},x=()=>{V.success("搜索："+g.value)},N=i=>{r.value=i},B=()=>{o.value={parentId:null,name:"",code:"",manager:"",description:""},p.value=!0},D=i=>{o.value={parentId:i.parentId,name:i.name,code:i.code,manager:i.manager,description:i.description},p.value=!0},M=(i,e)=>{W.confirm(`确认删除部门"${e.name}"吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{V.success("删除成功")})},U=()=>{V.success("保存成功"),p.value=!1};return(i,e)=>{const O=a("el-icon"),c=a("el-input"),u=a("el-button"),P=a("el-tree"),_=a("el-descriptions-item"),$=a("el-descriptions"),f=a("el-table-column"),q=a("el-table"),S=a("el-card"),F=a("el-tree-select"),v=a("el-form-item"),K=a("el-form"),j=a("el-dialog");return C(),T("div",X,[l(S,null,{header:t(()=>[s("div",Y,[s("div",Z,[l(c,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=n=>g.value=n),placeholder:"请输入部门名称",style:{width:"200px"},clearable:"",onKeyup:z(x,["enter"])},{prefix:t(()=>[l(O,null,{default:t(()=>[l(H(J))]),_:1})]),_:1},8,["modelValue"]),l(u,{type:"primary",onClick:x},{default:t(()=>e[9]||(e[9]=[d("搜索")])),_:1}),l(u,{onClick:e[1]||(e[1]=n=>g.value="")},{default:t(()=>e[10]||(e[10]=[d("重置")])),_:1})]),l(u,{type:"primary",onClick:B},{default:t(()=>e[11]||(e[11]=[d("新增部门")])),_:1})])]),default:t(()=>[s("div",ee,[s("div",le,[l(P,{ref:"treeRef",data:k.value,props:h,"node-key":"id","default-expand-all":"","highlight-current":"","expand-on-click-node":!1,onNodeClick:N},{default:t(({node:n,data:y})=>{var w;return[s("div",te,[s("span",null,m(y.name),1),s("span",ne,[l(u,{link:"",type:"primary",onClick:I(A=>D(y),["stop"])},{default:t(()=>e[12]||(e[12]=[d("编辑")])),_:2},1032,["onClick"]),(w=y.children)!=null&&w.length?E("",!0):(C(),Q(u,{key:0,link:"",type:"danger",onClick:I(A=>M(n,y),["stop"])},{default:t(()=>e[13]||(e[13]=[d(" 删除 ")])),_:2},1032,["onClick"]))])])]}),_:1},8,["data"])]),r.value?(C(),T("div",oe,[s("h3",null,m(r.value.name),1),l($,{column:2,border:""},{default:t(()=>[l(_,{label:"部门编码"},{default:t(()=>[d(m(r.value.code),1)]),_:1}),l(_,{label:"负责人"},{default:t(()=>[d(m(r.value.manager),1)]),_:1}),l(_,{label:"创建时间"},{default:t(()=>[d(m(r.value.createTime),1)]),_:1}),l(_,{label:"部门人数"},{default:t(()=>[d(m(r.value.memberCount)+"人",1)]),_:1}),l(_,{label:"部门描述",span:2},{default:t(()=>[d(m(r.value.description),1)]),_:1})]),_:1}),e[14]||(e[14]=s("div",{class:"section-title"},"部门成员",-1)),l(q,{data:r.value.members,border:"",style:{width:"100%"}},{default:t(()=>[l(f,{prop:"name",label:"姓名",width:"120"}),l(f,{prop:"position",label:"职位",width:"150"}),l(f,{prop:"phone",label:"联系电话",width:"150"}),l(f,{prop:"email",label:"邮箱","min-width":"200"}),l(f,{prop:"joinTime",label:"入职时间",width:"180"})]),_:1},8,["data"])])):E("",!0)])]),_:1}),l(j,{title:r.value?"编辑部门":"新增部门",modelValue:p.value,"onUpdate:modelValue":e[8]||(e[8]=n=>p.value=n),width:"600px"},{footer:t(()=>[s("span",ae,[l(u,{onClick:e[7]||(e[7]=n=>p.value=!1)},{default:t(()=>e[15]||(e[15]=[d("取 消")])),_:1}),l(u,{type:"primary",onClick:U},{default:t(()=>e[16]||(e[16]=[d("确 定")])),_:1})])]),default:t(()=>[l(K,{ref:"formRef",model:o.value,rules:R,"label-width":"100px"},{default:t(()=>[l(v,{label:"上级部门"},{default:t(()=>[l(F,{modelValue:o.value.parentId,"onUpdate:modelValue":e[2]||(e[2]=n=>o.value.parentId=n),data:k.value,props:h,"check-strictly":"","node-key":"id",placeholder:"请选择上级部门",style:{width:"100%"}},null,8,["modelValue","data"])]),_:1}),l(v,{label:"部门名称",prop:"name"},{default:t(()=>[l(c,{modelValue:o.value.name,"onUpdate:modelValue":e[3]||(e[3]=n=>o.value.name=n),placeholder:"请输入部门名称"},null,8,["modelValue"])]),_:1}),l(v,{label:"部门编码",prop:"code"},{default:t(()=>[l(c,{modelValue:o.value.code,"onUpdate:modelValue":e[4]||(e[4]=n=>o.value.code=n),placeholder:"请输入部门编码"},null,8,["modelValue"])]),_:1}),l(v,{label:"负责人",prop:"manager"},{default:t(()=>[l(c,{modelValue:o.value.manager,"onUpdate:modelValue":e[5]||(e[5]=n=>o.value.manager=n),placeholder:"请输入负责人姓名"},null,8,["modelValue"])]),_:1}),l(v,{label:"部门描述",prop:"description"},{default:t(()=>[l(c,{modelValue:o.value.description,"onUpdate:modelValue":e[6]||(e[6]=n=>o.value.description=n),type:"textarea",rows:3,placeholder:"请输入部门描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])])}}});const ie=L(de,[["__scopeId","data-v-db80e634"]]);export{ie as default};
