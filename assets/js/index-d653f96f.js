import{d as J,r as g,H as O,c as Q,b as e,w as t,f as i,g as y,e as v,B as W,u as X,C as Y,i as l,t as r,k as b,y as T,z as V,E as z,_ as Z}from"./index-e75d186a.js";const ee={class:"purchase-container"},te={class:"card-header"},ae={class:"left"},ne={class:"table-container"},ie={class:"pagination-container"},le=J({__name:"index",setup(oe){const o=g({page:1,pageSize:10,keyword:"",status:"",dateRange:[]}),B=g([{id:1,code:"CG202403200001",supplier:"发那科（中国）有限公司",amount:1568e3,createTime:"2025-02-20 09:30:00",status:"completed",items:[{name:"工业机器人本体",quantity:5,price:286e3},{name:"控制系统",quantity:5,price:27600}]},{id:2,code:"CG202403200002",supplier:"安川（中国）机器人有限公司",amount:986e3,createTime:"2025-02-20 10:15:00",status:"approved",items:[{name:"四轴机器人",quantity:4,price:246500}]},{id:3,code:"CG202403200003",supplier:"库卡机器人（上海）有限公司",amount:1286e3,createTime:"2025-02-20 11:30:00",status:"pending",items:[{name:"协作机器人",quantity:3,price:428666.67}]},{id:4,code:"CG202403200004",supplier:"西门子（中国）有限公司",amount:568e3,createTime:"2025-02-20 13:45:00",status:"pending",items:[{name:"伺服驱动器",quantity:50,price:8960},{name:"伺服电机",quantity:50,price:2400}]},{id:5,code:"CG202403200005",supplier:"基恩士（中国）有限公司",amount:386e3,createTime:"2025-02-20 14:30:00",status:"pending",items:[{name:"视觉传感器",quantity:30,price:12866.67}]},{id:6,code:"CG202403200006",supplier:"ATI工业自动化",amount:256e3,createTime:"2025-02-20 15:10:00",status:"pending",items:[{name:"力矩传感器",quantity:20,price:12800}]},{id:7,code:"CG202403200007",supplier:"欧姆龙（中国）有限公司",amount:328e3,createTime:"2025-02-20 15:45:00",status:"pending",items:[{name:"安全光栅",quantity:40,price:5200},{name:"安全控制器",quantity:20,price:6800}]},{id:8,code:"CG202403200008",supplier:"倍加福工业自动化（中国）有限公司",amount:198e3,createTime:"2025-02-20 16:00:00",status:"pending",items:[{name:"激光测距传感器",quantity:25,price:7920}]},{id:9,code:"CG202403200009",supplier:"施耐德电气（中国）有限公司",amount:436e3,createTime:"2025-02-20 16:15:00",status:"pending",items:[{name:"工业交换机",quantity:20,price:12800},{name:"工业电源",quantity:50,price:3600}]},{id:10,code:"CG202403200010",supplier:"图尔克（天津）传感器有限公司",amount:156e3,createTime:"2025-02-20 16:30:00",status:"pending",items:[{name:"接近传感器",quantity:200,price:780}]},{id:11,code:"CG202403200011",supplier:"邦纳工程国际有限公司",amount:245e3,createTime:"2025-02-20 16:45:00",status:"pending",items:[{name:"光电传感器",quantity:150,price:1633.33}]},{id:12,code:"CG202403200012",supplier:"菲尼克斯（中国）投资有限公司",amount:168e3,createTime:"2025-02-20 17:00:00",status:"pending",items:[{name:"端子排",quantity:2e3,price:84}]},{id:13,code:"CG202403200013",supplier:"魏德米勒电联接（上海）有限公司",amount:186e3,createTime:"2025-02-20 17:15:00",status:"pending",items:[{name:"接线端子",quantity:3e3,price:62}]},{id:14,code:"CG202403200014",supplier:"贝加莱工业自动化（中国）有限公司",amount:486e3,createTime:"2025-02-20 17:30:00",status:"pending",items:[{name:"工业PC",quantity:15,price:32400}]},{id:15,code:"CG202403200015",supplier:"三菱电机自动化（中国）有限公司",amount:658e3,createTime:"2025-02-20 17:45:00",status:"pending",items:[{name:"PLC控制器",quantity:20,price:18600},{name:"触摸屏",quantity:20,price:14300}]},{id:16,code:"CG202403200016",supplier:"易格斯（上海）有限公司",amount:235e3,createTime:"2025-02-20 18:00:00",status:"pending",items:[{name:"拖链",quantity:50,price:4700}]},{id:17,code:"CG202403200017",supplier:"堡盟电子（上海）有限公司",amount:298e3,createTime:"2025-02-20 18:15:00",status:"pending",items:[{name:"编码器",quantity:100,price:2980}]},{id:18,code:"CG202403200018",supplier:"威图电子机械技术（上海）有限公司",amount:486e3,createTime:"2025-02-20 18:30:00",status:"pending",items:[{name:"控制柜",quantity:30,price:16200}]},{id:19,code:"CG202403200019",supplier:"雷尼绍（上海）贸易有限公司",amount:568e3,createTime:"2025-02-20 18:45:00",status:"pending",items:[{name:"光栅尺",quantity:40,price:14200}]},{id:20,code:"CG202403200020",supplier:"康耐视视觉检测系统（上海）有限公司",amount:486e3,createTime:"2025-02-20 19:00:00",status:"pending",items:[{name:"工业相机",quantity:20,price:15800},{name:"镜头",quantity:20,price:8500}]}]),S=g(100),q=s=>({pending:"warning",approved:"primary",completed:"success",cancelled:"info"})[s]||"info",h=s=>({pending:"待审核",approved:"已审核",completed:"已完成",cancelled:"已取消"})[s]||"未知",x=()=>{o.value.page=1,f()},f=()=>{console.log("加载采购列表:",o.value)},U=()=>{console.log("新增采购单")},E=s=>{V.confirm("确定要审核通过该采购单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("审核采购单:",s),z.success("审核成功")}).catch(()=>{})},F=s=>{u.value=s,C.view=!0},N=s=>{V.confirm("确定要取消该采购单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("取消采购单:",s),z.success("取消成功")}).catch(()=>{})},P=()=>{f()},R=()=>{f()},C=O({view:!1}),u=g(null);return(s,a)=>{const A=i("el-icon"),L=i("el-input"),_=i("el-option"),$=i("el-select"),I=i("el-date-picker"),c=i("el-button"),p=i("el-table-column"),k=i("el-tag"),w=i("el-table"),K=i("el-pagination"),M=i("el-card"),m=i("el-descriptions-item"),D=i("el-descriptions"),H=i("el-divider"),j=i("el-dialog");return y(),Q("div",ee,[e(M,null,{header:t(()=>[v("div",te,[v("div",ae,[e(L,{modelValue:o.value.keyword,"onUpdate:modelValue":a[0]||(a[0]=n=>o.value.keyword=n),placeholder:"请输入采购单号/供应商",style:{width:"300px"},clearable:"",onKeyup:W(x,["enter"])},{prefix:t(()=>[e(A,null,{default:t(()=>[e(X(Y))]),_:1})]),_:1},8,["modelValue"]),e($,{modelValue:o.value.status,"onUpdate:modelValue":a[1]||(a[1]=n=>o.value.status=n),placeholder:"采购状态",clearable:"",style:{width:"120px"}},{default:t(()=>[e(_,{label:"待审核",value:"pending"}),e(_,{label:"已审核",value:"approved"}),e(_,{label:"已完成",value:"completed"}),e(_,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"]),e(I,{modelValue:o.value.dateRange,"onUpdate:modelValue":a[2]||(a[2]=n=>o.value.dateRange=n),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"240px"}},null,8,["modelValue"]),e(c,{type:"primary",onClick:x},{default:t(()=>a[6]||(a[6]=[l("搜索")])),_:1})]),e(c,{type:"primary",onClick:U},{default:t(()=>a[7]||(a[7]=[l("新增采购单")])),_:1})])]),default:t(()=>[v("div",ne,[e(w,{data:B.value,border:"",style:{width:"100%"},height:"100%"},{default:t(()=>[e(p,{prop:"code",label:"采购单号",width:"180"}),e(p,{prop:"supplier",label:"供应商"}),e(p,{prop:"amount",label:"采购金额",width:"120"},{default:t(({row:n})=>[l(" ¥"+r(n.amount.toFixed(2)),1)]),_:1}),e(p,{prop:"createTime",label:"创建时间",width:"180"}),e(p,{prop:"status",label:"状态",width:"100"},{default:t(({row:n})=>[e(k,{type:q(n.status)},{default:t(()=>[l(r(h(n.status)),1)]),_:2},1032,["type"])]),_:1}),e(p,{label:"操作",width:"200",fixed:"right"},{default:t(({row:n})=>[n.status==="pending"?(y(),b(c,{key:0,link:"",type:"primary",onClick:d=>E(n)},{default:t(()=>a[8]||(a[8]=[l(" 审核 ")])),_:2},1032,["onClick"])):T("",!0),e(c,{link:"",type:"primary",onClick:d=>F(n)},{default:t(()=>a[9]||(a[9]=[l("查看")])),_:2},1032,["onClick"]),n.status==="pending"?(y(),b(c,{key:1,link:"",type:"danger",onClick:d=>N(n)},{default:t(()=>a[10]||(a[10]=[l(" 取消 ")])),_:2},1032,["onClick"])):T("",!0)]),_:1})]),_:1},8,["data"])]),v("div",ie,[e(K,{"current-page":o.value.page,"onUpdate:currentPage":a[3]||(a[3]=n=>o.value.page=n),"page-size":o.value.pageSize,"onUpdate:pageSize":a[4]||(a[4]=n=>o.value.pageSize=n),total:S.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:P,onCurrentChange:R},null,8,["current-page","page-size","total"])])]),_:1}),e(j,{modelValue:C.view,"onUpdate:modelValue":a[5]||(a[5]=n=>C.view=n),title:"采购单详情",width:"800px"},{default:t(()=>{var n;return[u.value?(y(),b(D,{key:0,column:2,border:""},{default:t(()=>[e(m,{label:"采购单号"},{default:t(()=>[l(r(u.value.code),1)]),_:1}),e(m,{label:"供应商"},{default:t(()=>[l(r(u.value.supplier),1)]),_:1}),e(m,{label:"采购金额"},{default:t(()=>{var d;return[l("¥"+r((d=u.value.amount)==null?void 0:d.toFixed(2)),1)]}),_:1}),e(m,{label:"创建时间"},{default:t(()=>[l(r(u.value.createTime),1)]),_:1}),e(m,{label:"状态"},{default:t(()=>[e(k,{type:q(u.value.status)},{default:t(()=>[l(r(h(u.value.status)),1)]),_:1},8,["type"])]),_:1})]),_:1})):T("",!0),e(H,null,{default:t(()=>a[11]||(a[11]=[l("采购明细")])),_:1}),e(w,{data:((n=u.value)==null?void 0:n.items)||[],border:"",style:{width:"100%"}},{default:t(()=>[e(p,{prop:"name",label:"商品名称"}),e(p,{prop:"quantity",label:"数量",width:"120"}),e(p,{prop:"price",label:"单价",width:"150"},{default:t(({row:d})=>{var G;return[l(" ¥"+r((G=d.price)==null?void 0:G.toFixed(2)),1)]}),_:1}),e(p,{label:"小计",width:"150"},{default:t(({row:d})=>[l(" ¥"+r((d.price*d.quantity).toFixed(2)),1)]),_:1})]),_:1},8,["data"])]}),_:1},8,["modelValue"])])}}});const pe=Z(le,[["__scopeId","data-v-2dd712d3"]]);export{pe as default};
