import{d as ae,q as g,M as U,c as z,b as e,w as l,r as n,o as q,a as s,J as oe,y as ne,K as ie,h as i,t as p,n as de,F as re,G as M,E as k,H as ue,_ as se}from"./index-10dc1f41.js";const pe={class:"invoice-container"},ce={class:"card-header"},me={class:"left"},_e={class:"table-container"},fe={class:"operation-buttons"},ve=["onClick"],ge=["onClick"],be=["onClick"],ye=["onClick"],xe={class:"pagination-container"},Ve={key:0,class:"preview-container"},he=["src"],ke=ae({__name:"index",setup(we){const d=g({page:1,pageSize:10,keyword:"",type:"",direction:"",dateRange:[]}),w=g([{id:1,code:"044001900211",type:"special",direction:"in",title:"山东临工工程机械有限公司",amount:586e3,taxRate:13,createTime:"2025-03-20 09:30:00",remark:"工业机器人采购",archived:!1},{id:2,code:"044001900212",type:"electronic",direction:"out",title:"青岛海尔生物医疗股份有限公司",amount:468e3,taxRate:13,createTime:"2025-03-20 10:15:00",remark:"医疗机器人系统",archived:!1},{id:3,code:"044001900213",type:"special",direction:"in",title:"西门子（中国）有限公司",amount:325e3,taxRate:13,createTime:"2025-03-19 14:20:00",remark:"PLC控制系统采购",archived:!1},{id:4,code:"044001900214",type:"normal",direction:"out",title:"潍坊智能装备制造有限公司",amount:156e3,taxRate:13,createTime:"2025-03-19 11:30:00",remark:"机器人配件销售",archived:!1},{id:5,code:"044001900215",type:"electronic",direction:"in",title:"发那科机器人（中国）有限公司",amount:892e3,taxRate:13,createTime:"2025-03-18 16:45:00",remark:"工业机器人整机采购",archived:!1},{id:6,code:"044001900216",type:"special",direction:"out",title:"济南二机床集团有限公司",amount:235e3,taxRate:13,createTime:"2025-03-18 09:20:00",remark:"机器人系统集成服务",archived:!1},{id:7,code:"044001900217",type:"normal",direction:"in",title:"安川电机（中国）有限公司",amount:445e3,taxRate:13,createTime:"2025-03-17 15:30:00",remark:"伺服电机采购",archived:!1},{id:8,code:"044001900218",type:"electronic",direction:"out",title:"山东重工集团有限公司",amount:678e3,taxRate:13,createTime:"2025-03-17 10:45:00",remark:"智能制造解决方案",archived:!1},{id:9,code:"044001900219",type:"special",direction:"in",title:"基恩士（中国）有限公司",amount:168e3,taxRate:13,createTime:"2025-03-16 14:15:00",remark:"视觉系统采购",archived:!1},{id:10,code:"044001900220",type:"normal",direction:"out",title:"青岛软控机电工程有限公司",amount:389e3,taxRate:13,createTime:"2025-03-16 11:20:00",remark:"机器人应用方案",archived:!1},{id:11,code:"044001900221",type:"electronic",direction:"in",title:"ABB（中国）有限公司",amount:756e3,taxRate:13,createTime:"2025-03-15 16:30:00",remark:"机器人控制系统",archived:!1},{id:12,code:"044001900222",type:"special",direction:"out",title:"山东科技职业学院",amount:245e3,taxRate:6,createTime:"2025-03-15 09:45:00",remark:"教学实训设备",archived:!1}]),N=g(100),m=U({form:!1,view:!1}),x=g("add"),B=g({}),c=g({}),o=U({type:"",direction:"",code:"",title:"",amount:0,taxRate:13,createTime:"",remark:"",file:null}),K=U({type:[{required:!0,message:"请选择发票类型",trigger:"change"}],direction:[{required:!0,message:"请选择开票方向",trigger:"change"}],code:[{required:!0,message:"请输入发票号码",trigger:"blur"}],title:[{required:!0,message:"请输入发票抬头",trigger:"blur"}],amount:[{required:!0,message:"请输入金额",trigger:"blur"}],taxRate:[{required:!0,message:"请选择税率",trigger:"change"}],createTime:[{required:!0,message:"请选择开票日期",trigger:"change"}]}),R=g(),S=r=>({special:"增值税专票",normal:"增值税普票",electronic:"电子发票"})[r]||"未知",D=r=>({in:"收到",out:"开出"})[r]||"未知",E=()=>{d.value.page=1,T()},T=()=>{console.log("加载发票列表:",d.value)},O=()=>{x.value="add",Object.assign(o,{type:"",direction:"",code:"",title:"",amount:0,taxRate:13,createTime:"",remark:"",file:null}),m.form=!0},A=r=>{x.value="edit",Object.assign(o,r),B.value=r,m.form=!0},L=r=>{c.value=r,m.view=!0},P=r=>{k.success("开始下载")},G=r=>{ue.confirm("确定要删除该发票记录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("删除发票:",r),k.success("删除成功")}).catch(()=>{})},H=()=>{T()},I=()=>{T()},J=async()=>{R.value&&await R.value.validate(r=>{r&&(x.value==="add"?(w.value.unshift({id:w.value.length+1,...o,archived:!1}),k.success("添加成功")):(Object.assign(B.value,o),k.success("修改成功")),m.form=!1)})};return(r,a)=>{const Q=n("el-icon"),V=n("el-input"),u=n("el-option"),b=n("el-select"),$=n("el-date-picker"),y=n("el-button"),f=n("el-table-column"),W=n("el-table"),X=n("el-pagination"),Y=n("el-card"),_=n("el-form-item"),h=n("el-col"),j=n("el-row"),Z=n("el-input-number"),ee=n("el-upload"),te=n("el-form"),F=n("el-dialog"),v=n("el-descriptions-item"),le=n("el-descriptions");return q(),z("div",pe,[e(Y,null,{header:l(()=>[s("div",ce,[s("div",me,[e(V,{modelValue:d.value.keyword,"onUpdate:modelValue":a[0]||(a[0]=t=>d.value.keyword=t),placeholder:"请输入发票号码/抬头",style:{width:"300px"},clearable:"",onKeyup:oe(E,["enter"])},{prefix:l(()=>[e(Q,null,{default:l(()=>[e(ne(ie))]),_:1})]),_:1},8,["modelValue"]),e(b,{modelValue:d.value.type,"onUpdate:modelValue":a[1]||(a[1]=t=>d.value.type=t),placeholder:"发票类型",clearable:"",style:{width:"120px"}},{default:l(()=>[e(u,{label:"增值税专票",value:"special"}),e(u,{label:"增值税普票",value:"normal"}),e(u,{label:"电子发票",value:"electronic"})]),_:1},8,["modelValue"]),e(b,{modelValue:d.value.direction,"onUpdate:modelValue":a[2]||(a[2]=t=>d.value.direction=t),placeholder:"开票方向",clearable:"",style:{width:"120px"}},{default:l(()=>[e(u,{label:"开出",value:"out"}),e(u,{label:"收到",value:"in"})]),_:1},8,["modelValue"]),e($,{modelValue:d.value.dateRange,"onUpdate:modelValue":a[3]||(a[3]=t=>d.value.dateRange=t),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"240px"}},null,8,["modelValue"]),e(y,{type:"primary",onClick:E},{default:l(()=>a[17]||(a[17]=[i("搜索")])),_:1})]),e(y,{type:"primary",onClick:O},{default:l(()=>a[18]||(a[18]=[i("新增发票")])),_:1})])]),default:l(()=>[s("div",_e,[e(W,{data:w.value,border:"",style:{width:"100%"},height:"100%"},{default:l(()=>[e(f,{prop:"code",label:"发票号码",width:"180"}),e(f,{prop:"type",label:"发票类型",width:"120"},{default:l(({row:t})=>[i(p(S(t.type)),1)]),_:1}),e(f,{prop:"direction",label:"开票方向",width:"100"},{default:l(({row:t})=>[i(p(D(t.direction)),1)]),_:1}),e(f,{prop:"title",label:"发票抬头","min-width":"200"}),e(f,{prop:"amount",label:"金额",width:"120"},{default:l(({row:t})=>[s("span",{class:de(t.direction==="in"?"amount-up":"amount-down")}," ¥"+p(t.amount.toFixed(2)),3)]),_:1}),e(f,{prop:"taxRate",label:"税率",width:"100"},{default:l(({row:t})=>[i(p(t.taxRate)+"% ",1)]),_:1}),e(f,{prop:"createTime",label:"开票日期",width:"180"}),e(f,{label:"操作",width:"180",fixed:"right"},{default:l(({row:t})=>[s("div",fe,[s("a",{onClick:C=>L(t)},"查看",8,ve),s("a",{onClick:C=>P(t)},"下载",8,ge),t.archived?M("",!0):(q(),z(re,{key:0},[s("a",{onClick:C=>A(t)},"编辑",8,be),s("a",{class:"danger",onClick:C=>G(t)},"删除",8,ye)],64))])]),_:1})]),_:1},8,["data"])]),s("div",xe,[e(X,{"current-page":d.value.page,"onUpdate:currentPage":a[4]||(a[4]=t=>d.value.page=t),"page-size":d.value.pageSize,"onUpdate:pageSize":a[5]||(a[5]=t=>d.value.pageSize=t),total:N.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:H,onCurrentChange:I},null,8,["current-page","page-size","total"])])]),_:1}),e(F,{modelValue:m.form,"onUpdate:modelValue":a[15]||(a[15]=t=>m.form=t),title:x.value==="add"?"新增发票":"编辑发票",width:"700px"},{footer:l(()=>[e(y,{onClick:a[14]||(a[14]=t=>m.form=!1)},{default:l(()=>a[21]||(a[21]=[i("取消")])),_:1}),e(y,{type:"primary",onClick:J},{default:l(()=>a[22]||(a[22]=[i("确定")])),_:1})]),default:l(()=>[e(te,{ref_key:"formRef",ref:R,model:o,rules:K,"label-width":"100px"},{default:l(()=>[e(j,{gutter:20},{default:l(()=>[e(h,{span:12},{default:l(()=>[e(_,{label:"发票类型",prop:"type"},{default:l(()=>[e(b,{modelValue:o.type,"onUpdate:modelValue":a[6]||(a[6]=t=>o.type=t),placeholder:"请选择发票类型",style:{width:"100%"}},{default:l(()=>[e(u,{label:"增值税专票",value:"special"}),e(u,{label:"增值税普票",value:"normal"}),e(u,{label:"电子发票",value:"electronic"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(h,{span:12},{default:l(()=>[e(_,{label:"开票方向",prop:"direction"},{default:l(()=>[e(b,{modelValue:o.direction,"onUpdate:modelValue":a[7]||(a[7]=t=>o.direction=t),placeholder:"请选择开票方向",style:{width:"100%"}},{default:l(()=>[e(u,{label:"开出",value:"out"}),e(u,{label:"收到",value:"in"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{label:"发票号码",prop:"code"},{default:l(()=>[e(V,{modelValue:o.code,"onUpdate:modelValue":a[8]||(a[8]=t=>o.code=t),placeholder:"请输入发票号码"},null,8,["modelValue"])]),_:1}),e(_,{label:"发票抬头",prop:"title"},{default:l(()=>[e(V,{modelValue:o.title,"onUpdate:modelValue":a[9]||(a[9]=t=>o.title=t),placeholder:"请输入发票抬头"},null,8,["modelValue"])]),_:1}),e(j,{gutter:20},{default:l(()=>[e(h,{span:12},{default:l(()=>[e(_,{label:"金额",prop:"amount"},{default:l(()=>[e(Z,{modelValue:o.amount,"onUpdate:modelValue":a[10]||(a[10]=t=>o.amount=t),precision:2,step:1e3,min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(h,{span:12},{default:l(()=>[e(_,{label:"税率",prop:"taxRate"},{default:l(()=>[e(b,{modelValue:o.taxRate,"onUpdate:modelValue":a[11]||(a[11]=t=>o.taxRate=t),placeholder:"请选择税率",style:{width:"100%"}},{default:l(()=>[e(u,{label:"13%",value:13}),e(u,{label:"9%",value:9}),e(u,{label:"6%",value:6}),e(u,{label:"3%",value:3})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{label:"开票日期",prop:"createTime"},{default:l(()=>[e($,{modelValue:o.createTime,"onUpdate:modelValue":a[12]||(a[12]=t=>o.createTime=t),type:"datetime",placeholder:"选择开票日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(_,{label:"备注",prop:"remark"},{default:l(()=>[e(V,{modelValue:o.remark,"onUpdate:modelValue":a[13]||(a[13]=t=>o.remark=t),type:"textarea",rows:3,placeholder:"请输入备注"},null,8,["modelValue"])]),_:1}),e(_,{label:"发票文件",prop:"file"},{default:l(()=>[e(ee,{class:"upload-demo",action:"#","auto-upload":!1,limit:1},{trigger:l(()=>[e(y,{type:"primary"},{default:l(()=>a[19]||(a[19]=[i("选择文件")])),_:1})]),tip:l(()=>a[20]||(a[20]=[s("div",{class:"el-upload__tip"}," 支持jpg/png/pdf格式，单个文件不超过10MB ",-1)])),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),e(F,{modelValue:m.view,"onUpdate:modelValue":a[16]||(a[16]=t=>m.view=t),title:"发票详情",width:"800px"},{default:l(()=>[e(le,{column:2,border:""},{default:l(()=>[e(v,{label:"发票号码"},{default:l(()=>[i(p(c.value.code),1)]),_:1}),e(v,{label:"发票类型"},{default:l(()=>[i(p(S(c.value.type)),1)]),_:1}),e(v,{label:"开票方向"},{default:l(()=>[i(p(D(c.value.direction)),1)]),_:1}),e(v,{label:"发票抬头"},{default:l(()=>[i(p(c.value.title),1)]),_:1}),e(v,{label:"金额"},{default:l(()=>{var t;return[i("¥"+p((t=c.value.amount)==null?void 0:t.toFixed(2)),1)]}),_:1}),e(v,{label:"税率"},{default:l(()=>[i(p(c.value.taxRate)+"%",1)]),_:1}),e(v,{label:"开票日期"},{default:l(()=>[i(p(c.value.createTime),1)]),_:1}),e(v,{label:"备注"},{default:l(()=>[i(p(c.value.remark),1)]),_:1})]),_:1}),c.value.fileUrl?(q(),z("div",Ve,[s("img",{src:c.value.fileUrl,alt:"发票预览",style:{"max-width":"100%","margin-top":"20px"}},null,8,he)])):M("",!0)]),_:1},8,["modelValue"])])}}});const Te=se(ke,[["__scopeId","data-v-00a6bbfa"]]);export{Te as default};
