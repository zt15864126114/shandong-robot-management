import{i as g}from"./index-18acf776.js";import{d as D,q as h,v as B,c as I,b as e,w as l,r as s,o as U,a,h as y,t as d,n as b,E as A,_ as L}from"./index-10dc1f41.js";const M={class:"statement-container"},N={class:"card-header"},O={class:"left"},P={class:"summary-cards"},$={class:"number up"},q={class:"number down"},T={class:"number up"},X={class:"table-container"},j={class:"amount-up"},G={class:"amount-down"},H={class:"pagination-container"},J=D({__name:"index",setup(K){const r=h({page:1,pageSize:10,type:"income-expense",period:"month",dateRange:[]}),w=h([{date:"2025-02",income:4358e3,expense:3137500,profit:1220500,profitRate:28,remark:"新产品销售增长"},{date:"2025-02-W4",income:1268e3,expense:986500,profit:281500,profitRate:22.2,remark:"第四周销售情况良好"},{date:"2025-02-W3",income:1156e3,expense:856e3,profit:3e5,profitRate:25.9,remark:"新客户订单增加"},{date:"2025-02-W2",income:985e3,expense:685e3,profit:3e5,profitRate:30.5,remark:"成本控制效果显现"},{date:"2025-02-W1",income:949e3,expense:61e4,profit:339e3,profitRate:35.7,remark:"月初订单交付"},{date:"2025-02",income:3685e3,expense:2235600,profit:1449400,profitRate:39.3,remark:"春节期间开支减少"},{date:"2025-02-W4",income:986e3,expense:586e3,profit:4e5,profitRate:40.6,remark:"春节后订单恢复"},{date:"2025-02-W3",income:856e3,expense:485e3,profit:371e3,profitRate:43.3,remark:"春节期间固定支出减少"},{date:"2025-02-W2",income:968e3,expense:586e3,profit:382e3,profitRate:39.5,remark:"春节前集中交付"},{date:"2025-02-W1",income:875e3,expense:578600,profit:296400,profitRate:33.9,remark:"月初正常经营"},{date:"2025-01",income:3268e3,expense:2568e3,profit:7e5,profitRate:21.4,remark:"年初开支较大"},{date:"2025-01-W4",income:856e3,expense:685e3,profit:171e3,profitRate:20,remark:"月末设备采购"},{date:"2025-01-W3",income:785e3,expense:625e3,profit:16e4,profitRate:20.4,remark:"研发投入增加"},{date:"2025-01-W2",income:868e3,expense:658e3,profit:21e4,profitRate:24.2,remark:"新项目启动"},{date:"2025-01-W1",income:759e3,expense:6e5,profit:159e3,profitRate:20.9,remark:"年初例行支出"}]),k=h(100),m={totalIncome:11311e3,totalExpense:7941100,totalProfit:3369900,monthlyData:{income:[3268e3,3685e3,4358e3],expense:[2568e3,2235600,3137500],profit:[7e5,1449400,1220500]},weeklyData:{income:[759e3,868e3,785e3,856e3,875e3,968e3,856e3,986e3,949e3,985e3,1156e3,1268e3],expense:[6e5,658e3,625e3,685e3,578600,586e3,485e3,586e3,61e4,685e3,856e3,986500],profit:[159e3,21e4,16e4,171e3,296400,382e3,371e3,4e5,339e3,3e5,3e5,281500]}},C=()=>{r.value.page=1,f()},f=()=>{console.log("加载报表数据:",r.value)},R=()=>{A.success("报表导出成功")},S=()=>{f()},F=()=>{f()},V=()=>{const v=g(document.getElementById("trendChart")),t=r.value.period==="week"?m.weeklyData:m.monthlyData,i=r.value.period==="week"?["1月第1周","1月第2周","1月第3周","1月第4周","2月第1周","2月第2周","2月第3周","2月第4周","3月第1周","3月第2周","3月第3周","3月第4周"]:["1月","2月","3月"];v.setOption({title:{text:""},tooltip:{trigger:"axis",formatter:function(n){let u=n[0].axisValue+"<br/>";return n.forEach(p=>{u+=`${p.seriesName}: ¥${(p.value*1e4).toLocaleString()}<br/>`}),u}},legend:{data:["收入","支出","利润"]},xAxis:{type:"category",data:i},yAxis:{type:"value",min:n=>Math.floor(n.min/50)*50,max:n=>Math.ceil(n.max/50)*50,axisLabel:{formatter:n=>`${n}万`}},series:[{name:"收入",type:"line",data:t.income.map(n=>+(n/1e4).toFixed(1)),smooth:!0,itemStyle:{color:"#67C23A"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(103, 194, 58, 0.2)"},{offset:1,color:"rgba(103, 194, 58, 0)"}]}}},{name:"支出",type:"line",data:t.expense.map(n=>+(n/1e4).toFixed(1)),smooth:!0,itemStyle:{color:"#F56C6C"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(245, 108, 108, 0.2)"},{offset:1,color:"rgba(245, 108, 108, 0)"}]}}},{name:"利润",type:"line",data:t.profit.map(n=>+(n/1e4).toFixed(1)),smooth:!0,itemStyle:{color:"#409EFF"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(64, 158, 255, 0.2)"},{offset:1,color:"rgba(64, 158, 255, 0)"}]}}}]}),g(document.getElementById("incomeChart")).setOption({title:{text:""},tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{type:"pie",radius:"50%",data:[{value:75,name:"工业机器人"},{value:15,name:"技术服务"},{value:7,name:"配件销售"},{value:3,name:"其他收入"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})};return B(()=>{V()}),(v,t)=>{const i=s("el-option"),_=s("el-select"),n=s("el-date-picker"),u=s("el-button"),p=s("el-card"),x=s("el-col"),W=s("el-row"),c=s("el-table-column"),z=s("el-table"),E=s("el-pagination");return U(),I("div",M,[e(p,null,{header:l(()=>[a("div",N,[a("div",O,[e(_,{modelValue:r.value.type,"onUpdate:modelValue":t[0]||(t[0]=o=>r.value.type=o),placeholder:"报表类型",style:{width:"120px"}},{default:l(()=>[e(i,{label:"收支统计",value:"income-expense"}),e(i,{label:"利润分析",value:"profit"}),e(i,{label:"现金流量",value:"cash-flow"})]),_:1},8,["modelValue"]),e(_,{modelValue:r.value.period,"onUpdate:modelValue":t[1]||(t[1]=o=>r.value.period=o),placeholder:"统计周期",style:{width:"120px"}},{default:l(()=>[e(i,{label:"按日",value:"day"}),e(i,{label:"按周",value:"week"}),e(i,{label:"按月",value:"month"}),e(i,{label:"按年",value:"year"})]),_:1},8,["modelValue"]),e(n,{modelValue:r.value.dateRange,"onUpdate:modelValue":t[2]||(t[2]=o=>r.value.dateRange=o),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"240px"}},null,8,["modelValue"]),e(u,{type:"primary",onClick:C},{default:l(()=>t[5]||(t[5]=[y("查询")])),_:1})]),e(u,{type:"primary",onClick:R},{default:l(()=>t[6]||(t[6]=[y("导出报表")])),_:1})])]),default:l(()=>[a("div",P,[e(W,{gutter:20},{default:l(()=>[e(x,{span:8},{default:l(()=>[e(p,{shadow:"hover",class:"data-card"},{default:l(()=>[t[7]||(t[7]=a("h3",null,"总收入",-1)),a("div",$,"¥"+d(m.totalIncome.toFixed(2)),1)]),_:1})]),_:1}),e(x,{span:8},{default:l(()=>[e(p,{shadow:"hover",class:"data-card"},{default:l(()=>[t[8]||(t[8]=a("h3",null,"总支出",-1)),a("div",q,"¥"+d(m.totalExpense.toFixed(2)),1)]),_:1})]),_:1}),e(x,{span:8},{default:l(()=>[e(p,{shadow:"hover",class:"data-card"},{default:l(()=>[t[9]||(t[9]=a("h3",null,"净利润",-1)),a("div",T,"¥"+d(m.totalProfit.toFixed(2)),1)]),_:1})]),_:1})]),_:1})]),t[10]||(t[10]=a("div",{class:"chart-container"},[a("div",{class:"chart-wrapper"},[a("div",{class:"chart-title"},"收支趋势图"),a("div",{id:"trendChart",style:{height:"300px"}})]),a("div",{class:"chart-wrapper"},[a("div",{class:"chart-title"},"收入构成"),a("div",{id:"incomeChart",style:{height:"300px"}})])],-1)),a("div",X,[e(z,{data:w.value,border:"",style:{width:"100%"},height:"100%"},{default:l(()=>[e(c,{prop:"date",label:"日期",width:"120"}),e(c,{prop:"income",label:"收入",width:"150"},{default:l(({row:o})=>[a("span",j,"¥"+d(o.income.toFixed(2)),1)]),_:1}),e(c,{prop:"expense",label:"支出",width:"150"},{default:l(({row:o})=>[a("span",G,"¥"+d(o.expense.toFixed(2)),1)]),_:1}),e(c,{prop:"profit",label:"利润",width:"150"},{default:l(({row:o})=>[a("span",{class:b(o.profit>=0?"amount-up":"amount-down")}," ¥"+d(o.profit.toFixed(2)),3)]),_:1}),e(c,{prop:"profitRate",label:"利润率",width:"120"},{default:l(({row:o})=>[a("span",{class:b(o.profitRate>=0?"amount-up":"amount-down")},d(o.profitRate.toFixed(2))+"% ",3)]),_:1}),e(c,{prop:"remark",label:"备注","show-overflow-tooltip":""})]),_:1},8,["data"])]),a("div",H,[e(E,{"current-page":r.value.page,"onUpdate:currentPage":t[3]||(t[3]=o=>r.value.page=o),"page-size":r.value.pageSize,"onUpdate:pageSize":t[4]||(t[4]=o=>r.value.pageSize=o),total:k.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:S,onCurrentChange:F},null,8,["current-page","page-size","total"])])]),_:1})])}}});const Z=L(J,[["__scopeId","data-v-97f09993"]]);export{Z as default};
