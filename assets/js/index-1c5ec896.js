import{d as I,q as _,M as T,c as J,b as e,w as a,r as l,o as P,a as r,J as Q,y as W,K as X,h as p,t as f,H as ee,E as Z,_ as te}from"./index-a2ee136b.js";const ae={class:"expense-container"},oe={class:"card-header"},le={class:"left"},re={class:"summary-cards"},ne={class:"number down"},se={class:"number down"},de={class:"number down"},ue={class:"number down"},pe={class:"table-container"},ie={class:"amount-down"},me={class:"pagination-container"},ce=I({__name:"index",setup(_e){const s=_({page:1,pageSize:10,keyword:"",type:"",dateRange:[]}),h=_([{id:1,code:"ZC202403200001",type:"purchase",purpose:"采购工业机器人核心部件",amount:285600,createTime:"2025-02-20 09:30:00",remark:"用于新产品研发"},{id:2,code:"ZC202403200002",type:"salary",purpose:"研发部门工资",amount:458900,createTime:"2025-02-20 10:15:00",remark:"3月份工资"},{id:3,code:"ZC202403200003",type:"purchase",purpose:"采购传感器模块",amount:156800,createTime:"2025-02-20 11:20:00",remark:"智能控制系统升级"},{id:4,code:"ZC202403200004",type:"other",purpose:"办公设备更新",amount:89500,createTime:"2025-02-20 13:45:00",remark:"更新研发部门设备"},{id:5,code:"ZC202403200005",type:"purchase",purpose:"原材料采购",amount:235600,createTime:"2025-02-20 14:30:00",remark:"生产线原材料补充"},{id:6,code:"ZC202403200006",type:"other",purpose:"研发实验室装修",amount:168e3,createTime:"2025-02-20 15:10:00",remark:"新建机器人测试实验室"},{id:7,code:"ZC202403200007",type:"purchase",purpose:"采购测试设备",amount:198500,createTime:"2025-02-20 15:45:00",remark:"质量检测设备更新"},{id:8,code:"ZC202403200008",type:"salary",purpose:"生产部门工资",amount:386500,createTime:"2025-02-20 16:00:00",remark:"3月份工资"},{id:9,code:"ZC202403200009",type:"purchase",purpose:"采购机器人控制系统",amount:326800,createTime:"2025-02-20 16:15:00",remark:"新一代控制系统升级"},{id:10,code:"ZC202403200010",type:"other",purpose:"员工培训费用",amount:85600,createTime:"2025-02-20 16:30:00",remark:"技术人员专业培训"},{id:11,code:"ZC202403200011",type:"purchase",purpose:"采购伺服电机",amount:178500,createTime:"2025-02-20 16:45:00",remark:"机器人关节驱动系统"},{id:12,code:"ZC202403200012",type:"salary",purpose:"管理部门工资",amount:265e3,createTime:"2025-02-20 17:00:00",remark:"3月份工资"},{id:13,code:"ZC202403200013",type:"other",purpose:"软件系统授权",amount:156e3,createTime:"2025-02-20 17:15:00",remark:"工业软件年度授权"},{id:14,code:"ZC202403200014",type:"purchase",purpose:"采购工业相机",amount:145800,createTime:"2025-02-20 17:30:00",remark:"机器视觉系统升级"}]),M=_(100),v={currentMonth:3137500,lastMonth:2235600,currentYear:8956e3,yearGrowth:15.8},B=d=>({purchase:"采购支出",salary:"工资支出",other:"其他支出"})[d]||"未知",S=()=>{s.value.page=1,x()},x=()=>{console.log("加载支出列表:",s.value)},i=T({form:!1}),b=_("add"),z=_({}),n=T({type:"",purpose:"",amount:0,remark:""}),E=T({type:[{required:!0,message:"请选择支出类型",trigger:"change"}],purpose:[{required:!0,message:"请输入支出用途",trigger:"blur"}],amount:[{required:!0,message:"请输入支出金额",trigger:"blur"}]}),V=_(),R=()=>{b.value="add",Object.assign(n,{type:"",purpose:"",amount:0,remark:""}),i.form=!0},q=d=>{b.value="edit",Object.assign(n,{type:d.type,purpose:d.purpose,amount:d.amount,remark:d.remark}),z.value=d,i.form=!0},F=d=>{ee.confirm("确定要删除该支出记录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("删除支出:",d),Z.success("删除成功")}).catch(()=>{})},$=()=>{x()},N=()=>{x()},j=async()=>{V.value&&await V.value.validate(d=>{if(d){const k=new Date().toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/\//g,"-");if(b.value==="add"){const y=`ZC${k.replace(/[-: ]/g,"").slice(0,12)}${String(h.value.length+1).padStart(4,"0")}`;h.value.unshift({id:h.value.length+1,code:y,...n,createTime:k}),Z.success("添加成功")}else Object.assign(z.value,n),Z.success("修改成功");i.form=!1}})};return(d,t)=>{const k=l("el-icon"),y=l("el-input"),m=l("el-option"),U=l("el-select"),D=l("el-date-picker"),c=l("el-button"),g=l("el-card"),w=l("el-col"),K=l("el-row"),u=l("el-table-column"),L=l("el-table"),O=l("el-pagination"),C=l("el-form-item"),G=l("el-input-number"),Y=l("el-form"),A=l("el-dialog");return P(),J("div",ae,[e(g,null,{header:a(()=>[r("div",oe,[r("div",le,[e(y,{modelValue:s.value.keyword,"onUpdate:modelValue":t[0]||(t[0]=o=>s.value.keyword=o),placeholder:"请输入支出单号/用途",style:{width:"300px"},clearable:"",onKeyup:Q(S,["enter"])},{prefix:a(()=>[e(k,null,{default:a(()=>[e(W(X))]),_:1})]),_:1},8,["modelValue"]),e(U,{modelValue:s.value.type,"onUpdate:modelValue":t[1]||(t[1]=o=>s.value.type=o),placeholder:"支出类型",clearable:"",style:{width:"120px"}},{default:a(()=>[e(m,{label:"采购支出",value:"purchase"}),e(m,{label:"工资支出",value:"salary"}),e(m,{label:"其他支出",value:"other"})]),_:1},8,["modelValue"]),e(D,{modelValue:s.value.dateRange,"onUpdate:modelValue":t[2]||(t[2]=o=>s.value.dateRange=o),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"240px"}},null,8,["modelValue"]),e(c,{type:"primary",onClick:S},{default:a(()=>t[11]||(t[11]=[p("搜索")])),_:1})]),e(c,{type:"primary",onClick:R},{default:a(()=>t[12]||(t[12]=[p("新增支出")])),_:1})])]),default:a(()=>[r("div",re,[e(K,{gutter:20},{default:a(()=>[e(w,{span:6},{default:a(()=>[e(g,{shadow:"hover",class:"data-card"},{default:a(()=>[t[13]||(t[13]=r("h3",null,"本月支出",-1)),r("div",ne,"¥"+f(v.currentMonth.toFixed(2)),1)]),_:1})]),_:1}),e(w,{span:6},{default:a(()=>[e(g,{shadow:"hover",class:"data-card"},{default:a(()=>[t[14]||(t[14]=r("h3",null,"上月支出",-1)),r("div",se,"¥"+f(v.lastMonth.toFixed(2)),1)]),_:1})]),_:1}),e(w,{span:6},{default:a(()=>[e(g,{shadow:"hover",class:"data-card"},{default:a(()=>[t[15]||(t[15]=r("h3",null,"本年支出",-1)),r("div",de,"¥"+f(v.currentYear.toFixed(2)),1)]),_:1})]),_:1}),e(w,{span:6},{default:a(()=>[e(g,{shadow:"hover",class:"data-card"},{default:a(()=>[t[16]||(t[16]=r("h3",null,"同比增长",-1)),r("div",ue,"+"+f(v.yearGrowth.toFixed(1))+"%",1)]),_:1})]),_:1})]),_:1})]),r("div",pe,[e(L,{data:h.value,border:"",style:{width:"100%"},height:"100%"},{default:a(()=>[e(u,{prop:"code",label:"支出单号",width:"180"}),e(u,{prop:"type",label:"支出类型",width:"120"},{default:a(({row:o})=>[p(f(B(o.type)),1)]),_:1}),e(u,{prop:"purpose",label:"支出用途"}),e(u,{prop:"amount",label:"支出金额",width:"120"},{default:a(({row:o})=>[r("span",ie,"¥"+f(o.amount.toFixed(2)),1)]),_:1}),e(u,{prop:"createTime",label:"创建时间",width:"180"}),e(u,{prop:"remark",label:"备注","show-overflow-tooltip":""}),e(u,{label:"操作",width:"120",fixed:"right"},{default:a(({row:o})=>[e(c,{link:"",type:"primary",onClick:H=>q(o)},{default:a(()=>t[17]||(t[17]=[p("编辑")])),_:2},1032,["onClick"]),e(c,{link:"",type:"danger",onClick:H=>F(o)},{default:a(()=>t[18]||(t[18]=[p("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),r("div",me,[e(O,{"current-page":s.value.page,"onUpdate:currentPage":t[3]||(t[3]=o=>s.value.page=o),"page-size":s.value.pageSize,"onUpdate:pageSize":t[4]||(t[4]=o=>s.value.pageSize=o),total:M.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:$,onCurrentChange:N},null,8,["current-page","page-size","total"])])]),_:1}),e(A,{modelValue:i.form,"onUpdate:modelValue":t[10]||(t[10]=o=>i.form=o),title:b.value==="add"?"新增支出":"编辑支出",width:"600px"},{footer:a(()=>[e(c,{onClick:t[9]||(t[9]=o=>i.form=!1)},{default:a(()=>t[19]||(t[19]=[p("取消")])),_:1}),e(c,{type:"primary",onClick:j},{default:a(()=>t[20]||(t[20]=[p("确定")])),_:1})]),default:a(()=>[e(Y,{ref_key:"formRef",ref:V,model:n,rules:E,"label-width":"100px"},{default:a(()=>[e(C,{label:"支出类型",prop:"type"},{default:a(()=>[e(U,{modelValue:n.type,"onUpdate:modelValue":t[5]||(t[5]=o=>n.type=o),placeholder:"请选择支出类型",style:{width:"100%"}},{default:a(()=>[e(m,{label:"采购支出",value:"purchase"}),e(m,{label:"工资支出",value:"salary"}),e(m,{label:"其他支出",value:"other"})]),_:1},8,["modelValue"])]),_:1}),e(C,{label:"支出用途",prop:"purpose"},{default:a(()=>[e(y,{modelValue:n.purpose,"onUpdate:modelValue":t[6]||(t[6]=o=>n.purpose=o),placeholder:"请输入支出用途"},null,8,["modelValue"])]),_:1}),e(C,{label:"支出金额",prop:"amount"},{default:a(()=>[e(G,{modelValue:n.amount,"onUpdate:modelValue":t[7]||(t[7]=o=>n.amount=o),precision:2,step:100,min:0,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(C,{label:"备注",prop:"remark"},{default:a(()=>[e(y,{modelValue:n.remark,"onUpdate:modelValue":t[8]||(t[8]=o=>n.remark=o),type:"textarea",rows:3,placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});const ye=te(ce,[["__scopeId","data-v-51b57ddd"]]);export{ye as default};
