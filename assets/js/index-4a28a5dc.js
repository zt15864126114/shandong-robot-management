import{d as se,r as w,H as z,c as h,b as e,w as l,f as a,g,e as d,B as ae,u as ne,C as ie,i as u,t as m,k as U,y as B,F as R,h as j,z as ue,E as $,_ as de}from"./index-e75d186a.js";const re={class:"service-container"},ce={class:"card-header"},pe={class:"left"},me={class:"summary-cards"},ge={class:"table-container"},ve={class:"pagination-container"},fe={key:0},_e={class:"time"},ye={class:"content"},be={key:1},we=se({__name:"index",setup(he){const c=w({page:1,pageSize:10,keyword:"",status:"",type:""}),N=w([{id:1,code:"GD202403200001",customer:"山东临工工程机械有限公司",type:"complaint",status:"pending",title:"机械臂响应延迟问题",createTime:"2025-02-20 09:30:00"},{id:2,code:"GD202403200002",customer:"青岛海尔生物医疗股份有限公司",type:"consult",status:"processing",title:"新产品技术咨询",createTime:"2025-02-20 10:15:00"},{id:3,code:"GD202403200003",customer:"山东新华医疗器械股份有限公司",type:"suggestion",status:"completed",title:"产品功能优化建议",createTime:"2025-02-20 11:20:00"},{id:4,code:"GD202403200004",customer:"浪潮电子信息产业股份有限公司",type:"complaint",status:"processing",title:"系统稳定性问题",createTime:"2025-02-20 13:45:00"},{id:5,code:"GD202403200005",customer:"中通客车控股股份有限公司",type:"consult",status:"pending",title:"产品升级咨询",createTime:"2025-02-20 14:30:00"},{id:6,code:"GD202403200006",customer:"山东魏桥创业集团有限公司",type:"complaint",status:"completed",title:"设备运行噪音问题",createTime:"2025-02-20 15:10:00",processNotes:[{time:"2025-02-20 15:10:00",content:"客户反馈设备运行时噪音较大"},{time:"2025-02-20 16:20:00",content:"技术人员现场检查，更换了减震部件"},{time:"2025-02-20 17:30:00",content:"问题已解决，客户确认验收"}]},{id:7,code:"GD202403200007",customer:"山东晨鸣纸业集团股份有限公司",type:"suggestion",status:"processing",title:"自动化流程优化建议",createTime:"2025-02-20 15:45:00",processNotes:[{time:"2025-02-20 15:45:00",content:"客户建议优化生产线自动化流程"},{time:"2025-02-20 16:30:00",content:"技术团队评估可行性，制定优化方案"}]},{id:8,code:"GD202403200008",customer:"山东东宏管业股份有限公司",type:"consult",status:"closed",title:"产品升级方案咨询",createTime:"2025-02-20 16:00:00",processNotes:[{time:"2025-02-20 16:00:00",content:"客户咨询现有设备升级方案"},{time:"2025-02-20 16:45:00",content:"因客户预算调整，暂时关闭工单"}]},{id:9,code:"GD202403200009",customer:"山东临工工程机械有限公司",type:"complaint",status:"processing",title:"控制系统偶发性故障",createTime:"2025-02-20 16:15:00",processNotes:[{time:"2025-02-20 16:15:00",content:"客户反馈控制系统偶发性无响应"},{time:"2025-02-20 17:00:00",content:"远程诊断中，疑似软件版本问题"}]},{id:10,code:"GD202403200010",customer:"青岛海尔生物医疗股份有限公司",type:"suggestion",status:"pending",title:"人机交互界面优化建议",createTime:"2025-02-20 16:30:00"},{id:11,code:"GD202403200011",customer:"浪潮电子信息产业股份有限公司",type:"consult",status:"completed",title:"系统集成方案咨询",createTime:"2025-02-20 16:45:00",processNotes:[{time:"2025-02-20 16:45:00",content:"客户咨询系统集成解决方案"},{time:"2025-02-20 17:15:00",content:"提供详细的技术方案和报价"},{time:"2025-02-20 17:45:00",content:"客户确认方案可行，工单结束"}]},{id:12,code:"GD202403200012",customer:"中通客车控股股份有限公司",type:"complaint",status:"pending",title:"设备通信异常报警",createTime:"2025-02-20 17:00:00"}]),F=w(100),K=[{name:"山东临工工程机械有限公司"},{name:"青岛海尔生物医疗股份有限公司"},{name:"山东新华医疗器械股份有限公司"},{name:"浪潮电子信息产业股份有限公司"},{name:"中通客车控股股份有限公司"}],p=z({form:!1,view:!1}),f=w("add"),n=w(null),i=z({customer:"",type:"",title:"",processNote:""}),M=z({customer:[{required:!0,message:"请选择客户",trigger:"change"}],type:[{required:!0,message:"请选择服务类型",trigger:"change"}],title:[{required:!0,message:"请输入工单标题",trigger:"blur"}],processNote:[{required:!0,message:"请输入处理记录",trigger:"blur"}]}),S=w(),q=s=>({consult:"咨询",complaint:"投诉",suggestion:"建议",other:"其他"})[s]||"未知",P=s=>({pending:"warning",processing:"primary",completed:"success",closed:"info"})[s]||"info",E=s=>({pending:"待处理",processing:"处理中",completed:"已完成",closed:"已关闭"})[s]||"未知",L=()=>{c.value.page=1,G()},G=()=>{console.log("加载服务列表:",c.value)},A=()=>{f.value="add",Object.assign(i,{customer:"",type:"",title:"",processNote:""}),p.form=!0},H=s=>{f.value="process",Object.assign(i,{customer:s.customer,type:s.type,title:s.title,processNote:""}),n.value=s,p.form=!0},I=s=>{n.value=s,p.view=!0},J=s=>{ue.confirm("确定要关闭该工单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{console.log("关闭工单:",s),$.success("关闭成功")}).catch(()=>{})},Q=()=>{G()},W=()=>{G()},X=async()=>{S.value&&await S.value.validate(s=>{if(s){const b=new Date().toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/\//g,"-");if(f.value==="add"){const V=`GD${b.replace(/[-: ]/g,"").slice(0,12)}${String(N.value.length+1).padStart(4,"0")}`;N.value.unshift({id:N.value.length+1,code:V,customer:i.customer,type:i.type,status:"pending",title:i.title,createTime:b,processNotes:[{time:b,content:i.processNote}]}),$.success("工单创建成功")}else n.value&&(n.value.status="processing",n.value.processNotes||(n.value.processNotes=[]),n.value.processNotes.push({time:b,content:i.processNote})),$.success("处理成功");p.form=!1}})};return(s,t)=>{const b=a("el-icon"),V=a("el-input"),r=a("el-option"),x=a("el-select"),v=a("el-button"),k=a("el-card"),C=a("el-col"),Y=a("el-row"),_=a("el-table-column"),Z=a("el-tag"),ee=a("el-table"),te=a("el-pagination"),T=a("el-form-item"),le=a("el-form"),O=a("el-dialog"),y=a("el-descriptions-item"),oe=a("el-descriptions");return g(),h("div",re,[e(k,null,{header:l(()=>[d("div",ce,[d("div",pe,[e(V,{modelValue:c.value.keyword,"onUpdate:modelValue":t[0]||(t[0]=o=>c.value.keyword=o),placeholder:"请输入工单号/客户名称",style:{width:"300px"},clearable:"",onKeyup:ae(L,["enter"])},{prefix:l(()=>[e(b,null,{default:l(()=>[e(ne(ie))]),_:1})]),_:1},8,["modelValue"]),e(x,{modelValue:c.value.status,"onUpdate:modelValue":t[1]||(t[1]=o=>c.value.status=o),placeholder:"工单状态",clearable:"",style:{width:"120px"}},{default:l(()=>[e(r,{label:"待处理",value:"pending"}),e(r,{label:"处理中",value:"processing"}),e(r,{label:"已完成",value:"completed"}),e(r,{label:"已关闭",value:"closed"})]),_:1},8,["modelValue"]),e(x,{modelValue:c.value.type,"onUpdate:modelValue":t[2]||(t[2]=o=>c.value.type=o),placeholder:"服务类型",clearable:"",style:{width:"120px"}},{default:l(()=>[e(r,{label:"咨询",value:"consult"}),e(r,{label:"投诉",value:"complaint"}),e(r,{label:"建议",value:"suggestion"}),e(r,{label:"其他",value:"other"})]),_:1},8,["modelValue"]),e(v,{type:"primary",onClick:L},{default:l(()=>t[13]||(t[13]=[u("搜索")])),_:1})]),e(v,{type:"primary",onClick:A},{default:l(()=>t[14]||(t[14]=[u("新增工单")])),_:1})])]),default:l(()=>[d("div",me,[e(Y,{gutter:20},{default:l(()=>[e(C,{span:6},{default:l(()=>[e(k,{shadow:"hover",class:"data-card"},{default:l(()=>t[15]||(t[15]=[d("h3",null,"待处理",-1),d("div",{class:"number warning"},"12",-1)])),_:1})]),_:1}),e(C,{span:6},{default:l(()=>[e(k,{shadow:"hover",class:"data-card"},{default:l(()=>t[16]||(t[16]=[d("h3",null,"处理中",-1),d("div",{class:"number primary"},"24",-1)])),_:1})]),_:1}),e(C,{span:6},{default:l(()=>[e(k,{shadow:"hover",class:"data-card"},{default:l(()=>t[17]||(t[17]=[d("h3",null,"已完成",-1),d("div",{class:"number success"},"89",-1)])),_:1})]),_:1}),e(C,{span:6},{default:l(()=>[e(k,{shadow:"hover",class:"data-card"},{default:l(()=>t[18]||(t[18]=[d("h3",null,"已关闭",-1),d("div",{class:"number info"},"45",-1)])),_:1})]),_:1})]),_:1})]),d("div",ge,[e(ee,{data:N.value,border:"",style:{width:"100%"},height:"100%"},{default:l(()=>[e(_,{prop:"code",label:"工单号",width:"180"}),e(_,{prop:"customer",label:"客户名称"}),e(_,{prop:"type",label:"服务类型",width:"100"},{default:l(({row:o})=>[u(m(q(o.type)),1)]),_:1}),e(_,{prop:"status",label:"状态",width:"100"},{default:l(({row:o})=>[e(Z,{type:P(o.status)},{default:l(()=>[u(m(E(o.status)),1)]),_:2},1032,["type"])]),_:1}),e(_,{prop:"title",label:"标题","show-overflow-tooltip":""}),e(_,{prop:"createTime",label:"创建时间",width:"180"}),e(_,{label:"操作",width:"180",fixed:"right"},{default:l(({row:o})=>[o.status!=="completed"&&o.status!=="closed"?(g(),U(v,{key:0,link:"",type:"primary",onClick:D=>H(o)},{default:l(()=>t[19]||(t[19]=[u(" 处理 ")])),_:2},1032,["onClick"])):B("",!0),e(v,{link:"",type:"primary",onClick:D=>I(o)},{default:l(()=>t[20]||(t[20]=[u("查看")])),_:2},1032,["onClick"]),o.status==="pending"?(g(),U(v,{key:1,link:"",type:"danger",onClick:D=>J(o)},{default:l(()=>t[21]||(t[21]=[u(" 关闭 ")])),_:2},1032,["onClick"])):B("",!0)]),_:1})]),_:1},8,["data"])]),d("div",ve,[e(te,{"current-page":c.value.page,"onUpdate:currentPage":t[3]||(t[3]=o=>c.value.page=o),"page-size":c.value.pageSize,"onUpdate:pageSize":t[4]||(t[4]=o=>c.value.pageSize=o),total:F.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:Q,onCurrentChange:W},null,8,["current-page","page-size","total"])])]),_:1}),e(O,{modelValue:p.form,"onUpdate:modelValue":t[10]||(t[10]=o=>p.form=o),title:f.value==="add"?"新增工单":"处理工单",width:"600px"},{footer:l(()=>[e(v,{onClick:t[9]||(t[9]=o=>p.form=!1)},{default:l(()=>t[22]||(t[22]=[u("取消")])),_:1}),e(v,{type:"primary",onClick:X},{default:l(()=>t[23]||(t[23]=[u("确定")])),_:1})]),default:l(()=>[e(le,{ref_key:"formRef",ref:S,model:i,rules:M,"label-width":"100px"},{default:l(()=>[e(T,{label:"客户名称",prop:"customer"},{default:l(()=>[e(x,{modelValue:i.customer,"onUpdate:modelValue":t[5]||(t[5]=o=>i.customer=o),placeholder:"请选择客户",style:{width:"100%"},disabled:f.value==="process"},{default:l(()=>[(g(),h(R,null,j(K,o=>e(r,{key:o.name,label:o.name,value:o.name},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled"])]),_:1}),e(T,{label:"服务类型",prop:"type"},{default:l(()=>[e(x,{modelValue:i.type,"onUpdate:modelValue":t[6]||(t[6]=o=>i.type=o),placeholder:"请选择服务类型",style:{width:"100%"},disabled:f.value==="process"},{default:l(()=>[e(r,{label:"咨询",value:"consult"}),e(r,{label:"投诉",value:"complaint"}),e(r,{label:"建议",value:"suggestion"}),e(r,{label:"其他",value:"other"})]),_:1},8,["modelValue","disabled"])]),_:1}),e(T,{label:"工单标题",prop:"title"},{default:l(()=>[e(V,{modelValue:i.title,"onUpdate:modelValue":t[7]||(t[7]=o=>i.title=o),placeholder:"请输入工单标题",disabled:f.value==="process"},null,8,["modelValue","disabled"])]),_:1}),e(T,{label:"处理记录",prop:"processNote"},{default:l(()=>[e(V,{modelValue:i.processNote,"onUpdate:modelValue":t[8]||(t[8]=o=>i.processNote=o),type:"textarea",rows:4,placeholder:"请输入处理记录"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),e(O,{modelValue:p.view,"onUpdate:modelValue":t[12]||(t[12]=o=>p.view=o),title:"工单详情",width:"600px"},{footer:l(()=>[e(v,{onClick:t[11]||(t[11]=o=>p.view=!1)},{default:l(()=>t[24]||(t[24]=[u("关闭")])),_:1})]),default:l(()=>[n.value?(g(),U(oe,{key:0,column:2,border:""},{default:l(()=>[e(y,{label:"工单号"},{default:l(()=>[u(m(n.value.code),1)]),_:1}),e(y,{label:"客户名称"},{default:l(()=>[u(m(n.value.customer),1)]),_:1}),e(y,{label:"服务类型"},{default:l(()=>[u(m(q(n.value.type)),1)]),_:1}),e(y,{label:"状态"},{default:l(()=>[u(m(E(n.value.status)),1)]),_:1}),e(y,{label:"工单标题",span:2},{default:l(()=>[u(m(n.value.title),1)]),_:1}),e(y,{label:"创建时间",span:2},{default:l(()=>[u(m(n.value.createTime),1)]),_:1}),e(y,{label:"处理记录",span:2},{default:l(()=>[n.value.processNotes?(g(),h("div",fe,[(g(!0),h(R,null,j(n.value.processNotes,(o,D)=>(g(),h("div",{key:D,class:"process-note"},[d("div",_e,m(o.time),1),d("div",ye,m(o.content),1)]))),128))])):(g(),h("div",be,"暂无处理记录"))]),_:1})]),_:1})):B("",!0)]),_:1},8,["modelValue"])])}}});const ke=de(we,[["__scopeId","data-v-c18e3e50"]]);export{ke as default};
